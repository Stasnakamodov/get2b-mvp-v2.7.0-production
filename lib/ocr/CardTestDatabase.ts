/**
 * üóÉÔ∏è –ë–ê–ó–ê –¢–ï–°–¢–û–í–´–• –ö–ê–†–¢–û–ß–ï–ö –ö–û–ú–ü–ê–ù–ò–ô
 * –°–æ–¥–µ—Ä–∂–∏—Ç —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è OCR —Å–∏—Å—Ç–µ–º—ã
 */

export interface CompanyCardData {
  id: string;
  name: string;
  status: 'success' | 'partial' | 'failed';
  extractedText: string;
  expectedData: ExpectedCompanyData;
  actualResults?: ExtractedCompanyData;
  issues?: string[];
  dateAdded: string;
  lastTested: string;
  version: string;
}

export interface ExpectedCompanyData {
  companyName: string;
  legalName: string;
  inn: string;
  kpp: string;
  ogrn: string;
  address: string;
  bankName: string;
  bankAccount: string;
  corrAccount: string;
  bankBik: string;
  phone?: string;
  email?: string;
  website?: string;
  director?: string;
}

export interface ExtractedCompanyData {
  [key: string]: {
    value: string;
    confidence: number;
    source: 'pattern' | 'postprocess';
  } | undefined;
}

/**
 * üóÉÔ∏è –≠–¢–ê–õ–û–ù–ù–ê–Ø –ë–ê–ó–ê –ö–ê–†–¢–û–ß–ï–ö
 */
export const COMPANY_CARD_DATABASE: { [id: string]: CompanyCardData } = {
  
  "card_001_partner": {
    id: "card_001_partner",
    name: "–ü–ê–†–¢–ù–ï–†",
    status: "success",
    dateAdded: "2025-09-10",
    lastTested: "2025-09-12",
    version: "2.0.0",
    extractedText: `
–ö–ê–†–¢–û–ß–ö–ê –ü–†–ï–î–ü–†–ò–Ø–¢–ò–Ø

–û–û–û "–ü–ê–†–¢–ù–ï–†"

–ò–ù–ù / –ö–ü–ü
9716000221 / 971601419

–û–ì–†–ù
1027716000229

–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å
115432, –≥. –ú–æ—Å–∫–≤–∞, –ø—Ä–æ—Å–ø–µ–∫—Ç –ê–Ω–¥—Ä–æ–ø–æ–≤–∞, –¥.38, –∫–æ—Ä–ø.3

–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞
–ê–õ–¨–§–ê-–ë–ê–ù–ö

–ë–ò–ö –±–∞–Ω–∫–∞
044525593

–†–∞—Å—á—ë—Ç–Ω—ã–π —Å—á–µ—Ç
40702810123450101230

–ö–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—Å–∫–∏–π —Å—á–µ—Ç
30101810200000000593

–¢–µ–ª–µ—Ñ–æ–Ω
+7 (495) 123-45-67

E-mail
info@partner.ru
    `,
    expectedData: {
      companyName: "–ü–ê–†–¢–ù–ï–†",
      legalName: "–û–û–û \"–ü–ê–†–¢–ù–ï–†\"",
      inn: "9716000221",
      kpp: "971601419", 
      ogrn: "1027716000229",
      address: "115432, –≥. –ú–æ—Å–∫–≤–∞, –ø—Ä–æ—Å–ø–µ–∫—Ç –ê–Ω–¥—Ä–æ–ø–æ–≤–∞, –¥.38, –∫–æ—Ä–ø.3",
      bankName: "–ê–õ–¨–§–ê-–ë–ê–ù–ö",
      bankAccount: "40702810123450101230",
      corrAccount: "30101810200000000593",
      bankBik: "044525593",
      phone: "+7 (495) 123-45-67",
      email: "info@partner.ru"
    },
    issues: []
  },

  "card_002_itgroup": {
    id: "card_002_itgroup", 
    name: "–ê–ô –¢–ò –ì–†–£–ü",
    status: "success",
    dateAdded: "2025-09-10",
    lastTested: "2025-09-12", 
    version: "2.0.0",
    extractedText: `
–û–±—â–µ—Å—Ç–≤–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é "–ê–ô –¢–ò –ì–†–£–ü"
–ò–ù–ù 7701234567 –ö–ü–ü 770101001
–û–ì–†–ù 1027701234567

–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å: 
123456, –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, –¥. 1

–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã:
–ü–ê–û –°–ë–ï–†–ë–ê–ù–ö
–ë–ò–ö 044525225
–†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç 40702810938000123456
–ö–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—Å–∫–∏–π —Å—á–µ—Ç 30101810400000000225

–ö–æ–Ω—Ç–∞–∫—Ç—ã:
–¢–µ–ª: +7 (495) 987-65-43
Email: contact@itgroup.ru
    `,
    expectedData: {
      companyName: "–ê–ô –¢–ò –ì–†–£–ü",
      legalName: "–û–±—â–µ—Å—Ç–≤–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é \"–ê–ô –¢–ò –ì–†–£–ü\"",
      inn: "7701234567",
      kpp: "770101001",
      ogrn: "1027701234567", 
      address: "123456, –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, –¥. 1",
      bankName: "–ü–ê–û –°–ë–ï–†–ë–ê–ù–ö", 
      bankAccount: "40702810938000123456",
      corrAccount: "30101810400000000225",
      bankBik: "044525225",
      phone: "+7 (495) 987-65-43",
      email: "contact@itgroup.ru"
    },
    issues: []
  },

  "card_003_volsevmash": {
    id: "card_003_volsevmash",
    name: "–í–û–õ–°–ï–í–ú–ê–®", 
    status: "success",
    dateAdded: "2025-09-10",
    lastTested: "2025-09-12",
    version: "2.0.0",
    extractedText: `
–û–û–û "–í–û–õ–°–ï–í–ú–ê–®"
8801234567 / 880101001
–û–ì–†–ù: 1028801234567

–ê–¥—Ä–µ—Å: 400001, –≥. –í–æ–ª–≥–æ–≥—Ä–∞–¥, —É–ª. –ú–∏—Ä–∞, 15

–ë–∞–Ω–∫: –í–¢–ë (–ü–ê–û)  
–ë–ò–ö: 044525187
–†–∞—Å—á—ë—Ç–Ω—ã–π —Å—á—ë—Ç: 40702810200001234567
–ö–æ—Ä—Ä. —Å—á—ë—Ç: 30101810700000000187

+7 (8442) 12-34-56
    `,
    expectedData: {
      companyName: "–í–û–õ–°–ï–í–ú–ê–®",
      legalName: "–û–û–û \"–í–û–õ–°–ï–í–ú–ê–®\"",
      inn: "8801234567",
      kpp: "880101001",
      ogrn: "1028801234567",
      address: "400001, –≥. –í–æ–ª–≥–æ–≥—Ä–∞–¥, —É–ª. –ú–∏—Ä–∞, 15",
      bankName: "–í–¢–ë (–ü–ê–û)",
      bankAccount: "40702810200001234567", 
      corrAccount: "30101810700000000187",
      bankBik: "044525187",
      phone: "+7 (8442) 12-34-56"
    },
    issues: ["email", "website"] // –ù–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–∞—Ä—Ç–æ—á–∫–µ
  },

  "card_004_baisyuhan": {
    id: "card_004_baisyuhan",
    name: "–ë–ê–ô–°–Æ–•–ê–ù",
    status: "failed",
    dateAdded: "2025-09-12", 
    lastTested: "2025-09-12",
    version: "2.0.0",
    extractedText: `
–ü–æ–∫—É–ø–∞—Ç–µ–ª—å:
–û–ë–©–ï–°–¢–í–û –° –û–ì–†–ê–ù–ò–ß–ï–ù–ù–û–ô –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–¨–Æ "–ë–ê–ô–°–Æ–•–ê–ù"
–ò–ù–ù: 9705227092
–û–ì–†–ù: 1247700449480
–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å: –≥ –ú–æ—Å–∫–≤–∞, —É–ª –õ–µ—Ç–Ω–∏–∫–æ–≤—Å–∫–∞—è, –¥ 10 —Å—Ç—Ä 2, –∫–≤./–æ—Ñ. –ü–û–ú–ï–©. 18/10
–†–µ–∫–≤–∏–∑–∏—Ç—ã –≤ –§–ò–õ–ò–ê–õ "–°–ê–ù–ö–¢-–ü–ï–¢–ï–†–ë–£–†–ì–°–ö–ò–ô" –ê–û "–ê–õ–¨–§–ê-–ë–ê–ù–ö"
–ë–ò–ö: 044030786
–ö/—Å: 3010181060000000786 –≤ –°–ï–í–ï–†–û-–ó–ê–ü–ê–î–ù–û–ï –ì–£ –ë–ê–ù–ö–ê –†–û–°–°–ò–ò
–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞: 40702810232410015485
    `,
    expectedData: {
      companyName: "–ë–ê–ô–°–Æ–•–ê–ù",
      legalName: "–û–ë–©–ï–°–¢–í–û –° –û–ì–†–ê–ù–ò–ß–ï–ù–ù–û–ô –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–¨–Æ \"–ë–ê–ô–°–Æ–•–ê–ù\"",
      inn: "9705227092",
      kpp: "", // –ù–µ —É–∫–∞–∑–∞–Ω –≤ –∫–∞—Ä—Ç–æ—á–∫–µ
      ogrn: "1247700449480",
      address: "–≥ –ú–æ—Å–∫–≤–∞, —É–ª –õ–µ—Ç–Ω–∏–∫–æ–≤—Å–∫–∞—è, –¥ 10 —Å—Ç—Ä 2, –∫–≤./–æ—Ñ. –ü–û–ú–ï–©. 18/10",
      bankName: "–ê–õ–¨–§–ê-–ë–ê–ù–ö",
      bankAccount: "40702810232410015485",
      corrAccount: "3010181060000000786", 
      bankBik: "044030786"
    },
    issues: [
      "–ò–ù–ù –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ '–ò–ù–ù: 9705227092'",
      "–û–ì–†–ù –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ '–û–ì–†–ù: 1247700449480'", 
      "–ö/—Å –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ '–ö/—Å: 3010181060000000786'",
      "–ë–ò–ö –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ '–ë–ò–ö: 044030786'"
    ]
  },

  "card_005_nagovitsin": {
    id: "card_005_nagovitsin",
    name: "–ù–ê–ì–û–í–ò–¶–ò–ù –ò–ü", 
    status: "failed",
    dateAdded: "2025-09-12",
    lastTested: "2025-09-12",
    version: "2.1.2",
    extractedText: `
–ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è

–ü–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å –ù–∞–≥–æ–≤–∏—Ü–∏–Ω –ê–Ω–¥—Ä–µ–π –ê–ª–µ–∫—Å–µ–µ–≤–∏—á
–°–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: –ò–ü –ù–∞–≥–æ–≤–∏—Ü–∏–Ω –ê–Ω–¥—Ä–µ–π –ê–ª–µ–∫—Å–µ–µ–≤–∏—á
–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å: 426000, –£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø., –≥ –ò–∂–µ–≤—Å–∫
–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å: –≥ –ò–∂–µ–≤—Å–∫
–ü–æ—á—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å: 426000, –£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø., –≥ –ò–∂–µ–≤—Å–∫

–ò–ù–ù / –û–ì–†–ù–ò–ü: 183271969239 / 325180000053059
–û–ö–ü–û / –û–ö–ê–¢–û / –û–ö–¢–ú–û: 2043138162 / 94401365000 / 94701000001

–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞: –û–û–û "–û–ó–û–ù –ë–∞–Ω–∫"
–ö–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—Å–∫–∏–π —Å—á–µ—Ç: 30101810645374525068
–ë–ò–ö: 044525068
–†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç: 40802810100001257933
–ò–ù–ù / –ö–ü–ü: 970307050 / 770301001

–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å: –ù–∞–≥–æ–≤–∏—Ü–∏–Ω –ê–Ω–¥—Ä–µ–π –ê–ª–µ–∫—Å–µ–µ–≤–∏—á
–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞: andrey.nagovitsin@internet.ru
–¢–µ–ª–µ—Ñ–æ–Ω: 89524003627
    `,
    expectedData: {
      companyName: "–ù–ê–ì–û–í–ò–¶–ò–ù",
      legalName: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å –ù–∞–≥–æ–≤–∏—Ü–∏–Ω –ê–Ω–¥—Ä–µ–π –ê–ª–µ–∫—Å–µ–µ–≤–∏—á",
      inn: "183271969239", 
      kpp: "770301001",
      ogrn: "325180000053059", // –û–ì–†–ù–ò–ü –¥–ª—è –ò–ü
      address: "426000, –£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø., –≥ –ò–∂–µ–≤—Å–∫",
      bankName: "–û–ó–û–ù –ë–∞–Ω–∫",
      bankAccount: "40802810100001257933",
      corrAccount: "30101810645374525068",
      bankBik: "044525068", 
      phone: "+7 (952) 400-36-27",
      email: "andrey.nagovitsin@internet.ru",
      director: "–ù–∞–≥–æ–≤–∏—Ü–∏–Ω –ê–Ω–¥—Ä–µ–π –ê–ª–µ–∫—Å–µ–µ–≤–∏—á"
    },
    issues: [
      "–ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: '–û–û–û' –≤–º–µ—Å—Ç–æ '–û–ó–û–ù –ë–∞–Ω–∫'",
      "–†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç –ø–µ—Ä–µ–ø—É—Ç–∞–ª—Å—è —Å –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—Å–∫–∏–º",
      "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∫–∞–∫ '–ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è'",
      "–ò–ü —Ñ–æ—Ä–º–∞—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ"
    ]
  },

  "card_006_komplektpro": {
    id: "card_006_komplektpro",
    name: "–ö–û–ú–ü–õ–ï–ö–¢–ü–†–û",
    status: "success",
    dateAdded: "2025-09-12",
    lastTested: "2025-09-12", 
    version: "2.2.1",
    extractedText: `
–ò–ù–ù 9731074981, –ö–ü–ü 772201001, –û–ì–†–ù 1217700042340 –û–ö–ü–û 47068057 –û–ö–¢–ú–û - 45388000000

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –ò–§–ù–° –†–æ—Å—Å–∏–∏ ‚Ññ 22 –ø–æ –≥. –ú–æ—Å–∫–≤–µ, 111024, –≥. –ú–æ—Å–∫–≤–∞, —à–æ—Å—Å–µ –≠–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤, –¥. 14

–û–û–û "–ö–û–ú–ü–õ–ï–ö–¢–ü–†–û" –≤
–ü—É–±–ª–∏—á–Ω–æ–µ –∞–∫—Ü–∏–æ–Ω–µ—Ä–Ω–æ–µ –æ–±—â–µ—Å—Ç–≤–æ ¬´–°–±–µ—Ä–±–∞–Ω–∫ –†–æ—Å—Å–∏–∏¬ª
–†/—Å—á–µ—Ç ‚Äì 40702810738000084434
–ö/—Å—á–µ—Ç ‚Äì 30101810400000000225
–ë–ò–ö ‚Äì 044525225

–ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä –û–û–û "–ö–æ–º–ø–ª–µ–∫—Ç–ø—Ä–æ"
–ë–µ–ª—è–µ–≤ –°–µ—Ä–≥–µ–π –ë–æ—Ä–∏—Å–æ–≤–∏—á (–¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –£—Å—Ç–∞–≤a) +7 950 246-60-05
    `,
    expectedData: {
      companyName: "–ö–û–ú–ü–õ–ï–ö–¢–ü–†–û",
      legalName: "–û–û–û \"–ö–û–ú–ü–õ–ï–ö–¢–ü–†–û\"",
      inn: "9731074981",
      kpp: "772201001",
      ogrn: "1217700042340",
      address: "111024, –≥. –ú–æ—Å–∫–≤–∞, —à–æ—Å—Å–µ –≠–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤, –¥. 14",
      bankName: "–°–±–µ—Ä–±–∞–Ω–∫ –†–æ—Å—Å–∏–∏",
      bankAccount: "40702810738000084434",
      corrAccount: "30101810400000000225",
      bankBik: "044525225",
      director: "–ë–µ–ª—è–µ–≤ –°–µ—Ä–≥–µ–π –ë–æ—Ä–∏—Å–æ–≤–∏—á"
    },
    issues: []
  },

  "card_007_engelsky_metal": {
    id: "card_007_engelsky_metal",
    name: "–≠–ù–ì–ï–õ–¨–°–°–ö–ò–ô –ú–ï–¢–ê–õ–õ",
    status: "success",
    dateAdded: "2025-09-12",
    lastTested: "2025-09-12",
    version: "2.2.2",
    extractedText: `
–ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è

–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è  
–û–û–û "–≠–Ω–≥–µ–ª—å—Å—Å–∫–∏–π –º–µ—Ç–∞–ª–ª"

–ò–ù–ù/–ö–ü–ü: 6449091357\\6449091001
–û–ì–†–ù: 1186451018324 –æ—Ç 07.08.2018 –≥.
–ì–ª–∞–≤–Ω—ã–π –±—É—Ö–≥–∞–ª—Ç–µ—Ä: –¢—é–ª–µ–Ω–µ–≤ –ê–ª–µ–∫—Å–µ–π –ú–∏—Ö–∞–π–ª–æ–≤–∏—á

–ê–¥—Ä–µ—Å –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è
410000, –†–û–°–°–ò–Ø, –°–ê–†–ê–¢–û–í–°–ö–ê–Ø –û–ë–õ, –≥ –≠–Ω–≥–µ–ª—å—Å, —É–ª –•–∏–º–∏–∫–æ–≤, –¥ 2–ê

–û–ö–ü–û –û–ì–†–ù
32359263
1186451018324 –æ—Ç 07.08.2018 –≥ –ò–Ω—Å–ø–µ–∫—Ü–∏—è –§–µ–¥–µ—Ä–∞–ª—å–Ω–æ–π –Ω–∞–ª–æ–≥–æ–≤–æ–π —Å–ª—É–∂–±—ã ‚Ññ 25 –ø–æ –°–∞—Ä–∞—Ç–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
    `,
    expectedData: {
      companyName: "–≠–Ω–≥–µ–ª—å—Å—Å–∫–∏–π –º–µ—Ç–∞–ª–ª",
      legalName: "–û–û–û \"–≠–Ω–≥–µ–ª—å—Å—Å–∫–∏–π –º–µ—Ç–∞–ª–ª\"",
      inn: "6449091357",
      kpp: "6449091001",
      ogrn: "1186451018324",
      address: "410000, –†–û–°–°–ò–Ø, –°–ê–†–ê–¢–û–í–°–ö–ê–Ø –û–ë–õ, –≥ –≠–Ω–≥–µ–ª—å—Å, —É–ª –•–∏–º–∏–∫–æ–≤, –¥ 2–ê",
      bankName: "", // –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
      bankAccount: "",
      corrAccount: "",
      bankBik: "",
      director: "–¢—é–ª–µ–Ω–µ–≤ –ê–ª–µ–∫—Å–µ–π –ú–∏—Ö–∞–π–ª–æ–≤–∏—á"
    },
    issues: []
  },

  "card_008_trubniy_potok": {
    id: "card_008_trubniy_potok",
    name: "–¢–†–£–ë–ù–´–ô –ü–û–¢–û–ö –ü–ï–†–ï–†–ê–ë–û–¢–ö–ê",
    status: "success",
    dateAdded: "2025-09-12",
    lastTested: "2025-09-12",
    version: "2.3.2",
    extractedText: `
–û–±—â–µ—Å—Ç–≤–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é ¬´–¢—Ä—É–±–Ω—ã–π –ü–æ—Ç–æ–∫ –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞¬ª

–ò–ù–ù: 2014032944
–ö–ü–ü: 201401001  
–û–ì–†–ù: 1212000009572

–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å: 366020, –ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥.–æ. –≥–æ—Ä–æ–¥ –ì—Ä–æ–∑–Ω—ã–π, –≥. –ì—Ä–æ–∑–Ω—ã–π, —Ä-–Ω –ê—Ö–º–∞—Ç–æ–≤—Å–∫–∏–π, —É–ª. –∏–º. –£.–î. –î–∏–º–∞–µ–≤–∞, –¥. 14, —ç—Ç–∞–∂ 2, –ø–æ–º

–†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç: 40702810400250001112
–ö–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—Å–∫–∏–π —Å—á–µ—Ç: 30101810145250000411
–ë–ò–ö: 044525411
–ë–∞–Ω–∫: –§–ò–õ–ò–ê–õ "–¶–ï–ù–¢–†–ê–õ–¨–ù–´–ô" –ë–ê–ù–ö–ê –í–¢–ë (–ü–ê–û)
    `,
    expectedData: {
      companyName: "–¢—Ä—É–±–Ω—ã–π –ü–æ—Ç–æ–∫ –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞",
      legalName: "–û–±—â–µ—Å—Ç–≤–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é ¬´–¢—Ä—É–±–Ω—ã–π –ü–æ—Ç–æ–∫ –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞¬ª",
      inn: "2014032944",
      kpp: "201401001",
      ogrn: "1212000009572",
      address: "366020, –ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥.–æ. –≥–æ—Ä–æ–¥ –ì—Ä–æ–∑–Ω—ã–π, –≥. –ì—Ä–æ–∑–Ω—ã–π, —Ä-–Ω –ê—Ö–º–∞—Ç–æ–≤—Å–∫–∏–π, —É–ª. –∏–º. –£.–î. –î–∏–º–∞–µ–≤–∞, –¥. 14, —ç—Ç–∞–∂ 2, –ø–æ–º",
      bankName: "–§–ò–õ–ò–ê–õ \"–¶–ï–ù–¢–†–ê–õ–¨–ù–´–ô\" –ë–ê–ù–ö–ê –í–¢–ë (–ü–ê–û)",
      bankAccount: "40702810400250001112",
      corrAccount: "30101810145250000411",
      bankBik: "044525411"
    },
    issues: []
  },

  "card_009_favorit": {
    id: "card_009_favorit",
    name: "–û–û–û –§–ê–í–û–†–ò–¢",
    status: "success",
    dateAdded: "2025-09-12",
    lastTested: "2025-09-12",
    version: "2.3.3",
    extractedText: `
–û–û–û –§–ê–í–û–†–ò–¢
–ê–¥—Ä–µ—Å 625041, –¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –≥.–æ. –≥–æ—Ä–æ–¥ –¢—é–º–µ–Ω—å, –≥ –¢—é–º–µ–Ω—å, —É–ª –ë–∞–∫–∏–Ω—Å–∫–∏—Ö
–ö–æ–º–∏—Å—Å–∞—Ä–æ–≤, –¥. 1, –ø–æ–º–µ—â. 6
–ò–ù–ù 7203563629
–ö–ü–ü 720301001
—Ä—Å—á–µ—Ç 40702810500000011819
–ë–∞–Ω–∫ –ê–û –ë–∞–Ω–∫ –†—É—Å—Å–∫–∏–π –°—Ç–∞–Ω–¥–∞—Ä—Ç¬ª
–∫—Å 30101810845250000151
–ë–ò–ö 044525151
–ì–ï–ù–ï–†–ê–õ–¨–ù–´–ô –î–ò–†–ï–ö–¢–û–† –ë–∞—Ä—ã—à–µ–≤–∞ –ú–∞—Ä–∏—è –î–º–∏—Ç—Ä–∏–µ–≤–Ω–∞
    `,
    expectedData: {
      companyName: "–û–û–û –§–ê–í–û–†–ò–¢",
      legalName: "–û–û–û –§–ê–í–û–†–ò–¢",
      inn: "7203563629",
      kpp: "720301001",
      ogrn: "", // –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∫–∞—Ä—Ç–æ—á–∫–µ
      address: "625041, –¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –≥.–æ. –≥–æ—Ä–æ–¥ –¢—é–º–µ–Ω—å, –≥ –¢—é–º–µ–Ω—å, —É–ª –ë–∞–∫–∏–Ω—Å–∫–∏—Ö –ö–æ–º–∏—Å—Å–∞—Ä–æ–≤, –¥. 1, –ø–æ–º–µ—â. 6",
      bankName: "–ê–û –ë–∞–Ω–∫ –†—É—Å—Å–∫–∏–π –°—Ç–∞–Ω–¥–∞—Ä—Ç",
      bankAccount: "40702810500000011819",
      corrAccount: "30101810845250000151", 
      bankBik: "044525151",
      director: "–ë–∞—Ä—ã—à–µ–≤–∞ –ú–∞—Ä–∏—è –î–º–∏—Ç—Ä–∏–µ–≤–Ω–∞"
    },
    issues: []
  }
};

/**
 * üß™ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –í–°–ï–• –ö–ê–†–¢–û–ß–ï–ö
 */
export async function runRegressionTests(extractorFunction: (text: string) => any): Promise<{
  totalCards: number;
  successfulCards: number;
  failedCards: string[];
  regressions: string[];
  newIssues: string[];
}> {
  const results = {
    totalCards: 0,
    successfulCards: 0, 
    failedCards: [] as string[],
    regressions: [] as string[],
    newIssues: [] as string[]
  };

  for (const [cardId, cardData] of Object.entries(COMPANY_CARD_DATABASE)) {
    results.totalCards++;
    
    try {
      const extractedData = extractorFunction(cardData.extractedText);
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
      const requiredFields = ['companyName', 'inn', 'ogrn', 'bankAccount'];
      let fieldsFound = 0;
      
      for (const field of requiredFields) {
        if (extractedData[field] && extractedData[field].value) {
          fieldsFound++;
        }
      }
      
      const successThreshold = requiredFields.length * 0.75; // 75% –ø–æ–ª–µ–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω—ã
      const isSuccess = fieldsFound >= successThreshold;
      
      if (isSuccess) {
        results.successfulCards++;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ (–∫–∞—Ä—Ç–æ—á–∫–∞ —Ä–∞–±–æ—Ç–∞–ª–∞ —Ä–∞–Ω—å—à–µ, –Ω–æ —Å–ª–æ–º–∞–ª–∞—Å—å)
        if (cardData.status === 'success') {
          // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
          const missingFields = requiredFields.filter(field => 
            cardData.expectedData[field as keyof ExpectedCompanyData] && 
            (!extractedData[field] || !extractedData[field].value)
          );
          
          if (missingFields.length > 0) {
            results.regressions.push(`${cardData.name}: –ø–æ—Ç–µ—Ä—è–Ω—ã –ø–æ–ª—è ${missingFields.join(', ')}`);
          }
        }
      } else {
        results.failedCards.push(cardData.name);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –Ω–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
        if (cardData.status === 'success') {
          results.regressions.push(`${cardData.name}: –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å`);
        }
      }
      
    } catch (error) {
      results.failedCards.push(cardData.name);
      results.newIssues.push(`${cardData.name}: –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ - ${error}`);
    }
  }
  
  return results;
}

/**
 * üìä –ì–ï–ù–ï–†–ê–¶–ò–Ø –û–¢–ß–ï–¢–ê –ü–û –ë–ê–ó–ï –ö–ê–†–¢–û–ß–ï–ö
 */
export function generateCardDatabaseReport(): {
  totalCards: number;
  byStatus: { [status: string]: number };
  commonIssues: { [issue: string]: number };
  recommendations: string[];
} {
  const report = {
    totalCards: Object.keys(COMPANY_CARD_DATABASE).length,
    byStatus: {} as { [status: string]: number },
    commonIssues: {} as { [issue: string]: number },
    recommendations: [] as string[]
  };
  
  // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å—ã
  Object.values(COMPANY_CARD_DATABASE).forEach(card => {
    report.byStatus[card.status] = (report.byStatus[card.status] || 0) + 1;
    
    // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —á–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
    card.issues?.forEach(issue => {
      report.commonIssues[issue] = (report.commonIssues[issue] || 0) + 1;
    });
  });
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  const failedCount = report.byStatus.failed || 0;
  if (failedCount > 0) {
    report.recommendations.push(`–ò—Å–ø—Ä–∞–≤–∏—Ç—å ${failedCount} –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫`);
  }
  
  const mostCommonIssue = Object.entries(report.commonIssues)
    .sort(([,a], [,b]) => b - a)[0];
  
  if (mostCommonIssue) {
    report.recommendations.push(`–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ${mostCommonIssue[0]} (–≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ ${mostCommonIssue[1]} –∫–∞—Ä—Ç–æ—á–∫–∞—Ö)`);
  }
  
  return report;
}

/**
 * üîç –ü–û–ò–°–ö –ö–ê–†–¢–û–ß–ö–ò –ü–û –ü–ê–¢–¢–ï–†–ù–£
 */
export function findCardsByPattern(pattern: RegExp): {
  cardName: string;
  matches: RegExpMatchArray[];
}[] {
  const results = [];
  
  for (const [cardId, cardData] of Object.entries(COMPANY_CARD_DATABASE)) {
    const matches = Array.from(cardData.extractedText.matchAll(pattern));
    if (matches.length > 0) {
      results.push({
        cardName: cardData.name,
        matches
      });
    }
  }
  
  return results;
}

/**
 * ‚úÖ –í–ê–õ–ò–î–ê–¶–ò–Ø –ù–û–í–û–ì–û –ü–ê–¢–¢–ï–†–ù–ê
 */
export function validatePatternOnAllCards(fieldName: string, newPattern: RegExp): {
  cardName: string;
  shouldFind: boolean;
  actuallyFound: boolean;
  extractedValue?: string;
}[] {
  const results = [];
  
  for (const [cardId, cardData] of Object.entries(COMPANY_CARD_DATABASE)) {
    const expectedValue = cardData.expectedData[fieldName as keyof ExpectedCompanyData];
    const shouldFind = !!expectedValue;
    
    const matches = Array.from(cardData.extractedText.matchAll(newPattern));
    const actuallyFound = matches.length > 0;
    const extractedValue = matches[0]?.[1];
    
    results.push({
      cardName: cardData.name,
      shouldFind,
      actuallyFound,
      extractedValue
    });
  }
  
  return results;
}

export default {
  COMPANY_CARD_DATABASE,
  runRegressionTests,
  generateCardDatabaseReport,
  findCardsByPattern,
  validatePatternOnAllCards
};