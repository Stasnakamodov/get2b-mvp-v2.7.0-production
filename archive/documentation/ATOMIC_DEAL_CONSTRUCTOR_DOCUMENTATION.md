# üöÄ –ö–û–ù–°–¢–†–£–ö–¢–û–† –ê–¢–û–ú–ê–†–ù–´–• –°–î–ï–õ–û–ö - –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 12 —è–Ω–≤–∞—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** üü° –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–§–∞–π–ª:** `app/dashboard/project-constructor/page.tsx`

---

## üéØ **–û–ë–©–ê–Ø –ö–û–ù–¶–ï–ü–¶–ò–Ø**

### **–ß—Ç–æ —Ç–∞–∫–æ–µ "–ê—Ç–æ–º–∞—Ä–Ω–∞—è —Å–¥–µ–ª–∫–∞"?**
–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ - —ç—Ç–æ **—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ 7-—à–∞–≥–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞**, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —É—Å–∏–ª–∏—è–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è –≥–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–∞–π–ª—ã.

### **–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞:**
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ—Ç–∞** - –≤—Å–µ —à–∞–≥–∏ –≤ –æ–¥–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –≤—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π, —à–∞–±–ª–æ–Ω–æ–≤, –∫–∞—Ç–∞–ª–æ–≥–∞
- ‚úÖ **–§–∞–π–ª–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∑–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

---

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò–ù–¢–ï–†–§–ï–ô–°–ê**

### **Block 1: 7 –∫—É–±–∏–∫–æ–≤-—à–∞–≥–æ–≤**
```
[I] [II] [III] [IV] [V] [VI] [VII]
–ö–∞—Ä—Ç –ó–∞—è–≤ –ü–æ–ø–æ–ª –ú–µ—Ç–æ–¥ –†–µ–∫–≤ –ü–æ–ª—É—á –ü–æ–¥—Ç–≤
```

**–õ–æ–≥–∏–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º:**
- **–°—Ü–µ–Ω–∞—Ä–∏–π –ê1:** I, II ‚Üí IV, V ‚Üí III, VI, VII
- **–°—Ü–µ–Ω–∞—Ä–∏–π –ë1:** II ‚Üí IV, V (–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ) ‚Üí I ‚Üí III, VI, VII  
- **–°—Ü–µ–Ω–∞—Ä–∏–π –ë2:** IV, V ‚Üí II ‚Üí I ‚Üí III, VI, VII

### **Block 2: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∑–æ–Ω–∞ –≤—ã–±–æ—Ä–∞**
- **–ù–∞–≤–µ–¥–µ–Ω–∏–µ** –Ω–∞ –∫—É–±–∏–∫ ‚Üí –ø–æ–∫–∞–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞** ‚Üí –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ** –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—É–±–∏–∫–∞

### **Block 3: –°–≤–æ–¥–∫–∞ –∏ –∑–∞–ø—É—Å–∫**
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å –º–∏–Ω–∏-–∫—É–±–∏–∫–∞–º–∏
- –°–≤–æ–¥–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤
- –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

## üìä **–°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–•**

### **1. –®–∞–≥–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞**
```typescript
const constructorSteps = [
  { id: 1, name: "–ö–∞—Ä—Ç–æ—á–∫–∞", description: "–î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏", sources: ["profile", "template", "echo", "manual"] },
  { id: 2, name: "–ó–∞—è–≤–∫–∞", description: "–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤", sources: ["profile", "template", "catalog", "echo", "manual"] },
  { id: 3, name: "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ", description: "–ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞", sources: ["manual"] },
  { id: 4, name: "–ú–µ—Ç–æ–¥", description: "–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã", sources: ["catalog", "manual"] },
  { id: 5, name: "–†–µ–∫–≤–∏–∑–∏—Ç—ã", description: "–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã", sources: ["catalog", "manual"] },
  { id: 6, name: "–ü–æ–ª—É—á–µ–Ω–∏–µ", description: "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤", sources: ["automatic"] },
  { id: 7, name: "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ", description: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ", sources: ["automatic"] }
]
```

### **2. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö**
```typescript
const dataSources = {
  profile: { name: "–ü—Ä–æ—Ñ–∏–ª—å", icon: Users, color: "bg-blue-500" },
  template: { name: "–®–∞–±–ª–æ–Ω", icon: FileText, color: "bg-green-500" },
  catalog: { name: "–ö–∞—Ç–∞–ª–æ–≥", icon: Store, color: "bg-purple-500" },
  echo: { name: "–≠—Ö–æ –¥–∞–Ω–Ω—ã–µ", icon: FileText, color: "bg-orange-500" },
  manual: { name: "–í—Ä—É—á–Ω—É—é", icon: Plus, color: "bg-gray-500" },
  automatic: { name: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏", icon: CheckCircle, color: "bg-emerald-500" }
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò—Å—Ç–æ—á–Ω–∏–∫ "–≠—Ö–æ –¥–∞–Ω–Ω—ã–µ" –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç "–≠—Ö–æ –∫–∞—Ä—Ç–æ—á–µ–∫" –≤ –∫–∞—Ç–∞–ª–æ–≥–µ. –≠—Ö–æ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ - —ç—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤ 4 –∏ 5 –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

### **3. –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```typescript
interface AtomicDealState {
  stepConfigs: Record<number, string>; // { 1: "profile", 2: "manual", ... }
  hoveredStep: number | null;
  lastHoveredStep: number | null;
  manualData: Record<number, any>; // –î–∞–Ω–Ω—ã–µ —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
  uploadedFiles: Record<number, string>; // URL –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
}
```

---

## üé≠ **–î–ï–ö–õ–ê–†–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ –°–¶–ï–ù–ê–†–ò–ï–í**

### **–û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:**
–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è**, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å–∏—Å—Ç–µ–º—ã. –ö–∞–∂–¥—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏–º–µ–µ—Ç —Å–≤–æ—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤.

### **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:**

#### **–°—Ü–µ–Ω–∞—Ä–∏–π –ê: –ö–ª–∏–µ–Ω—Ç-–ø–æ–∫—É–ø–∞—Ç–µ–ª—å (Client-Buyer)**
**–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –ö–ª–∏–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—â–µ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è –∑–∞–∫—É–ø–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤

**–°—Ü–µ–Ω–∞—Ä–∏–π –ê1: –ù–∞—á–∏–Ω–∞–µ–º —Å –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞**
```typescript
interface ScenarioA1 {
  entryPoint: "step1", // –ö—É–±–∏–∫ I - –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞
  sequence: [
    "step1", // –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞
    "step2", // –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ (–≤—ã–±–æ—Ä –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤)
    "step4", // –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞
    "step5", // –†–µ–∫–≤–∏–∑–∏—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞
    "step3", // –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
    "step6", // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
    "step7"  // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
  ],
  logic: "client_buyer_seeking_suppliers"
}
```

**–õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ê1:**
- **–®–∞–≥ I ‚Üí –®–∞–≥ II:** –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- **–®–∞–≥ I ‚Üí –®–∞–≥ IV/V:** –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:** "–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è –∑–∞–∫—É–ø–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤"

#### **–°—Ü–µ–Ω–∞—Ä–∏–π –ë: –ü–æ—Å—Ç–∞–≤—â–∏–∫-–ø—Ä–æ–¥–∞–≤–µ—Ü (Supplier-Seller)**
**–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –ü–æ—Å—Ç–∞–≤—â–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–≤–æ–∏ —Ç–æ–≤–∞—Ä—ã –∏ —É—Å–ª—É–≥–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π –ë1: –ù–∞—á–∏–Ω–∞–µ–º —Å —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞**
```typescript
interface ScenarioB1 {
  entryPoint: "step2", // –ö—É–±–∏–∫ II - —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
  sequence: [
    "step2", // –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ (–∏–∑ —Å–∏–Ω–µ–π –∫–æ–º–Ω–∞—Ç—ã)
    "step4", // –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ)
    "step5", // –†–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ)
    "step1", // –î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    "step3", // –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞
    "step6", // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
    "step7"  // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
  ],
  logic: "supplier_offering_products"
}
```

**–õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ë1:**
- **–®–∞–≥ II ‚Üí –®–∞–≥ IV/V:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ —Å–∏–Ω–µ–π –∫–æ–º–Ω–∞—Ç—ã
- **–®–∞–≥ II ‚Üí –®–∞–≥ I:** –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:** "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤"

**–°—Ü–µ–Ω–∞—Ä–∏–π –ë2: –ù–∞—á–∏–Ω–∞–µ–º —Å —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞**
```typescript
interface ScenarioB2 {
  entryPoint: "step4|step5", // –ö—É–±–∏–∫–∏ IV –∏–ª–∏ V - —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
  sequence: [
    "step4", // –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
    "step5", // –†–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
    "step2", // –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ (–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ç–æ–≤–∞—Ä—ã —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)
    "step1", // –î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞
    "step3", // –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞
    "step6", // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
    "step7"  // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
  ],
  logic: "supplier_setting_payment_first"
}
```

**–õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ë2:**
- **–®–∞–≥ IV/V ‚Üí –®–∞–≥ II:** –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ç–æ–≤–∞—Ä—ã —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ —Å–∏–Ω–µ–π –∫–æ–º–Ω–∞—Ç—ã
- **–®–∞–≥ IV/V ‚Üí –®–∞–≥ I:** –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:** "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é"

### **–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º:**

#### **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è:**
```typescript
const determineActiveScenario = (stepConfigs: Record<number, string>, manualData: Record<number, any>) => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞
  if (stepConfigs[1] && !stepConfigs[2]) {
    return "A1"; // –ù–∞—á–∞–ª–∏ —Å –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞
  }
  
  if (stepConfigs[2] && !stepConfigs[1]) {
    return "B1"; // –ù–∞—á–∞–ª–∏ —Å —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
  }
  
  if ((stepConfigs[4] || stepConfigs[5]) && !stepConfigs[1] && !stepConfigs[2]) {
    return "B2"; // –ù–∞—á–∞–ª–∏ —Å —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
  }
  
  return "mixed"; // –°–º–µ—à–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
}
```

#### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**
```typescript
const generateRecommendations = (scenario: string, currentStep: number) => {
  switch (scenario) {
    case "A1":
      return getClientBuyerRecommendations(currentStep);
    case "B1":
      return getSupplierOfferingRecommendations(currentStep);
    case "B2":
      return getSupplierPaymentFirstRecommendations(currentStep);
    default:
      return getMixedScenarioRecommendations(currentStep);
  }
}
```

#### **–ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**

**–î–ª—è —Å—Ü–µ–Ω–∞—Ä–∏—è –ê1 (–ö–ª–∏–µ–Ω—Ç-–ø–æ–∫—É–ø–∞—Ç–µ–ª—å):**
- **–ü–æ—Å–ª–µ —à–∞–≥–∞ I:** "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –∑–∞–∫—É–ø–∫–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤"
- **–ü–æ—Å–ª–µ —à–∞–≥–∞ II:** "–£–∫–∞–∂–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤"
- **–ü–æ—Å–ª–µ —à–∞–≥–∞ IV/V:** "–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã"

**–î–ª—è —Å—Ü–µ–Ω–∞—Ä–∏—è –ë1 (–ü–æ—Å—Ç–∞–≤—â–∏–∫-—Ç–æ–≤–∞—Ä—ã):**
- **–ü–æ—Å–ª–µ —à–∞–≥–∞ II:** "–î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ —Å–ø–æ—Å–æ–±—É –æ–ø–ª–∞—Ç—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º"
- **–ü–æ—Å–ª–µ —à–∞–≥–∞ IV/V:** "–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã"

**–î–ª—è —Å—Ü–µ–Ω–∞—Ä–∏—è –ë2 (–ü–æ—Å—Ç–∞–≤—â–∏–∫-—Ä–µ–∫–≤–∏–∑–∏—Ç—ã):**
- **–ü–æ—Å–ª–µ —à–∞–≥–∞ IV/V:** "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é"
- **–ü–æ—Å–ª–µ —à–∞–≥–∞ II:** "–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã"

### **–õ–æ–≥–∏–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —à–∞–≥–æ–≤ –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º:**

#### **–≠—Ç–∞–ø–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è:**
```typescript
const getStepActivationLogic = (scenario: string) => {
  switch (scenario) {
    case "A1":
      return {
        stage1: [1, 2, 4, 5], // –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏)
        stage2: [3, 6, 7]     // –≠—Ç–∞–ø 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
      };
    case "B1":
    case "B2":
      return {
        stage1: [1, 2, 4, 5], // –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏)
        stage2: [3, 6, 7]     // –≠—Ç–∞–ø 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
      };
  }
}
```

### **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**

#### **–ü—Ä–∏–º–µ—Ä 1: –°—Ü–µ–Ω–∞—Ä–∏–π –ê1 (–ö–ª–∏–µ–Ω—Ç-–ø–æ–∫—É–ø–∞—Ç–µ–ª—å)**
```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω–∏–ª —à–∞–≥ I (–¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞)
const scenario = "A1";
const currentStep = 1;

// –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
const recommendations = generateRecommendations(scenario, currentStep);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –∑–∞–∫—É–ø–∫–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤"

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —à–∞–≥—É II
const nextStep = 2;
const nextRecommendations = generateRecommendations(scenario, nextStep);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "–£–∫–∞–∂–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤"
```

#### **–ü—Ä–∏–º–µ—Ä 2: –°—Ü–µ–Ω–∞—Ä–∏–π –ë1 (–ü–æ—Å—Ç–∞–≤—â–∏–∫-—Ç–æ–≤–∞—Ä—ã)**
```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª —Ç–æ–≤–∞—Ä—ã –∏–∑ —Å–∏–Ω–µ–π –∫–æ–º–Ω–∞—Ç—ã (—à–∞–≥ II)
const scenario = "B1";
const currentStep = 2;

// –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥–∏ IV –∏ V
const autoFillResult = autoFillSupplierData(manualData[2].supplier_id);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –®–∞–≥–∏ IV –∏ V –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –¥–∞–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

// –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
const recommendations = generateRecommendations(scenario, currentStep);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "–î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ —Å–ø–æ—Å–æ–±—É –æ–ø–ª–∞—Ç—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º"
```

#### **–ü—Ä–∏–º–µ—Ä 3: –°—Ü–µ–Ω–∞—Ä–∏–π –ë2 (–ü–æ—Å—Ç–∞–≤—â–∏–∫-—Ä–µ–∫–≤–∏–∑–∏—Ç—ã)**
```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω–∏–ª —à–∞–≥–∏ IV –∏ V (—Ä–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)
const scenario = "B2";
const currentStep = 5;

// –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —É —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
const supplierProducts = checkSupplierProducts(manualData[5].supplier_id);
if (supplierProducts.length > 0) {
  // –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–≤–∞—Ä–∞–º–∏
  const recommendations = "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞";
} else {
  // –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä—É—á–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
  const recommendations = "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é —Ç–æ–≤–∞—Ä–æ–≤ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª";
}
```

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI:**

#### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –≤ Block 2:**
```typescript
const RecommendationBanner = ({ scenario, currentStep }) => {
  const recommendation = generateRecommendations(scenario, currentStep);
  
  return (
    <div className="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
      <div className="flex items-center">
        <Lightbulb className="h-5 w-5 text-blue-500 mr-2" />
        <p className="text-blue-700 font-medium">{recommendation}</p>
      </div>
    </div>
  );
};
```

#### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º:**
```typescript
const AutoFillNotification = ({ filledSteps, supplierName }) => {
  return (
    <div className="bg-green-50 border-l-4 border-green-400 p-4 mb-4">
      <div className="flex items-center">
        <CheckCircle className="h-5 w-5 text-green-500 mr-2" />
        <p className="text-green-700">
          –î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ "{supplierName}" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ —à–∞–≥–∞–º: {filledSteps.join(', ')}
        </p>
      </div>
    </div>
  );
};
```

---

## üîÑ **–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° 7-–®–ê–ì–û–í–´–ú –ü–†–û–¶–ï–°–°–û–ú**

### **–ú–∞–ø–ø–∏–Ω–≥ –Ω–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã:**

#### **–®–∞–≥ I (–ö–∞—Ä—Ç–æ—á–∫–∞) ‚Üí projects.company_data**
```typescript
// –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
{
  name: string,
  legalName: string,
  inn: string,
  kpp: string,
  ogrn: string,
  address: string,
  bankName: string,
  bankAccount: string,
  email: string,
  phone: string
}
```

#### **–®–∞–≥ II (–ó–∞—è–≤–∫–∞) ‚Üí project_specifications**
```typescript
// –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
{
  project_id: string,
  role: 'client' | 'supplier',
  items: Array<{
    name: string,
    description: string,
    quantity: number,
    price: number,
    currency: string,
    image_url?: string
  }>
}
```

#### **–®–∞–≥ III (–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ) ‚Üí project_receipts**
```typescript
// –ß–µ–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
{
  project_id: string,
  file_url: string,
  status: 'pending' | 'approved' | 'rejected',
  uploaded_at: string
}
```

#### **–®–∞–≥ IV (–ú–µ—Ç–æ–¥) ‚Üí projects.payment_method**
```typescript
// –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–• (20.09.2025):
interface Step4Data {
  type: 'multiple';           // –í—Å–µ–≥–¥–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
  methods: string[];          // –ú–∞—Å—Å–∏–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ ['bank-transfer', 'p2p', 'crypto']
  payment_method: string;     // –í—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥
  auto_filled: boolean;       // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞/—ç—Ö–æ
  supplier_name?: string;     // –ò–º—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
  supplier_data?: any;        // –î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
  catalog_source?: string;    // –ò—Å—Ç–æ—á–Ω–∏–∫: 'verified_supplier' | 'echo_data'
  user_choice: boolean;       // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–¥–µ–ª–∞–ª –≤—ã–±–æ—Ä
}

// LEGACY (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏):
'bank-transfer' | 'p2p' | 'crypto'
```

#### **–®–∞–≥ V (–†–µ–∫–≤–∏–∑–∏—Ç—ã) ‚Üí project_requisites**
```typescript
// –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
{
  project_id: string,
  user_id: string,
  type: 'bank' | 'p2p' | 'crypto',
  data: {
    bankName: string,
    accountNumber: string,
    swift?: string,
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  }
}
```

---

## üìÅ **–°–ò–°–¢–ï–ú–ê –ó–ê–ì–†–£–ó–ö–ò –§–ê–ô–õ–û–í**

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Storage –±–∞–∫–µ—Ç–æ–≤:**
```
Supabase Storage:
‚îú‚îÄ‚îÄ step-a1-ready-company/     # –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–º–ø–∞–Ω–∏–π
‚îú‚îÄ‚îÄ step2-ready-invoices/      # –ò–Ω–≤–æ–π—Å—ã
‚îú‚îÄ‚îÄ step3-supplier-receipts/   # –ß–µ–∫–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
‚îú‚îÄ‚îÄ step6-client-receipts/     # –ß–µ–∫–∏ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ step7-client-confirmations/ # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ project-files/             # –û–±—â–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îî‚îÄ‚îÄ project-images/            # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
```

### **–õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤:**

#### **–®–∞–≥ I: –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏**
```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
const handleCompanyCardUpload = async (file: File) => {
  const fileName = `company_cards/${userId}/${Date.now()}_${file.name}`;
  const { data } = await supabase.storage
    .from('step-a1-ready-company')
    .upload(fileName, file);
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
  const extractedData = await extractCompanyData(file);
  setManualData(1, extractedData);
}
```

#### **–®–∞–≥ II: –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤**
```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ç–æ–≤–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
const handleSpecificationUpload = async (file: File) => {
  const fileName = `specifications/${projectId}/${Date.now()}_${file.name}`;
  const { data } = await supabase.storage
    .from('project-files')
    .upload(fileName, file);
  
  // –ü–∞—Ä—Å–∏–Ω–≥ Excel/CSV —Ñ–∞–π–ª–∞
  const items = await parseSpecificationFile(file);
  setManualData(2, { items });
}
```

#### **–®–∞–≥ III: –ß–µ–∫ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è**
```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞
const handleReceiptUpload = async (file: File) => {
  const fileName = `receipts/${projectId}/${Date.now()}_${file.name}`;
  const { data } = await supabase.storage
    .from('step3-supplier-receipts')
    .upload(fileName, file);
  
  setUploadedFiles(3, data.publicUrl);
}
```

---

## üé® **–§–û–†–ú–´ –†–£–ß–ù–û–ì–û –ó–ê–ü–û–õ–ù–ï–ù–ò–Ø**

### **–®–∞–≥ I: –§–æ—Ä–º–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏**
```tsx
const CompanyForm = () => (
  <div className="space-y-4">
    <div className="grid grid-cols-2 gap-4">
      <div>
        <Label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ *</Label>
        <Input name="name" required />
      </div>
      <div>
        <Label>–ò–ù–ù *</Label>
        <Input name="inn" required />
      </div>
    </div>
    <div>
      <Label>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å</Label>
      <Textarea name="address" rows={3} />
    </div>
    <div className="grid grid-cols-2 gap-4">
      <div>
        <Label>Email</Label>
        <Input name="email" type="email" />
      </div>
      <div>
        <Label>–¢–µ–ª–µ—Ñ–æ–Ω</Label>
        <Input name="phone" />
      </div>
    </div>
    <div className="flex gap-2">
      <Button variant="outline" onClick={handleFileUpload}>
        <Upload className="h-4 w-4 mr-2" />
        –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
      </Button>
      <Button onClick={handleSave}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</Button>
    </div>
  </div>
)
```

### **–®–∞–≥ II: –§–æ—Ä–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏**
```tsx
const SpecificationForm = () => (
  <div className="space-y-4">
    <div>
      <Label>–ü–æ—Å—Ç–∞–≤—â–∏–∫ *</Label>
      <Input name="supplier" required />
    </div>
    <div>
      <Label>–í–∞–ª—é—Ç–∞</Label>
      <Select name="currency">
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
        <option value="RUB">RUB</option>
      </Select>
    </div>
    <ProductList />
    <div className="flex gap-2">
      <Button variant="outline" onClick={handleFileUpload}>
        <Upload className="h-4 w-4 mr-2" />
        –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
      </Button>
      <Button onClick={handleSave}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</Button>
    </div>
  </div>
)
```

### **–®–∞–≥ IV: –§–æ—Ä–º–∞ –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã**
```tsx
const PaymentMethodForm = () => (
  <div className="space-y-4">
    <div>
      <Label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</Label>
      <Select name="paymentMethod" required>
        <option value="bank-transfer">–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥</option>
        <option value="p2p">P2P –ø–ª–∞—Ç–µ–∂</option>
        <option value="crypto">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</option>
      </Select>
    </div>
    <div className="flex gap-2">
      <Button variant="outline" onClick={handleCatalogSelect}>
        <Store className="h-4 w-4 mr-2" />
        –í—ã–±—Ä–∞—Ç—å –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
      </Button>
      <Button onClick={handleSave}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</Button>
    </div>
  </div>
)
```

### **–®–∞–≥ V: –§–æ—Ä–º–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤**
```tsx
const RequisitesForm = () => (
  <div className="space-y-4">
    <div className="grid grid-cols-2 gap-4">
      <div>
        <Label>–ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ *</Label>
        <Input name="bankName" required />
      </div>
      <div>
        <Label>–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞ *</Label>
        <Input name="accountNumber" required />
      </div>
    </div>
    <div>
      <Label>SWIFT/BIC –∫–æ–¥</Label>
      <Input name="swift" />
    </div>
    <div className="flex gap-2">
      <Button variant="outline" onClick={handleCatalogSelect}>
        <Store className="h-4 w-4 mr-2" />
        –í—ã–±—Ä–∞—Ç—å –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
      </Button>
      <Button onClick={handleSave}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</Button>
    </div>
  </div>
)
```

---

## üé≠ **–°–ò–°–¢–ï–ú–ê –≠–•–û –î–ê–ù–ù–´–• –í –ö–û–ù–°–¢–†–£–ö–¢–û–†–ï**

### **üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è:**
–≠—Ö–æ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ = **—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤ 4 –∏ 5** –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### **üìç –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- **–®–∞–≥ IV (–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã):** –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- **–®–∞–≥ V (–†–µ–∫–≤–∏–∑–∏—Ç—ã):** –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

### **üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –∑–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 2 (—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è) —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
2. **–°–∏—Å—Ç–µ–º–∞** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç —ç—Ö–æ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
3. **–ü—Ä–∏ –∫–ª–∏–∫–µ** –Ω–∞ —à–∞–≥–∏ 4 –∏–ª–∏ 5 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å —ç—Ö–æ –¥–∞–Ω–Ω—ã–µ
5. **–î–∞–Ω–Ω—ã–µ** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —à–∞–≥–∏

### **‚ö° –ü–†–ò–û–†–ò–¢–ï–¢–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–ó–ê–ü–û–õ–ù–ï–ù–ò–Ø (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 20.09.2025):**

#### **üèÜ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1: –ö–∞—Ç–∞–ª–æ–≥ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤**
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞, —Å–∏—Å—Ç–µ–º–∞ **–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–µ—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∞** –Ω–∞–¥ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ —ç—Ö–æ –¥–∞–Ω–Ω—ã–º–∏:

```typescript
// –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê: –ö–∞—Ç–∞–ª–æ–≥ –¥–∞–Ω–Ω—ã–µ –ü–ï–†–í–´–ú–ò
console.log('üéØ [ATOMIC] –¢–æ–≤–∞—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞ –Ω–∞–¥ —ç—Ö–æ –¥–∞–Ω–Ω—ã–º–∏')

fetch(`/api/catalog/verified-suppliers?search=${encodeURIComponent(firstProduct.supplier_name)}`)
  .then(response => response.json())
  .then(data => {
    const supplier = data.suppliers?.find((s: any) =>
      s.name.toLowerCase().includes(firstProduct.supplier_name.toLowerCase())
    )

    if (supplier) {
      // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–∞—Ç–∞–ª–æ–≥—É - –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
      const step4Data = {
        type: 'multiple',
        methods: normalizedMethods,
        payment_method: normalizedMethods[0] || 'bank_transfer',
        auto_filled: true,
        supplier_name: supplier.name,
        supplier_data: supplier,
        catalog_source: 'verified_supplier',
        user_choice: true
      }
    }
  })
```

#### **ü•à –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç #2: –≠—Ö–æ –¥–∞–Ω–Ω—ã–µ (fallback)**
–≠—Ö–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫ **–ù–ï –ù–ê–ô–î–ï–ù** –≤ –∫–∞—Ç–∞–ª–æ–≥–µ:

```typescript
// FALLBACK: –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
.catch(() => {
  console.log('üîÑ [ATOMIC] –ü–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–∞—Ç–∞–ª–æ–≥–µ - –∏—â–µ–º —ç—Ö–æ –¥–∞–Ω–Ω—ã–µ')
  // –õ–æ–≥–∏–∫–∞ —ç—Ö–æ –¥–∞–Ω–Ω—ã—Ö...
})
```

#### **üö´ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤:**
- **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ "cash"** –∏–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é
- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** bank_transfer ‚Üí bank-transfer
- **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–µ–π

```typescript
const normalizedMethods = (supplier.payment_methods || ['bank_transfer'])
  .map(method => method === 'bank_transfer' ? 'bank-transfer' : method)
  .filter(method => method !== 'cash')  // –£–±–∏—Ä–∞–µ–º –Ω–∞–ª–∏—á–Ω—ã–µ
  .filter((value, index, self) => self.indexOf(value) === index)  // –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
```

#### **üé® –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:**
- **–¶–≤–µ—Ç–Ω—ã–µ –∫—É–±–∏–∫–∏:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –º–µ—Ç–æ–¥—ã —Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- **–°–µ—Ä—ã–µ –∫—É–±–∏–∫–∏:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
- **–í—Å–µ –º–µ—Ç–æ–¥—ã –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º—ã:** bank-transfer, p2p, crypto

### **üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ö–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
const getEchoSupplierData = async (supplierName: string) => {
  // 1. –ò—â–µ–º –ø—Ä–æ–µ–∫—Ç—ã —Å —ç—Ç–∏–º –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–º
  const { data: specifications } = await supabase
    .from("project_specifications")
    .select(`project_id, supplier_name`)
    .ilike("supplier_name", `%${supplierName}%`);
  
  // 2. –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
  const { data: requisites } = await supabase
    .from("project_requisites")
    .select(`type, data`)
    .in("project_id", projectIds);
  
  // 3. –§–æ—Ä–º–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  return {
    payment_method: { method: 'bank-transfer', supplier_id: '...' },
    requisites: { bankName: '...', accountNumber: '...', swift: '...' },
    project_info: { project_name: '...', status: '...' }
  };
};
```

### **üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç—Ö–æ –¥–∞–Ω–Ω—ã—Ö:**
```typescript
interface EchoData {
  // –®–∞–≥ IV: –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
  payment_method: {
    method: 'bank-transfer' | 'p2p' | 'crypto';
    supplier_id: string;
  };
  
  // –®–∞–≥ V: –†–µ–∫–≤–∏–∑–∏—Ç—ã
  requisites: {
    type: 'bank' | 'p2p' | 'crypto';
    bankName?: string;
    accountNumber?: string;
    swift?: string;
    card_number?: string;
    card_holder?: string;
    crypto_network?: string;
    crypto_address?: string;
  };
  
  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ-–∏—Å—Ç–æ—á–Ω–∏–∫–µ
  project_info: {
    project_name: string;
    project_date: string;
    amount: number;
    currency: string;
    status: string;
  };
}
```

### **üéØ –û—Ç–ª–∏—á–∏—è –æ—Ç —ç—Ö–æ –∫–∞—Ä—Ç–æ—á–µ–∫:**
| –ê—Å–ø–µ–∫—Ç | üé≠ –≠—Ö–æ –î–∞–Ω–Ω—ã–µ (–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä) | üîÆ –≠—Ö–æ –ö–∞—Ä—Ç–æ—á–∫–∏ (–ö–∞—Ç–∞–ª–æ–≥) |
|--------|----------------------------|---------------------------|
| **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ** | –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤ 4-5 | –ò–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥ |
| **–ú–µ—Å—Ç–æ** | –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤ | –ö–∞—Ç–∞–ª–æ–≥ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ |
| **–¢—Ä–∏–≥–≥–µ—Ä** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ | –†—É—á–Ω–æ–π –∫–ª–∏–∫ |
| **–†–µ–∑—É–ª—å—Ç–∞—Ç** | –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏ | –ü–æ—Å—Ç–∞–≤—â–∏–∫ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ |
| **–î–∞–Ω–Ω—ã–µ** | –¢–æ–ª—å–∫–æ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã | –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ |

---

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø**

### **1. –û—Å–Ω–æ–≤–Ω—ã–µ —Ö—É–∫–∏**
```typescript
// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
const useAtomicDealConstructor = () => {
  const [stepConfigs, setStepConfigs] = useState<Record<number, string>>({});
  const [manualData, setManualData] = useState<Record<number, any>>({});
  const [uploadedFiles, setUploadedFiles] = useState<Record<number, string>>({});
  
  const handleSourceSelect = (stepId: number, source: string) => {
    setStepConfigs(prev => ({ ...prev, [stepId]: source }));
  };
  
  const handleManualDataSave = (stepId: number, data: any) => {
    setManualData(prev => ({ ...prev, [stepId]: data }));
  };
  
  const handleFileUpload = async (stepId: number, file: File) => {
    const url = await uploadFileToStorage(stepId, file);
    setUploadedFiles(prev => ({ ...prev, [stepId]: url }));
  };
  
  return {
    stepConfigs,
    manualData,
    uploadedFiles,
    handleSourceSelect,
    handleManualDataSave,
    handleFileUpload
  };
};
```

### **2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase**
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ –∞—Ç–æ–º–∞—Ä–Ω–æ–π —Å–¥–µ–ª–∫–∏
const createProjectFromAtomicDeal = async (atomicDealData: any) => {
  // 1. –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–µ–∫—Ç
  const { data: project } = await supabase
    .from('projects')
    .insert([{
      user_id: userId,
      name: atomicDealData.projectName,
      status: 'draft',
      current_step: 1,
      company_data: atomicDealData.step1Data,
      payment_method: atomicDealData.step4Data?.method
    }])
    .select('id')
    .single();
  
  // 2. –°–æ–∑–¥–∞–µ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
  if (atomicDealData.step2Data?.items) {
    await supabase
      .from('project_specifications')
      .insert([{
        project_id: project.id,
        role: 'client',
        items: atomicDealData.step2Data.items
      }]);
  }
  
  // 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
  if (atomicDealData.step5Data) {
    await supabase
      .from('project_requisites')
      .insert([{
        project_id: project.id,
        user_id: userId,
        type: atomicDealData.step4Data?.method,
        data: atomicDealData.step5Data
      }]);
  }
  
  return project.id;
};
```

### **3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤**
```typescript
// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
const uploadFileToStorage = async (stepId: number, file: File) => {
  const bucketMap = {
    1: 'step-a1-ready-company',
    2: 'project-files',
    3: 'step3-supplier-receipts',
    4: 'project-files',
    5: 'project-files',
    6: 'step6-client-receipts',
    7: 'step7-client-confirmations'
  };
  
  const bucket = bucketMap[stepId];
  const fileName = `${stepId}/${projectId}/${Date.now()}_${file.name}`;
  
  const { data, error } = await supabase.storage
    .from(bucket)
    .upload(fileName, file);
  
  if (error) throw error;
  
  const { data: urlData } = supabase.storage
    .from(bucket)
    .getPublicUrl(fileName);
  
  return urlData.publicUrl;
};
```

---

## üéØ **–ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò**

### **–§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω–∏–µ 7 –∫—É–±–∏–∫–æ–≤-—à–∞–≥–æ–≤
- [x] –õ–æ–≥–∏–∫–∞ hover –∏ –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- [x] –ë–∞–∑–æ–≤—ã–µ —Ñ–æ—Ä–º—ã –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

### **–§–∞–∑–∞ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏** üîÑ
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–æ—Ñ–∏–ª—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞—Ç–∞–ª–æ–≥—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- [x] –†–∞–±–æ—Ç–∞ —Å —ç—Ö–æ –¥–∞–Ω–Ω—ã–º–∏ ‚úÖ

### **–§–∞–∑–∞ 3: –°–∏—Å—Ç–µ–º–∞ —Ñ–∞–π–ª–æ–≤** üîÑ
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–æ–º–ø–∞–Ω–∏–π
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –∏–∑ Excel/CSV
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–æ–≤

### **–§–∞–∑–∞ 4: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤** üîÑ
- [ ] –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Supabase
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º—É 7-—à–∞–≥–æ–≤–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É

### **–§–∞–∑–∞ 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è UX** üîÑ
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

---

## üìã **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø**

### **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```json
{
  "framer-motion": "^10.16.4",
  "lucide-react": "^0.263.1",
  "@radix-ui/react-dialog": "^1.0.4",
  "@radix-ui/react-select": "^1.2.2",
  "@radix-ui/react-label": "^2.0.2"
}
```

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:**
```
app/dashboard/project-constructor/
‚îú‚îÄ‚îÄ page.tsx                    # –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ AtomicDealCube.tsx      # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫—É–±–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ SourceSelector.tsx      # –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ ManualForms/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CompanyForm.tsx     # –§–æ—Ä–º–∞ –∫–æ–º–ø–∞–Ω–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SpecificationForm.tsx # –§–æ—Ä–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentMethodForm.tsx # –§–æ—Ä–º–∞ –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RequisitesForm.tsx  # –§–æ—Ä–º–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ FileUploader.tsx        # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useAtomicDealConstructor.ts # –û—Å–Ω–æ–≤–Ω–æ–π —Ö—É–∫
‚îÇ   ‚îú‚îÄ‚îÄ useFileUpload.ts        # –•—É–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ useProjectCreation.ts   # –•—É–∫ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ fileParsers.ts          # –ü–∞—Ä—Å–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
    ‚îú‚îÄ‚îÄ dataMappers.ts          # –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
    ‚îî‚îÄ‚îÄ validators.ts           # –í–∞–ª–∏–¥–∞—Ü–∏—è
```

---

## üöÄ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **–º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π:

‚úÖ **–£–ø—Ä–æ—â–∞–µ—Ç** –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç** –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç** –∑–∞–≥—Ä—É–∑–∫—É –≥–æ—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è** –¥–ª—è –±—É–¥—É—â–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π  

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö —Ñ–æ—Ä–º –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤. 