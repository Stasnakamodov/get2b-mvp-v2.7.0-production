# üõ°Ô∏è –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ö–ê–¢–ê–õ–û–ì–ê –° 7-–®–ê–ì–û–í–´–ú–ò –¢–ê–ë–õ–ò–¶–ê–ú–ò

**–î–∞—Ç–∞:** 29 –¥–µ–∫–∞–±—Ä—è 2024  
**–¶–µ–ª—å:** –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —É–º–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ 7-—à–∞–≥–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

---

## üéØ **–ü–†–ò–ù–¶–ò–ü–´ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò**

### ‚úÖ **–ß–¢–û –ó–ê–©–ò–©–ê–ï–ú**
- **–ù–ï –¢–†–û–ì–ê–ï–ú** —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü
- **–ù–ï –ò–ó–ú–ï–ù–Ø–ï–ú** –ª–æ–≥–∏–∫—É 7-—à–∞–≥–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞  
- **–¢–û–õ–¨–ö–û –ß–ò–¢–ê–ï–ú** –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ VIEW –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨** —á–µ—Ä–µ–∑ RLS –∏ SECURITY DEFINER

### üîÑ **–ö–ê–ö –ò–ù–¢–ï–ì–†–ò–†–£–ï–ú**
- **–°–∏–Ω—è—è –∫–æ–º–Ω–∞—Ç–∞** (catalog_user_suppliers) –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –æ–ø—ã—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–û—Ä–∞–Ω–∂–µ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞** (catalog_verified_suppliers) —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏
- **7-—à–∞–≥–æ–≤–∞—è –ª–∏–Ω–∏—è** –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–Ω–æ–π

---

## üìä **–°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –¢–ê–ë–õ–ò–¶–´ - –ó–ê–©–ò–©–ï–ù–ù–´–ï**

### üèóÔ∏è **1. –û–°–ù–û–í–ù–´–ï –¢–ê–ë–õ–ò–¶–´ –ü–†–û–ï–ö–¢–û–í**

#### üìã `projects` - –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: catalog_projects_analysis VIEW
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: company_data, —Å—Ç–∞—Ç—É—Å—ã, —Å—É–º–º—ã, –¥–∞—Ç—ã
```

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ–º:**
- üè¢ –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–π –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏–∑ `company_data` JSONB
- üí∞ –°—É–º–º—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ (`amount`, `currency`)
- üìä –°—Ç–∞—Ç—É—Å—ã (`status`) –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- üìÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ (`created_at`, `updated_at`)
- üéØ –¢–µ–∫—É—â–∏–π —à–∞–≥ (`current_step`) –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### üìÑ `project_specifications` - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú  
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: catalog_specifications_analysis VIEW
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: —Ç–æ–≤–∞—Ä—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, —Ü–µ–Ω—ã
```

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ–º:**
- üì¶ –¢–æ–≤–∞—Ä—ã –∏ –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏–∑ `items` JSONB
- üî¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ (`quantity`)
- üíµ –¶–µ–Ω—ã (`pricePerUnit`, `totalPrice`)
- üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–æ–≤–∞—Ä–∞–º

#### üìä `project_status_history` - –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å JOIN
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç—Ç–∞–ø–æ–≤
```

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ–º:**
- ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤
- üìà –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
- üéØ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö
- üìä –ê–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –≤—Ä–µ–º–µ–Ω–∏

### üìö **2. –ó–ê–ü–ò–°–ù–ê–Ø –ö–ù–ò–ñ–ö–ê 5-–ì–û –®–ê–ì–ê**

#### üè¶ `bank_accounts` - –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å—á–µ—Ç–∞
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –±–∞–Ω–∫–∞–º, —Å—Ç—Ä–∞–Ω–∞–º
```

#### üí≥ `supplier_cards` - –ö–∞—Ä—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤  
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è P2P –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ P2P –ø–ª–∞—Ç–µ–∂–∞–º
```

#### üí∞ `crypto_wallets` - –ö—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–∏
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∫—Ä–∏–ø—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏  
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º
```

### üë• **3. –ü–†–û–§–ò–õ–ò –ö–û–ú–ü–ê–ù–ò–ô**

#### üè¢ `client_profiles` - –ü—Ä–æ—Ñ–∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: JOIN –¥–ª—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö
```

#### üè≠ `supplier_profiles` - –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú  
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: JOIN –¥–ª—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞—Ö
```

### üìä **4. –°–ò–°–¢–ï–ú–ù–´–ï –¢–ê–ë–õ–ò–¶–´**

#### üìù `templates` - –û–±—â–∏–µ —à–∞–±–ª–æ–Ω—ã
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –∞–Ω–∞–ª–∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤
```

#### üìã `project_templates` - –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–æ–≤
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –∞–Ω–∞–ª–∏–∑ —Å–≤—è–∑–µ–π –ø—Ä–æ–µ–∫—Ç-—à–∞–±–ª–æ–Ω
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–æ–≤
```

#### üè¢ `companies` - –ö–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

#### üßæ `project_invoices` - –ò–Ω–≤–æ–π—Å—ã –ø—Ä–æ–µ–∫—Ç–æ–≤
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
```

#### üìÑ `project_requisites` - –†–µ–∫–≤–∏–∑–∏—Ç—ã –ø—Ä–æ–µ–∫—Ç–æ–≤
```sql
-- ‚úÖ –ó–ê–©–ò–©–ï–ù–ê - –ù–ï –¢–†–û–ì–ê–ï–ú
-- –ß–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑: –∞–Ω–∞–ª–∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã
-- –ò–∑–≤–ª–µ–∫–∞–µ–º: –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º
```

---

## üîç **–°–û–ó–î–ê–ù–ù–´–ï VIEW –î–õ–Ø –ë–ï–ó–û–ü–ê–°–ù–û–ì–û –ß–¢–ï–ù–ò–Ø**

### üìä `catalog_projects_analysis`
```sql
-- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π
-- –ü–æ–ª—è: project_id, user_id, company_name, status, amount, etc.
-- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –Ω–∞—Å–ª–µ–¥—É–µ—Ç RLS –æ—Ç projects
```

### üì¶ `catalog_specifications_analysis`  
```sql
-- –ê–Ω–∞–ª–∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π —Å –ø–æ–¥—Å—á–µ—Ç–æ–º —Ç–æ–≤–∞—Ä–æ–≤
-- –ü–æ–ª—è: specification_id, project_id, items, items_count, etc.
-- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –Ω–∞—Å–ª–µ–¥—É–µ—Ç RLS –æ—Ç project_specifications
```

---

## üõ†Ô∏è **–§–£–ù–ö–¶–ò–ò –ò–ó–í–õ–ï–ß–ï–ù–ò–Ø –î–ê–ù–ù–´–•**

### üìà `extract_supplier_insights_from_projects(user_id)`
**–ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤:**
- üè¢ –ò–º–µ–Ω–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ (–æ–±—â–µ–µ, —É—Å–ø–µ—à–Ω—ã–µ, –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ)
- üí∞ –°—É–º–º—ã (–æ–±—â–∞—è, —Å—Ä–µ–¥–Ω—è—è)
- üìÖ –î–∞—Ç—ã (–ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç, –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–µ–∫—Ç)

### üì¶ `extract_products_from_project_specs(user_id)`
**–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Ç–æ–≤–∞—Ä–æ–≤:**
- üì¶ –ù–∞–∑–≤–∞–Ω–∏—è –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- üî¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–æ–±—â–µ–µ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è)
- üíµ –¶–µ–Ω—ã (—Å—Ä–µ–¥–Ω—è—è –∑–∞ –µ–¥–∏–Ω–∏—Ü—É, –æ–±—â–∞—è –ø–æ—Ç—Ä–∞—á–µ–Ω–æ)
- üìà –ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞

### üöÄ `sync_catalog_with_7step_data(user_id)`
**–ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
- üîÑ –û–±–Ω–æ–≤–ª—è–µ—Ç catalog_user_suppliers —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏–∑ –ø—Ä–æ–µ–∫—Ç–æ–≤
- üìä –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚ö° –ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
- üìà –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## üîÑ **–ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´ –ö–ê–¢–ê–õ–û–ì–ê**

### üü¶ **–°–ò–ù–Ø–Ø –ö–û–ú–ù–ê–¢–ê (catalog_user_suppliers)**

#### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞:**
```sql
-- –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ company_data
2. –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ catalog_user_suppliers
3. –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
4. –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
```

#### **–ü–æ–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
- `total_projects` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–µ–∫—Ç–æ–≤
- `successful_projects` - —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ
- `cancelled_projects` - –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ
- `total_spent` - –æ–±—â–∞—è –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–∞—è —Å—É–º–º–∞
- `last_project_date` - –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### üü† **–û–†–ê–ù–ñ–ï–í–ê–Ø –ö–û–ú–ù–ê–¢–ê (catalog_verified_suppliers)**

#### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏:**
- üë®‚Äçüíº –¢–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å –∞–∫–∫—Ä–µ–¥–∏—Ç–∞—Ü–∏–∏ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- üìä –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (—Ä–µ–π—Ç–∏–Ω–≥, –æ—Ç–∑—ã–≤—ã)
- üéØ –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üîó **–°–í–Ø–ó–¨ –ú–ï–ñ–î–£ –ö–û–ú–ù–ê–¢–ê–ú–ò**

#### **–ò–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤:**
```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –æ—Ä–∞–Ω–∂–µ–≤–æ–π –≤ —Å–∏–Ω—é—é:
SELECT import_supplier_to_user(user_id, verified_supplier_id);

-- –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ:
1. –ö–æ–ø–∏—Ä—É—é—Ç—Å—è –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è source_type = 'imported_from_catalog'  
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª –≤ source_supplier_id
4. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```

---

## üõ°Ô∏è **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ó–ê–©–ò–¢–ê**

### üîí **RLS –ü–æ–ª–∏—Ç–∏–∫–∏**
```sql
-- –í—Å–µ VIEW –Ω–∞—Å–ª–µ–¥—É—é—Ç RLS –æ—Ç –±–∞–∑–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
-- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∏–º–µ—é—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞
```

### üõ°Ô∏è **SECURITY DEFINER**
```sql
-- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å –ø—Ä–∞–≤–∞–º–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞
-- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
-- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä—è–º—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
```

### ‚ö†Ô∏è **–ü—Ä–∏–Ω—Ü–∏–ø—ã –∑–∞—â–∏—Ç—ã:**
1. **–ù–ï –¢–†–û–ì–ê–ï–ú** —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü
2. **–¢–û–õ–¨–ö–û –ß–ò–¢–ê–ï–ú** —á–µ—Ä–µ–∑ VIEW –∏ —Ñ—É–Ω–∫—Ü–∏–∏
3. **–ë–ï–ó–û–ü–ê–°–ù–´–ï –§–£–ù–ö–¶–ò–ò** —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
4. **–õ–û–ì–ò–†–û–í–ê–ù–ò–ï** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## üöÄ **–ü–õ–ê–ù –í–ù–ï–î–†–ï–ù–ò–Ø**

### **–≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—â–∏—Ç–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä**
```sql
-- 1. –í—ã–ø–æ–ª–Ω–∏—Ç—å catalog-protection-and-extraction.sql
-- 2. –°–æ–∑–¥–∞—Ç—å VIEW –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è
-- 3. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
```

### **–≠—Ç–∞–ø 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è**
```sql
-- 1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
-- 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ RLS
-- 3. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤–ª–∏—è–Ω–∏—è –Ω–∞ 7-—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
```

### **–≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI**
```sql
-- 1. –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞
-- 2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º UI
-- 3. –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
```

### **–≠—Ç–∞–ø 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
```sql
-- 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
-- 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
-- 3. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
```

---

## üìä **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

### ‚úÖ **–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- üéØ –£–º–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
- üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º –∏ —Ç–æ–≤–∞—Ä–∞–º
- ‚ö° –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- üí° –ò–Ω—Å–∞–π—Ç—ã –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

### ‚úÖ **–î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤:**
- üìà –ü–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
- üìä –ú–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–∞—Ç–∞–ª–æ–≥–∞
- üîç –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

### ‚úÖ **–î–ª—è —Å–∏—Å—Ç–µ–º—ã:**
- üõ°Ô∏è –ü–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ö° –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- üìä –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## üéØ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

–°–æ–∑–¥–∞–Ω–∞ **–ë–ï–ó–û–ü–ê–°–ù–ê–Ø** –∏ **–≠–§–§–ï–ö–¢–ò–í–ù–ê–Ø** —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ —Å 7-—à–∞–≥–æ–≤—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏:

- üõ°Ô∏è **–ó–∞—â–∏—â–µ–Ω—ã** –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- üìä **–ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è** —Ü–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏  
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –æ–ø—ã—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üöÄ **–ì–æ—Ç–æ–≤–æ** –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –±–µ–∑ —Ä–∏—Å–∫–æ–≤ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã

**–ö–∞—Ç–∞–ª–æ–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è "–≥—É–±–∫–æ–π"** –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –æ–ø—ã—Ç –∏ –æ—Ç–¥–∞–µ—Ç —Ü–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é! üß†‚ú® 