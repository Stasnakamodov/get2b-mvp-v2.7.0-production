# üèóÔ∏è PROJECT CONSTRUCTOR - –ê—Ç–æ–º–∞—Ä–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–¥–µ–ª–æ–∫

**–î–∞—Ç–∞:** 7 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è:** 2.0 (–ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 3,574 (–±—ã–ª–æ 4,295)

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–¢—Ä–∏ —ç—Ç–∞–ø–∞ (Stages)](#—Ç—Ä–∏-—ç—Ç–∞–ø–∞-stages)
3. [–°–µ–º—å —à–∞–≥–æ–≤ (Steps)](#—Å–µ–º—å-—à–∞–≥–æ–≤-steps)
4. [–°–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è](#—Å–∏—Å—Ç–µ–º—ã-–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è)
5. [State Management](#state-management)
6. [User Flow](#user-flow)
7. [–û–±–ª–∞—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Block 2)](#–æ–±–ª–∞—Å—Ç—å-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-block-2)
8. [Handlers](#handlers)
9. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
10. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–∑–∞–º–µ—Ç–∫–∏)

---

## üéØ –û–ë–ó–û–† –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è
**Project Constructor** - —ç—Ç–æ –∞—Ç–æ–º–∞—Ä–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–¥–µ–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å 7 —à–∞–≥–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ (–≤—ã–±—Ä–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö)
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
3. –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–¥–µ–ª–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
app/dashboard/project-constructor/
‚îú‚îÄ‚îÄ page.tsx                    # 3,574 —Å—Ç—Ä–æ–∫–∏ - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–Ω–æ–ª–∏—Ç
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ StepCubes.tsx          # –ö—É–±–∏–∫–∏ 7 —à–∞–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ SummaryBlock.tsx       # –ë–ª–æ–∫ —Å–≤–æ–¥–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ AutoFillNotification.tsx
‚îÇ   ‚îú‚îÄ‚îÄ modals/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ModalManager.tsx   # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–¥–∞–ª–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ stages/
‚îÇ       ‚îú‚îÄ‚îÄ StageRouter.tsx    # –†–æ—É—Ç–µ—Ä —ç—Ç–∞–ø–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ Stage1Container.tsx
‚îÇ       ‚îú‚îÄ‚îÄ Stage2Container.tsx
‚îÇ       ‚îî‚îÄ‚îÄ Stage3Container.tsx
‚îú‚îÄ‚îÄ forms/                      # –§–æ—Ä–º—ã –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ CompanyForm.tsx
‚îÇ   ‚îú‚îÄ‚îÄ SpecificationForm.tsx
‚îÇ   ‚îú‚îÄ‚îÄ BankForm.tsx
‚îÇ   ‚îú‚îÄ‚îÄ PaymentMethodForm.tsx
‚îÇ   ‚îî‚îÄ‚îÄ RequisitesForm.tsx
‚îî‚îÄ‚îÄ README.md                   # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üé¨ –¢–†–ò –≠–¢–ê–ü–ê (STAGES)

### Stage 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
**–°—Ç—Ä–æ–∫–∏:** 2001-3400 (–æ–±–ª–∞—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** `currentStage = 1`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç 7 —à–∞–≥–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
- –ù–∞–≤–æ–¥–∏—Ç –∫—É—Ä—Å–æ—Ä –Ω–∞ –∫—É–±–∏–∫–∏ ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—ã/OCR/–∫–∞—Ç–∞–ª–æ–≥/—à–∞–±–ª–æ–Ω—ã
- –ö–æ–≥–¥–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —à–∞–≥–∏ 1, 2, 4, 5 ‚Üí –ø–æ—è–≤–ª—è—é—Ç—Å—è –º–æ–¥–∞–ª–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏:** 1, 2, 4, 5

### Stage 2: –ú–æ–¥–µ—Ä–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** Stage2Container
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** `currentStage = 2`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –º–µ–Ω–µ–¥–∂–µ—Ä—É (`projectRequestId` —Å–æ–∑–¥–∞–Ω)
- Polling –∫–∞–∂–¥—ã–µ 4 —Å–µ–∫—É–Ω–¥—ã:
  - `useManagerPolling()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `managerApprovalStatus`
  - `useReceiptPolling()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `receiptApprovalStatus`
- –ú–µ–Ω–µ–¥–∂–µ—Ä –æ–¥–æ–±—Ä—è–µ—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–∫ –Ω–∞ –æ–ø–ª–∞—Ç—É
- –ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–≤–æ–π —á–µ–∫ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Stage 3

### Stage 3: –ú–æ–Ω–∏—Ç–æ—Ä —Å–¥–µ–ª–∫–∏
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** Stage3Container
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** `currentStage = 3`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏ (`dealAnimationStep: 0-3`)
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —ç—Ç–∞–ø—ã:
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
  - –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
  - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏

---

## üì¶ –°–ï–ú–¨ –®–ê–ì–û–í (STEPS)

### –®–∞–≥ I: –î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞
**–¢–∏–ø:** `CompanyDataSchema`
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** profile, template, manual, upload
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** ‚úÖ

**–î–∞–Ω–Ω—ã–µ:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
- –ò–ù–ù
- –ê–¥—Ä–µ—Å
- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ
- Email, —Ç–µ–ª–µ—Ñ–æ–Ω
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

### –®–∞–≥ II: –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
**–¢–∏–ø:** `SpecificationDataSchema`
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** template, catalog, manual, upload
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** ‚úÖ

**–î–∞–Ω–Ω—ã–µ:**
- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (items)
- –ù–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –ü–æ—Å—Ç–∞–≤—â–∏–∫
- –í–∞–ª—é—Ç–∞

### –®–∞–≥ III: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
**–¢–∏–ø:** `FileUploadDataSchema`
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** manual (upload)
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** ‚ùå

**–î–∞–Ω–Ω—ã–µ:**
- –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞ –æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏
- –°—Ç–∞—Ç—É—Å: pending/approved/rejected

### –®–∞–≥ IV: –ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã
**–¢–∏–ø:** `PaymentMethodsDataSchema`
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** profile, template, catalog, manual
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** ‚úÖ

**–î–∞–Ω–Ω—ã–µ:**
- –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞: bank-transfer / p2p / crypto
- –î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (–µ—Å–ª–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞)
- –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ —Ä—É—á–Ω–æ–µ

### –®–∞–≥ V: –†–µ–∫–≤–∏–∑–∏—Ç—ã
**–¢–∏–ø:** `RequisitesDataSchema`
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** profile, template, catalog, manual
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** ‚úÖ

**–î–∞–Ω–Ω—ã–µ:**
- –¢–∏–ø: bank / p2p / crypto / multiple
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏–ª–∏ –∫–∞—Ä—Ç–∞ –∏–ª–∏ –∫–æ—à–µ–ª—ë–∫
- –î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

### –®–∞–≥ VI: –ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ–∫–∞
**–¢–∏–ø:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** automatic
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** ‚ùå

**–î–∞–Ω–Ω—ã–µ:**
- URL —á–µ–∫–∞ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- –°—Ç–∞—Ç—É—Å –ø–æ–ª—É—á–µ–Ω–∏—è

### –®–∞–≥ VII: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
**–¢–∏–ø:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** automatic (upload)
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** ‚ùå (–Ω–∞ Stage 2)

**–î–∞–Ω–Ω—ã–µ:**
- –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã

---

## üîÑ –°–ò–°–¢–ï–ú–´ –ê–í–¢–û–ó–ê–ü–û–õ–ù–ï–ù–ò–Ø

### 1. PROFILE (–ü—Ä–æ—Ñ–∏–ª—å –∫–ª–∏–µ–Ω—Ç–∞)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `stepConfigs[1] = 'profile'`
**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:** –®–∞–≥ 1
**–§—É–Ω–∫—Ü–∏—è:** `applyClientProfile()` ‚Üí —Å—Ç—Ä–æ–∫–∞ 720

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. Hover –Ω–∞ —à–∞–≥ 1 ‚Üí –≤—ã–±—Ä–∞—Ç—å "–ü—Ä–æ—Ñ–∏–ª—å"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ `profileSelector` —Å–æ —Å–ø–∏—Å–∫–æ–º –ø—Ä–æ—Ñ–∏–ª–µ–π
3. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å ‚Üí `setManualData(1, profileData)`
4. –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —à–∞–≥—É 1

**–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, –ò–ù–ù, –∞–¥—Ä–µ—Å
- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ, email, —Ç–µ–ª–µ—Ñ–æ–Ω
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞, —Å—á–µ—Ç, –ë–ò–ö)

---

### 2. TEMPLATE (–®–∞–±–ª–æ–Ω –ø—Ä–æ–µ–∫—Ç–∞)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `stepConfigs[X] = 'template'`
**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:** –®–∞–≥–∏ 1, 2
**–•—É–∫:** `useTemplateSystem()`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. Hover –Ω–∞ —à–∞–≥ ‚Üí –≤—ã–±—Ä–∞—Ç—å "–®–∞–±–ª–æ–Ω"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `templateSelection` —Å —Å–µ—Ç–∫–æ–π —à–∞–±–ª–æ–Ω–æ–≤
3. –í—ã–±—Ä–∞—Ç—å —à–∞–±–ª–æ–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `templateStepSelection`
4. –í—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ –∏–ª–∏ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ"
5. –î–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —à–∞–≥–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –®–∞–±–ª–æ–Ω –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —à–∞–≥–æ–≤ 1 –∏ 2
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞–∫–∏–µ —à–∞–≥–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —à–∞–≥–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞"

---

### 3. UPLOAD (OCR –∑–∞–≥—Ä—É–∑–∫–∞)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `selectedSource = 'upload'`
**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:** –®–∞–≥–∏ 1, 2, 7
**–•—É–∫:** `useOcrUpload()`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. Hover –Ω–∞ —à–∞–≥ ‚Üí –≤—ã–±—Ä–∞—Ç—å "–ó–∞–≥—Ä—É–∑–∏—Ç—å (Yandex Vision OCR)"
2. Drag & Drop –∑–æ–Ω–∞ –∏–ª–∏ –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
3. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: PDF, JPG, PNG, XLSX, DOCX
4. Yandex Vision OCR —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–µ–∫—Å—Ç
5. –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã

**–ß—Ç–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç:**
- **–®–∞–≥ 1:** –í–∏–∑–∏—Ç–∫–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, –∫–æ–Ω—Ç–∞–∫—Ç—ã, email)
- **–®–∞–≥ 2:** –ò–Ω–≤–æ–π—Å (—Ç–æ–≤–∞—Ä—ã, —Ü–µ–Ω—ã, –ø–æ—Å—Ç–∞–≤—â–∏–∫)
- **–®–∞–≥ 2 ‚Üí 4, 5:** –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏–∑ –∏–Ω–≤–æ–π—Å–∞

---

### 4. OCR_SUGGESTION (–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç OCR)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `stepConfigs[4] = 'ocr_suggestion'`, `stepConfigs[5] = 'ocr_suggestion'`
**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:** –®–∞–≥–∏ 4, 5
**–§—É–Ω–∫—Ü–∏—è:** `suggestPaymentMethodAndRequisites()` ‚Üí —Å—Ç—Ä–æ–∫–∞ 1111

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ—Å–ª–µ OCR –∏–Ω–≤–æ–π—Å–∞ (—à–∞–≥ 2) —Å–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `suggestPaymentMethodAndRequisites()`
3. **–®–∞–≥ 4:** –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç "–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥" (`method: 'bank-transfer'`)
4. **–®–∞–≥ 5:** –ó–∞–ø–æ–ª–Ω—è–µ—Ç –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (`type: 'bank'`)
5. –ü–æ–ª—è –ø–æ–º–µ—á–∞—é—Ç—Å—è `suggested: true`, `source: 'ocr_invoice'`

**–î–∞–Ω–Ω—ã–µ:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞
- –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞
- SWIFT
- –ü–æ–ª—É—á–∞—Ç–µ–ª—å
- –ê–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- –í–∞–ª—é—Ç–∞

---

### 5. CATALOG (–ö–æ—Ä–∑–∏–Ω–∞ –∫–∞—Ç–∞–ª–æ–≥–∞)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `stepConfigs[2] = 'catalog'`, `stepConfigs[4] = 'catalog'`, `stepConfigs[5] = 'catalog'`
**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:** –®–∞–≥–∏ 2, 4, 5
**–§—É–Ω–∫—Ü–∏—è:** `handleCatalogProductsAdd()` ‚Üí —Å—Ç—Ä–æ–∫–∞ 1268
**–ú–æ–¥–∞–ª–∫–∞:** `CatalogModal`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. Hover –Ω–∞ —à–∞–≥ 2 ‚Üí –≤—ã–±—Ä–∞—Ç—å "–ö–∞—Ç–∞–ª–æ–≥"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `CatalogModal` (—Ä–µ–∂–∏–º `category-first`)
3. –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Üí —Ç–æ–≤–∞—Ä—ã ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
4. **–ü—Ä–∞–≤–∏–ª–æ:** –ö–æ—Ä–∑–∏–Ω–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –¢–û–õ–¨–ö–û –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
5. –ù–∞–∂–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" ‚Üí —Ç–æ–≤–∞—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —à–∞–≥ 2
6. –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ `verified-suppliers`
7. **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ:**
   - **–®–∞–≥ 4:** –ú–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (`payment_methods`)
   - **–®–∞–≥ 5:** –†–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (`bank_accounts`, `p2p_cards`, `crypto_wallets`)

**–†–µ–∂–∏–º—ã CatalogModal:**
- `catalogMode: 'category-first'` - —Ç–æ–≤–∞—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- `catalogMode: 'supplier-first'` - –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ (Blue/Orange Room)

---

### 6. BLUE_ROOM (–õ–∏—á–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `stepConfigs[2] = 'blue_room'`, `stepConfigs[4] = 'blue_room'`, `stepConfigs[5] = 'blue_room'`
**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:** –®–∞–≥–∏ 2, 4, 5 (–≤—Å–µ —Å—Ä–∞–∑—É)
**–§—É–Ω–∫—Ü–∏—è:** `handleSelectBlueRoomSupplier()` ‚Üí —Å—Ç—Ä–æ–∫–∞ 1571
**–ú–æ–¥–∞–ª–∫–∞:** ModalManager ‚Üí `blueRoomSupplier`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ —Å –ª–∏—á–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∏–∑ `catalog_user_suppliers`
3. –í—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Üí –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ 3 —à–∞–≥–æ–≤:
   - **–®–∞–≥ 2:** –í–°–ï —Ç–æ–≤–∞—Ä—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (`catalog_user_products`)
   - **–®–∞–≥ 4:** –í–°–ï –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã
   - **–®–∞–≥ 5:** –í–°–ï —Ä–µ–∫–≤–∏–∑–∏—Ç—ã

**–û—Ç–ª–∏—á–∏–µ –æ—Ç Catalog:**
- Catalog: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É
- Blue Room: –±–µ—Ä—É—Ç—Å—è –í–°–ï —Ç–æ–≤–∞—Ä—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å—Ä–∞–∑—É

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞: `catalog_user_suppliers`
- –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å: –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (`user_id`)

---

### 7. ORANGE_ROOM (–ê–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `stepConfigs[2] = 'orange_room'`, `stepConfigs[4] = 'orange_room'`, `stepConfigs[5] = 'orange_room'`
**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:** –®–∞–≥–∏ 2, 4, 5 (–≤—Å–µ —Å—Ä–∞–∑—É)
**–§—É–Ω–∫—Ü–∏—è:** `handleSelectOrangeRoomSupplier()` ‚Üí —Å—Ç—Ä–æ–∫–∞ 1705
**–ú–æ–¥–∞–ª–∫–∞:** ModalManager ‚Üí `orangeRoomSupplier`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ —Å –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ Get2B
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∏–∑ `catalog_verified_suppliers`
3. –í—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Üí –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ 3 —à–∞–≥–æ–≤:
   - **–®–∞–≥ 2:** –í–°–ï —Ç–æ–≤–∞—Ä—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (`catalog_verified_products`)
   - **–®–∞–≥ 4:** –í–°–ï –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã
   - **–®–∞–≥ 5:** –í–°–ï —Ä–µ–∫–≤–∏–∑–∏—Ç—ã

**–û—Ç–ª–∏—á–∏–µ –æ—Ç Blue Room:**
- Orange Room: –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ (–¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- Blue Room: –ª–∏—á–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞: `catalog_verified_suppliers`
- –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å: –≥–ª–æ–±–∞–ª—å–Ω–∞—è (—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏)

---

### 8. MANUAL (–†—É—á–Ω–æ–π –≤–≤–æ–¥)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `stepConfigs[X] = 'manual'`
**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:** –õ—é–±–æ–π —à–∞–≥
**–ü—Ä–æ—Ü–µ—Å—Å:**
1. Hover –Ω–∞ —à–∞–≥ ‚Üí –≤—ã–±—Ä–∞—Ç—å "–í—Ä—É—á–Ω—É—é"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å

**–§–æ—Ä–º—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞:**
- **–®–∞–≥ 1:** `CompanyForm.tsx`, `ContactsForm.tsx`, `BankForm.tsx`
- **–®–∞–≥ 2:** `SpecificationForm.tsx`
- **–®–∞–≥ 3:** `FileUploadForm` (–≤ page.tsx)
- **–®–∞–≥ 4:** `PaymentMethodForm.tsx`
- **–®–∞–≥ 5:** `RequisitesForm.tsx`
- **–®–∞–≥ 7:** File upload (–≤ page.tsx)

---

## üóÑÔ∏è STATE MANAGEMENT

### State Management: 45 —Å–æ—Å—Ç–æ—è–Ω–∏–π
- **30 useState** –Ω–∞–ø—Ä—è–º—É—é –≤ page.tsx
- **15 —Å–æ—Å—Ç–æ—è–Ω–∏–π** –∏–∑ custom hooks (useTemplateSystem, useOcrUpload, useModalHandlers, etc.)
- **–ò—Ç–æ–≥–æ: ~45 —Å–æ—Å—Ç–æ—è–Ω–∏–π** —É–ø—Ä–∞–≤–ª—è—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### –û—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã (30 useState –≤ page.tsx)

#### A. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —à–∞–≥–æ–≤
```typescript
const [stepConfigs, setStepConfigs] = useState<PartialStepConfigs>({})
const [manualData, setManualData] = useState<ManualData>({})
const [hoveredStep, setHoveredStep] = useState<number | null>(null)
const [lastHoveredStep, setLastHoveredStep] = useState<number | null>(null)
const [uploadedFiles, setUploadedFiles] = useState<Record<number, string>>({})
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- `stepConfigs` - –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ ('profile', 'template', 'catalog', 'blue_room', 'orange_room', 'manual', 'upload', 'ocr_suggestion')
- `manualData` - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è)
- `lastHoveredStep` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –æ–±–ª–∞—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### B. –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏ UI
```typescript
const { modals, openModal, closeModal } = useModals()
const [selectedSource, setSelectedSource] = useState<string | null>(null)
const [previewData, setPreviewData] = useState<StepDataToView | null>(null)
const [previewType, setPreviewType] = useState<string>('')
const [editingType, setEditingType] = useState<string>('')
const [currentItemIndex, setCurrentItemIndex] = useState(0)
const [autoFillNotification, setAutoFillNotification] = useState<{...} | null>(null)
```

#### C. –≠—Ç–∞–ø—ã –ø—Ä–æ–µ–∫—Ç–∞
```typescript
const [currentStage, setCurrentStage] = useState<number>(1)
const [dontShowStageTransition, setDontShowStageTransition] = useState<boolean>(false)
const [stageTransitionShown, setStageTransitionShown] = useState<boolean>(false)
```

#### D. –ê–ø—Ä—É–≤–∞–ª—ã –∏ —Å—Ç–∞—Ç—É—Å—ã
```typescript
const [managerApprovalStatus, setManagerApprovalStatus] = useState<'pending' | 'approved' | 'rejected' | null>(null)
const [managerApprovalMessage, setManagerApprovalMessage] = useState<string>('')
const [projectRequestId, setProjectRequestId] = useState<string>('')
const [receiptApprovalStatus, setReceiptApprovalStatus] = useState<'pending' | 'approved' | 'rejected' | 'waiting' | null>(null)
```

#### E. –ö–∞—Ç–∞–ª–æ–≥ –∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏
```typescript
const [showCatalogModal, setShowCatalogModal] = useState<boolean>(false)
const [catalogSourceStep, setCatalogSourceStep] = useState<number | null>(null)
const [blueRoomSuppliers, setBlueRoomSuppliers] = useState<SupplierData[]>([])
const [blueRoomLoading, setBlueRoomLoading] = useState<boolean>(false)
const [orangeRoomSuppliers, setOrangeRoomSuppliers] = useState<SupplierData[]>([])
const [orangeRoomLoading, setOrangeRoomLoading] = useState<boolean>(false)
const [selectedSupplierData, setSelectedSupplierData] = useState<SupplierData | null>(null)
```

#### F. –ü—Ä–æ—Ñ–∏–ª–∏ –∏ —à–∞–±–ª–æ–Ω—ã
```typescript
const { profiles: clientProfiles, loading: clientProfilesLoading } = useClientProfiles(user?.id)
const { profiles: supplierProfiles, loading: supplierProfilesLoading } = useSupplierProfiles(user?.id)
const { templates, loading: templatesLoading, error: templatesError } = useProjectTemplates()
const [selectedProfileId, setSelectedProfileId] = useState<string | null>(null)
const [selectedSupplierProfileId, setSelectedSupplierProfileId] = useState<string | null>(null)
```

#### G. –ê–Ω–∏–º–∞—Ü–∏–∏
```typescript
const [dealAnimationStep, setDealAnimationStep] = useState<number>(0) // 0-3
const [dealAnimationStatus, setDealAnimationStatus] = useState<string>('')
const [dealAnimationComplete, setDealAnimationComplete] = useState<boolean>(false)
const [infrastructureStepperStep, setInfrastructureStepperStep] = useState<number>(0) // 0-2
const [infrastructureStepperStatus, setInfrastructureStepperStatus] = useState<string>('')
```

#### H. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
```typescript
const [clientReceiptFile, setClientReceiptFile] = useState<File | null>(null)
const [clientReceiptUrl, setClientReceiptUrl] = useState<string | null>(null)
const [isUploadingClientReceipt, setIsUploadingClientReceipt] = useState(false)
const [clientReceiptUploadError, setClientReceiptUploadError] = useState<string | null>(null)
const [projectDetailsDialogOpen, setProjectDetailsDialogOpen] = useState(false)
const [projectDetails, setProjectDetails] = useState<ProjectDetails | null>(null)
```

### Custom Hooks (11)
- `useModals()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
- `useClientProfiles()` - –ø—Ä–æ—Ñ–∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- `useSupplierProfiles()` - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- `useProjectTemplates()` - —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–æ–≤
- `useTemplateSystem()` - —Å–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ (—Å–æ–¥–µ—Ä–∂–∏—Ç handleTemplateSelect, handleTemplateStepSelect, handleFillAllTemplateSteps)
- `useOcrUpload()` - OCR –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (—Å–æ–¥–µ—Ä–∂–∏—Ç ocrAnalyzing, ocrError, ocrDebugData states)
- `useCatalogData()` - –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∞
- `useManagerPolling()` - polling —Å—Ç–∞—Ç—É—Å–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (–∫–∞–∂–¥—ã–µ 4 —Å–µ–∫—É–Ω–¥—ã)
- `useReceiptPolling()` - polling —Å—Ç–∞—Ç—É—Å–∞ —á–µ–∫–∞ (–∫–∞–∂–¥—ã–µ 4 —Å–µ–∫—É–Ω–¥—ã)
- `useProjectPolling()` - polling –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø—Ä–æ—Å —á–µ–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É
- `useManagerCommunication()` - –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- `useFileUpload()` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

---

## üëÜ USER FLOW

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—É—Å—Ç–æ–≥–æ —à–∞–≥–∞

**–®–∞–≥ –∑–∞ —à–∞–≥–æ–º:**

1. **HOVER** (–Ω–∞–≤–æ–∂—É –∫—É—Ä—Å–æ—Ä) –Ω–∞ –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –∫—É–±–∏–∫ —à–∞–≥–∞ II
   - `setLastHoveredStep(2)`
   - –ö—É–±–∏–∫ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è —Å–∏–Ω–µ–π —Ä–∞–º–∫–æ–π
   - **–í "–û–±–ª–∞—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" –ø–æ—è–≤–ª—è–µ—Ç—Å—è:**
     - –ó–∞–≥–æ–ª–æ–≤–æ–∫: "II –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤"
     - **–ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:**
       - üë• –ü—Ä–æ—Ñ–∏–ª—å
       - üìÑ –®–∞–±–ª–æ–Ω
       - üõí –ö–∞—Ç–∞–ª–æ–≥
       - ‚ûï –í—Ä—É—á–Ω—É—é
       - üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å (Yandex Vision OCR)

2. **–ö–õ–ò–ö** –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ "–ö–∞—Ç–∞–ª–æ–≥"
   - `handleSourceSelect('catalog')`
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `CatalogModal`
   - –í—ã–±–∏—Ä–∞—é —Ç–æ–≤–∞—Ä—ã ‚Üí –¥–æ–±–∞–≤–ª—è—é –≤ –∫–æ—Ä–∑–∏–Ω—É
   - –ù–∞–∂–∏–º–∞—é "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"

3. **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:**
   - `setManualData(2, specificationData)`
   - `setStepConfigs(2, 'catalog')`
   - –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —à–∞–≥–∏ 4 –∏ 5

4. **–ö—É–±–∏–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º:**
   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞
   - Hover –Ω–∞ –∫—É–±–∏–∫ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **–∫—É–±–∏–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤** –≤ –æ–±–ª–∞—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ —à–∞–≥–∞

**–®–∞–≥ –∑–∞ —à–∞–≥–æ–º:**

1. **HOVER** –Ω–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –∫—É–±–∏–∫ —à–∞–≥–∞ I
   - `setLastHoveredStep(1)`
   - **–í "–û–±–ª–∞—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" –ø–æ—è–≤–ª—è—é—Ç—Å—è 3 –∫—É–±–∏–∫–∞:**
     - üè¢ –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ (—Å–∏–Ω–∏–π)
     - üè¶ –†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç (–∑–µ–ª—ë–Ω—ã–π)
     - üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
   - –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É:
     - ‚ùå –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
     - üëÅÔ∏è –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ

2. **–ö–õ–ò–ö** –Ω–∞ –∫—É–±–∏–∫ "–î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏"
   - `handlePreviewData('company', manualData[1])`
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **–º–æ–¥–∞–ª–∫–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞**
   - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ: –Ω–∞–∑–≤–∞–Ω–∏–µ, –ò–ù–ù, –∞–¥—Ä–µ—Å, –∫–æ–Ω—Ç–∞–∫—Ç—ã

3. **–ö–õ–ò–ö** –Ω–∞ –∫–Ω–æ–ø–∫—É "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –≤ –º–æ–¥–∞–ª–∫–µ
   - –ú–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - –í –æ–±–ª–∞—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **—Ñ–æ—Ä–º–∞ CompanyForm** (–ù–ï –º–æ–¥–∞–ª—å–Ω–æ)
   - –†–µ–¥–∞–∫—Ç–∏—Ä—É—é –¥–∞–Ω–Ω—ã–µ ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—é

---

## üé® –û–ë–õ–ê–°–¢–¨ –ù–ê–°–¢–†–û–ô–ö–ò (BLOCK 2)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Å—Ç—Ä–æ–∫–∏ 2001-3400)

```
–û–±–ª–∞—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ [–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π] (top-right, –µ—Å–ª–∏ lastHoveredStep)
‚îÇ   ‚îú‚îÄ‚îÄ ‚ùå –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ üëÅÔ∏è –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è —à–∞–≥–∞ 2)
‚îÇ
‚îú‚îÄ‚îÄ [–ó–∞–≥–æ–ª–æ–≤–æ–∫ —à–∞–≥–∞] (–µ—Å–ª–∏ lastHoveredStep)
‚îÇ   ‚îú‚îÄ‚îÄ –†–∏–º—Å–∫–∞—è —Ü–∏—Ñ—Ä–∞ (—Å–∏–Ω–∏–π badge)
‚îÇ   ‚îî‚îÄ‚îÄ –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞
‚îÇ
‚îî‚îÄ‚îÄ [–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç]
    ‚îú‚îÄ‚îÄ Template Selection Overlay (–µ—Å–ª–∏ templateSelection)
    ‚îú‚îÄ‚îÄ Template Step Selection (–µ—Å–ª–∏ templateStepSelection)
    ‚îú‚îÄ‚îÄ Manual Form Entry (–µ—Å–ª–∏ selectedSource === "manual")
    ‚îú‚îÄ‚îÄ Upload/OCR Interface (–µ—Å–ª–∏ selectedSource === "upload")
    ‚îú‚îÄ‚îÄ FILLED State (–µ—Å–ª–∏ stepConfigs[lastHoveredStep])
    ‚îÇ   ‚îú‚îÄ‚îÄ –®–∞–≥ 1: 3 –∫—É–±–∏–∫–∞ (company, bank, contacts)
    ‚îÇ   ‚îú‚îÄ‚îÄ –®–∞–≥ 2: –°–ª–∞–π–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ (3 at a time) + summary
    ‚îÇ   ‚îú‚îÄ‚îÄ –®–∞–≥ 4: 3 –∫—É–±–∏–∫–∞ –º–µ—Ç–æ–¥–æ–≤ (bank, p2p, crypto)
    ‚îÇ   ‚îú‚îÄ‚îÄ –®–∞–≥ 5: –ö—É–±–∏–∫–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ (–≤—ã–±–æ—Ä –∏–ª–∏ –ø–æ–∫–∞–∑)
    ‚îÇ   ‚îî‚îÄ‚îÄ –î—Ä—É–≥–∏–µ: Generic card
    ‚îî‚îÄ‚îÄ UNFILLED State (–µ—Å–ª–∏ !stepConfigs[lastHoveredStep])
        ‚îî‚îÄ‚îÄ –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
```

### –ö—É–±–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ (FILLED)

#### –®–∞–≥ 1: –¢—Ä–∏ –∫—É–±–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞
**–°—Ç—Ä–æ–∫–∏:** 2627-2698

**Cube 1: –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏** (2629-2648)
- Border: `border-blue-200`, hover: `border-blue-300`
- Icon: `Building` (blue)
- Label: "–î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏"
- Shows: `manualData[1].name`
- onClick: `handlePreviewData('company', manualData[1])`

**Cube 2: –†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç** (2651-2672)
- Border: `border-green-200`, hover: `border-green-300`
- Icon: `Banknote` (green)
- Label: "–†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç"
- Shows: `manualData[1].bankName`, `manualData[1].bankAccount`
- onClick: `handlePreviewData('bank', manualData[1])`

**Cube 3: –ö–æ–Ω—Ç–∞–∫—Ç—ã** (2675-2696)
- Border: `border-purple-200`, hover: `border-purple-300`
- Icon: `Mail` (purple)
- Label: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ"
- Shows: `manualData[1].email`, `manualData[1].phone`
- onClick: `handlePreviewData('contacts', manualData[1])`

---

#### –®–∞–≥ 2: –°–ª–∞–π–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤
**–°—Ç—Ä–æ–∫–∏:** 2706-2863

**Product Slider** (2710-2826)
- Grid of 3 products at a time (`productsPerView = 3`)
- Navigation: ChevronLeft/ChevronRight buttons
- Each product cube:
  - Border: `border-gray-300`, hover: `border-blue-400`
  - Icon: `Package` (green)
  - Shows: item_name, item_code, price, quantity, total
  - onClick: `handlePreviewData('product', manualData[2])`
- Dot indicators for pagination

**Summary Card** (2829-2860)
- Shows: supplier name, items count, currency
- Border: `border-gray-300`
- Icon: `FileText` (blue)

**Special Button** (2085-2099)
- "–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã" (orange button)
- Only visible for step 2 when filled
- onClick: `handleAddProductsFromCatalog()`

---

#### –®–∞–≥ 4: –¢—Ä–∏ –∫—É–±–∏–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –æ–ø–ª–∞—Ç—ã
**–°—Ç—Ä–æ–∫–∏:** 2866-2989

**Visual States:**
1. **–í–´–ë–†–ê–ù** (`manualData[4].selectedMethod === method`):
   - Crypto: `ring-4 ring-green-400 border-green-500 bg-green-100`
   - P2P: `ring-4 ring-blue-400 border-blue-500 bg-blue-100`
   - Bank: `ring-4 ring-orange-400 border-orange-500 bg-orange-100`
   - Icon: `CheckCircle2` (white)
   - Text: "–í–´–ë–†–ê–ù"

2. **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ** (–µ—Å—Ç—å supplier_data):
   - Crypto: `border-green-300 bg-green-50`
   - P2P: `border-blue-300 bg-blue-50`
   - Bank: `border-orange-300 bg-orange-50`
   - Text: "–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ"

3. **–†—É—á–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ** (–Ω–µ—Ç supplier_data):
   - `border-gray-200 bg-gray-50`
   - Text: "–†—É—á–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ"

**Cube 1: –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥** (bank-transfer)
- Icon: `Banknote` (orange)
- onClick: `handlePaymentMethodSelect('bank-transfer', selectedSupplierData)`

**Cube 2: P2P –ø–µ—Ä–µ–≤–æ–¥** (p2p)
- Icon: `CreditCard` (blue)
- onClick: `handlePaymentMethodSelect('p2p', selectedSupplierData)`

**Cube 3: –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞** (crypto)
- Icon: `Coins` (green)
- onClick: `handlePaymentMethodSelect('crypto', selectedSupplierData)`

---

#### –®–∞–≥ 5: –ö—É–±–∏–∫–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
**–°—Ç—Ä–æ–∫–∏:** 2992-3327

**–î–≤–∞ —Ä–µ–∂–∏–º–∞:**

**A. –í–´–ë–û–† –¢–ò–ü–ê** (–µ—Å–ª–∏ !manualData[5].type)
**–°—Ç—Ä–æ–∫–∏:** 3121-3327

–ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è 3 –∫—É–±–∏–∫–∞ –≤—ã–±–æ—Ä–∞:

**Cube 1: –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥**
- Border: `border-orange-400 bg-orange-100` (if available)
- Icon: `Banknote` (orange)
- Ring: `ring-2 ring-orange-200`
- Shows: bank_accounts count
- onClick: Sets `manualData[5].type = 'bank'`

**Cube 2: P2P –ø–µ—Ä–µ–≤–æ–¥**
- Border: `border-blue-400 bg-blue-100` (if available)
- Icon: `CreditCard` (blue)
- Ring: `ring-2 ring-blue-200`
- Shows: p2p_cards count
- onClick: Sets `manualData[5].type = 'p2p'`

**Cube 3: –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞**
- Border: `border-green-400 bg-green-100` (if available)
- Icon: `Coins` (green)
- Ring: `ring-2 ring-green-200`
- Shows: crypto_wallets count
- onClick: Sets `manualData[5].type = 'crypto'`

**B. –ü–û–ö–ê–ó –†–ï–ö–í–ò–ó–ò–¢–û–í** (–µ—Å–ª–∏ manualData[5].type)
**–°—Ç—Ä–æ–∫–∏:** 2992-3118

**Multiple Requisites** (`type === 'multiple'`):
- Grid of cubes for each requisite
- Each shows: type, network/bank, account
- onClick: `handlePreviewData('requisites', requisite)`

**Single Requisite** (other types):
- One large cube (`col-span-3`)
- Ring-4 effect based on type:
  - Crypto: `ring-green-400 border-green-500 bg-green-100`
  - P2P: `ring-blue-400 border-blue-500 bg-blue-100`
  - Bank: `ring-orange-400 border-orange-500 bg-orange-100`
- Icon: `CheckCircle2`
- Text: "–ó–ê–ü–û–õ–ù–ï–ù–û"
- onClick: `handlePreviewData('requisites', manualData[5])`

---

## üîß HANDLERS & HELPER FUNCTIONS

### üõ†Ô∏è Helper Functions (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ)

#### 1. sendManagerReceiptRequest() - —Å—Ç—Ä–æ–∫–∞ 281
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —á–µ–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –í `useProjectPolling` (—Å—Ç—Ä–æ–∫–∞ 361)
- –í Stage2Container

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ `projectRequestId` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∑–∞–ø—Ä–æ—Å –µ—â—ë –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (`!isRequestSent`)
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç loader (`setShowFullLoader(true)`)
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/atomic-constructor/request-manager-receipt`
5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `isRequestSent = true`

**–í–∞–∂–Ω–æ—Å—Ç—å:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è - –±–µ–∑ –Ω–µ—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç Stage 2 (–º–æ–¥–µ—Ä–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º)

---

#### 2. getTemplateDataForStep(step, template) - —Å—Ç—Ä–æ–∫–∞ 661
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–≥–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –í `useTemplateSystem` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–º–µ—Ä —à–∞–≥–∞ (1-7) –∏ –æ–±—ä–µ–∫—Ç —à–∞–±–ª–æ–Ω–∞
2. –ú–∞–ø–ø–∏—Ç —à–∞–≥ –∫ –ø–æ–ª—é –≤ —à–∞–±–ª–æ–Ω–µ:
   - Step 1 ‚Üí `template.company_data`
   - Step 2 ‚Üí `template.specification_data`
   - Step 3 ‚Üí `template.bank_data`
   - Step 4 ‚Üí `template.payment_method_data`
   - Step 5 ‚Üí `template.requisites_data`
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ `null`

**–í–∞–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è - –Ω—É–∂–Ω–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —à–∞–±–ª–æ–Ω–æ–≤

---

#### 3. createValidationContext() - —Å—Ç—Ä–æ–∫–∞ 469
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—ë—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ—Ö —à–∞–≥–æ–≤.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –ü–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –Ω–∞ Stage 2 (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `checkSummaryReadiness()` (—Å—Ç—Ä–æ–∫–∞ 1067)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```typescript
{
  manualData: ManualData
  stepConfigs: PartialStepConfigs
  user: UserType | null
}
```

**–í–∞–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

---

### üéØ Handlers –≤ page.tsx (13 —Ñ—É–Ω–∫—Ü–∏–π)

#### 1. handleStepHover(stepId) - —Å—Ç—Ä–æ–∫–∞ 751
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–≤–µ–¥–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –Ω–∞ –∫—É–±–∏–∫ —à–∞–≥–∞.
```typescript
setHoveredStep(stepId)
setLastHoveredStep(stepId)
```

#### 2. handleStepClick(stepId) - —Å—Ç—Ä–æ–∫–∞ 761
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫ –Ω–∞ –∫—É–±–∏–∫ —à–∞–≥–∞.
- –î–ª—è —à–∞–≥–æ–≤ 4, 5: —ç—Ö–æ –¥–∞–Ω–Ω—ã–µ –æ—Ç–∫–ª—é—á–µ–Ω—ã (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç early)
- –î–ª—è –¥—Ä—É–≥–∏—Ö: –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞

#### 3. handleSourceSelect(source) - —Å—Ç—Ä–æ–∫–∞ 781
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö.
- `source === "catalog"` ‚Üí `setShowCatalogModal(true)`
- `source === "upload"` ‚Üí `setSelectedSource("upload")`
- `source === "profile"` ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –ø—Ä–æ—Ñ–∏–ª—è
- `source === "template"` ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —à–∞–±–ª–æ–Ω–æ–≤
- `source === "manual"` ‚Üí `setStepConfigs(lastHoveredStep, source)`

#### 4. handleCatalogProductsAdd(products) - —Å—Ç—Ä–æ–∫–∞ 1268
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞.
1. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç Step II
2. –î–æ–±–∞–≤–ª—è–µ—Ç –≤ `manualData[2]`
3. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
4. –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥–∏ 4 –∏ 5

#### 5. handleSelectBlueRoomSupplier(supplier) - —Å—Ç—Ä–æ–∫–∞ 1571
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –æ–±—ã—á–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.
1. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 2 –í–°–ï–ú–ò —Ç–æ–≤–∞—Ä–∞–º–∏ (`catalog_user_products`)
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 4 –º–µ—Ç–æ–¥–∞–º–∏ –æ–ø–ª–∞—Ç—ã
3. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 5 —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏
4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `stepConfigs[2,4,5] = 'blue_room'`

#### 6. handleSelectOrangeRoomSupplier(supplier) - —Å—Ç—Ä–æ–∫–∞ 1705
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.
1. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 2 –í–°–ï–ú–ò —Ç–æ–≤–∞—Ä–∞–º–∏ (`catalog_verified_products`)
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 4 –º–µ—Ç–æ–¥–∞–º–∏ –æ–ø–ª–∞—Ç—ã
3. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 5 —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏
4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `stepConfigs[2,4,5] = 'orange_room'`

#### 7. handlePaymentMethodSelect(method, supplier) - —Å—Ç—Ä–æ–∫–∞ 1481
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã.
1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `manualData[4].selectedMethod = method`
2. –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Üí –∑–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 5 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `stepConfigs[5] = 'catalog'`

#### 8. handlePreviewData(type, data) - —Å—Ç—Ä–æ–∫–∞ 1224
–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.
```typescript
setPreviewType(type)
setPreviewData(data)
openModal('preview')
```

#### 9. handleEditData(type) - —Å—Ç—Ä–æ–∫–∞ 1257
–û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
```typescript
setEditingType(type)
setSelectedSource('manual')
closeModal('preview')
```

#### 10. handleClientReceiptUpload(event) - —Å—Ç—Ä–æ–∫–∞ 530
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —á–µ–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª —á–µ—Ä–µ–∑ `uploadClientReceipt()`
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É —á–µ—Ä–µ–∑ `sendClientReceipt()`
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `clientReceiptUrl`

#### 11. returnToStage1Editing() - —Å—Ç—Ä–æ–∫–∞ 978
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ Stage 1 –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

#### 12. proceedToStage3() - —Å—Ç—Ä–æ–∫–∞ 1023
–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Stage 3 (–∞–Ω–∏–º–∞—Ü–∏—è —Å–¥–µ–ª–∫–∏).

#### 13. handleSendToManager() - —Å—Ç—Ä–æ–∫–∞ 1959
–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä—É (–∑–∞–≥–ª—É—à–∫–∞, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Stage2Container).

---

### üîó Handlers –∏–∑ Custom Hooks (3+ —Ñ—É–Ω–∫—Ü–∏–π)

#### 1. handleTemplateSelect(templateId)
**–•—É–∫:** `useTemplateSystem` (—Å—Ç—Ä–æ–∫–∞ 653)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞.

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—É—á–∞–µ—Ç —à–∞–±–ª–æ–Ω –ø–æ ID –∏–∑ `templates` –º–∞—Å—Å–∏–≤–∞
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `templateStepSelection` - —Å–µ—Ç–∫—É –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —à–∞–≥–æ–≤
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞–∫–∏–µ —à–∞–≥–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å

#### 2. handleTemplateStepSelect(stepId)
**–•—É–∫:** `useTemplateSystem`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∏–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —à–∞–≥—É.

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –í—ã–∑—ã–≤–∞–µ—Ç `getTemplateDataForStep(stepId, selectedTemplate)`
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç `manualData[stepId]` –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `stepConfigs[stepId] = 'template'`

#### 3. handleFillAllTemplateSteps()
**–•—É–∫:** `useTemplateSystem`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∏–º–µ–Ω—è–µ—Ç —à–∞–±–ª–æ–Ω –∫–æ –≤—Å–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º —à–∞–≥–∞–º (1 –∏ 2).

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —à–∞–≥–∞–º 1 –∏ 2
2. –í—ã–∑—ã–≤–∞–µ—Ç `handleTemplateStepSelect` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
3. –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞

#### 4. handleFileUpload(step, file)
**–•—É–∫:** `useOcrUpload` (—Å—Ç—Ä–æ–∫–∞ 1191)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞ –¥–ª—è OCR —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è.

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç loader (`ocrAnalyzing[step] = true`)
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –í—ã–∑—ã–≤–∞–µ—Ç Yandex Vision OCR
4. –ü–∞—Ä—Å–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. –ó–∞–ø–æ–ª–Ω—è–µ—Ç `manualData[step]`
6. –î–ª—è —à–∞–≥–∞ 2 ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `suggestPaymentMethodAndRequisites()`

---

## üß© –ö–û–ú–ü–û–ù–ï–ù–¢–´

### Block 1: StepCubes
**–§–∞–π–ª:** `components/StepCubes.tsx`
**–°—Ç—Ä–æ–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** 1985-1999

**–ü—Ä–æ–ø—Å—ã:**
- `constructorSteps` - –º–∞—Å—Å–∏–≤ —à–∞–≥–æ–≤ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- `currentStage` - —Ç–µ–∫—É—â–∏–π —ç—Ç–∞–ø (1, 2, 3)
- `stepConfigs` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- `manualData` - –¥–∞–Ω–Ω—ã–µ —à–∞–≥–æ–≤
- `receiptApprovalStatus` - —Å—Ç–∞—Ç—É—Å —á–µ–∫–∞
- `hasManagerReceipt` - –µ—Å—Ç—å –ª–∏ —á–µ–∫ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- `clientReceiptUrl` - URL —á–µ–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
- `isStepEnabled` - —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —à–∞–≥–∞
- `getCurrentStage` - —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ç–∞–ø–∞ —à–∞–≥–∞
- `handleStepHover` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–≤–µ–¥–µ–Ω–∏—è
- `handleStepClick` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
- `stepIcons` - –∏–∫–æ–Ω–∫–∏ —à–∞–≥–æ–≤
- `dataSources` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫—É–±–∏–∫–∞:**
- –ü—É—Å—Ç–æ–π (—Å–µ—Ä—ã–π —Å –∑–∞–º–∫–æ–º)
- –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π (–∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
- –ê–∫—Ç–∏–≤–Ω—ã–π (—Å–∏–Ω—è—è —Ä–∞–º–∫–∞)
- Disabled (—Å–µ—Ä—ã–π —Å –∑–∞–º–∫–æ–º, —ç—Ç–∞–ø 2)

---

### Block 2: StageRouter + Stages
**–§–∞–π–ª:** `components/stages/StageRouter.tsx`
**–°—Ç—Ä–æ–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** 2020-2048

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `Stage1Container` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —à–∞–≥–æ–≤ (–æ–±–ª–∞—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- `Stage2Container` - –º–æ–¥–µ—Ä–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- `Stage3Container` - –º–æ–Ω–∏—Ç–æ—Ä —Å–¥–µ–ª–∫–∏

**–†–æ—É—Ç–∏–Ω–≥:**
```typescript
currentStage === 1 ? <Stage1Content /> :
currentStage === 2 ? <Stage2Container /> :
currentStage === 3 ? <Stage3Container /> : null
```

---

### Block 3: SummaryBlock
**–§–∞–π–ª:** `components/SummaryBlock.tsx`
**–°—Ç—Ä–æ–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** 3513-3522

**–ü—Ä–æ–ø—Å—ã:**
- `manualData` - –¥–∞–Ω–Ω—ã–µ —à–∞–≥–æ–≤
- `stepConfigs` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- `configuredStepsSummary` - —Å–≤–æ–¥–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤
- `onStepCardClick` - –∫–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É —à–∞–≥–∞ –≤ —Å–≤–æ–¥–∫–µ
- `onProceedToStage2` - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Stage 2

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ Stage 2
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç"

---

### ModalManager
**–§–∞–π–ª:** `components/modals/ModalManager.tsx`
**–°—Ç—Ä–æ–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** 3535-3561

**–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- profileSelector - –≤—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–µ–Ω—Ç–∞
- supplierProfileSelector - –≤—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- blueRoomSupplier - –≤—ã–±–æ—Ä –ª–∏—á–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- orangeRoomSupplier - –≤—ã–±–æ—Ä –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- preview - –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö
- stageTransition - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Stage 2
- summary - —Å–≤–æ–¥–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

---

### CatalogModal
**–§–∞–π–ª:** `app/dashboard/create-project/components/CatalogModal.tsx`
**–°—Ç—Ä–æ–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** 3528-3532

**–†–µ–∂–∏–º—ã:**
- `catalogMode: 'category-first'` - —Ç–æ–≤–∞—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–∫–æ—Ä–∑–∏–Ω–∞)
- `catalogMode: 'supplier-first'` - –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ (Blue/Orange Room)

**–ü—Ä–æ–ø—Å—ã:**
- `open` - –æ—Ç–∫—Ä—ã—Ç–∞ –ª–∏ –º–æ–¥–∞–ª–∫–∞
- `onClose` - –∑–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É
- `onAddProducts` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤

---

### –§–æ—Ä–º—ã
**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `forms/`

**–°–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º:**
- `CompanyForm.tsx` - –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ (—à–∞–≥ 1)
- `ContactsForm.tsx` - –∫–æ–Ω—Ç–∞–∫—Ç—ã (—à–∞–≥ 1)
- `BankForm.tsx` - –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (—à–∞–≥ 1)
- `SpecificationForm.tsx` - —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ (—à–∞–≥ 2)
- `PaymentMethodForm.tsx` - –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã (—à–∞–≥ 4)
- `RequisitesForm.tsx` - —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (—à–∞–≥ 5)

**–û–±—â–∏–µ –ø—Ä–æ–ø—Å—ã:**
- `initialData` - –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `onSave` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `onCancel` - –æ—Ç–º–µ–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–ú–ï–¢–ö–ò

### ‚ùå –ß–¢–û –ù–ï–õ–¨–ó–Ø –¢–†–û–ì–ê–¢–¨ –ë–ï–ó –†–ò–°–ö–ê

1. **State Management (45 useState)**
   - –ù–µ —É–¥–∞–ª—è—Ç—å useState –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ù–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å –±–µ–∑ –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Å–µ–º—É —Ñ–∞–π–ª—É
   - –ù–µ –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `manualData` –∏ `stepConfigs`

2. **–û–±–ª–∞—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å—Ç—Ä–æ–∫–∏ 2050-3400)**
   - –°–ª–æ–∂–Ω–∞—è —É—Å–ª–æ–≤–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ (20+ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π)
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —É—Å–ª–æ–≤–∏—è –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–ª–æ—É
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –í–°–ï —à–∞–≥–∏ –ø–æ—Å–ª–µ –ª—é–±–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è

3. **Handlers (16 —Ñ—É–Ω–∫—Ü–∏–π)**
   - –ú–Ω–æ–≥–∏–µ handlers –≤—ã–∑—ã–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
   - `handleCatalogProductsAdd` ‚Üí –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥–∏ 4 –∏ 5
   - `handlePaymentMethodSelect` ‚Üí –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ 5
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Ü–µ–ø–æ—á–∫—É

4. **–°–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è**
   - 8 —Å–∏—Å—Ç–µ–º –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω—ã
   - Blue/Orange Room –∑–∞–ø–æ–ª–Ω—è—é—Ç 3 —à–∞–≥–∞ —Å—Ä–∞–∑—É
   - OCR ‚Üí OCR_SUGGESTION (—à–∞–≥ 2 ‚Üí —à–∞–≥–∏ 4, 5)
   - Catalog ‚Üí –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤ 4, 5

### ‚úÖ –ß–¢–û –ú–û–ñ–ù–û –ë–ï–ó–û–ü–ê–°–ù–û –ú–ï–ù–Ø–¢–¨

1. **JSX –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - –¥–æ–±–∞–≤–ª—è—Ç—å —è–∫–æ—Ä—è –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
2. **CSS —Å—Ç–∏–ª–∏** - —Ü–≤–µ—Ç–∞, –æ—Ç—Å—Ç—É–ø—ã, —Ä–∞–∑–º–µ—Ä—ã
3. **–¢–µ–∫—Å—Ç –∏ –ª–µ–π–±–ª—ã** - –Ω–∞–∑–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫, –∑–∞–≥–æ–ª–æ–≤–∫–∏
4. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞** - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 2+ —Ä–∞–∑–∞
5. **–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** - –¥–æ–±–∞–≤–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–µ —Ç—Ä–æ–≥–∞—è –º–æ–Ω–æ–ª–∏—Ç

### üö® –ü–†–ê–í–ò–õ–ê –†–ê–ó–†–ê–ë–û–¢–ö–ò

#### –ü–µ—Ä–µ–¥ –ª—é–±—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º:
1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å TypeScript: `npx tsc --noEmit`
2. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å dev server: `npm run dev`
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ 7 —à–∞–≥–æ–≤
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É stages
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ 8 —Å–∏—Å—Ç–µ–º –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏—á:
- ‚ùå –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –±–æ–ª—å—à–∏–µ –±–ª–æ–∫–∏ JSX –≤ page.tsx (>100 —Å—Ç—Ä–æ–∫)
- ‚ùå –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ä–º—ã –≤ page.tsx
- ‚ùå –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ page.tsx
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
  - `components/project-constructor/steps/NewStepComponent.tsx`
  - `components/project-constructor/forms/NewForm.tsx`
  - `components/project-constructor/sources/NewSourceSelector.tsx`

#### –í page.tsx —Ç–æ–ª—å–∫–æ:
- State management (useState, useEffect)
- Handlers (handle* functions)
- –†–æ—É—Ç–∏–Ω–≥ –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

**–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- [CATALOG_ARCHITECTURE_V2.md](../../../CATALOG_ARCHITECTURE_V2.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
- [CATALOG_INTEGRATION_WITH_7STEPS.md](../../../CATALOG_INTEGRATION_WITH_7STEPS.md) - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
- [Linear Starter](../create-project/page.tsx) - –ü—Ä–æ—Å—Ç–æ–π –ª–∏–Ω–µ–π–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- Supabase Tables: `catalog_verified_suppliers`, `catalog_user_suppliers`
- Forms: `/components/project-constructor/forms/`
- Hooks: `/hooks/project-constructor/`

---

---

## üìä –ú–ï–¢–†–ò–ö–ò –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò

**–í–µ—Ä—Å–∏—è:** 2.1 (—Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≥–µ–Ω—Ç–æ–º)
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 7 –æ–∫—Ç—è–±—Ä—è 2025
**–ê–≤—Ç–æ—Ä:** Claude Code + User
**–û—Ü–µ–Ω–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã:** 9.5/10 (–ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

**–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
- –ù–∞—á–∞–ª–æ: 4,295 —Å—Ç—Ä–æ–∫
- –°–µ–π—á–∞—Å: 3,574 —Å—Ç—Ä–æ–∫–∏
- –£–¥–∞–ª–µ–Ω–æ: 721 —Å—Ç—Ä–æ–∫–∞ (16.8%)
- –ò–∑–≤–ª–µ—á–µ–Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: 6 (StepCubes, SummaryBlock, ModalManager, Stage1/2/3Container)
- –ò–∑–≤–ª–µ—á–µ–Ω–æ —Ö—É–∫–æ–≤: 11 (useTemplateSystem, useOcrUpload, useManagerPolling, –∏ –¥—Ä.)

**–ß—Ç–æ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- ‚úÖ 30 useState –≤ page.tsx + 15 –≤ hooks = 45 —Å–æ—Å—Ç–æ—è–Ω–∏–π
- ‚úÖ 3 helper functions (sendManagerReceiptRequest, getTemplateDataForStep, createValidationContext)
- ‚úÖ 13 handlers –≤ page.tsx
- ‚úÖ 4 handlers –∏–∑ hooks
- ‚úÖ 8 —Å–∏—Å—Ç–µ–º –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è (—Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–π)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Block 2 (–æ–±–ª–∞—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) - 1,400 —Å—Ç—Ä–æ–∫ JSX
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫—É–±–∏–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- ‚úÖ User Flow —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
