<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .product { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
        .cart { background: #f0f0f0; padding: 15px; margin: 20px 0; }
        button { padding: 5px 10px; margin: 5px; }
        .disabled { background: #ccc; cursor: not-allowed; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ</h1>

    <div class="cart">
        <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
        <div id="cartInfo">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
        <div id="activeSupplier">–ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫: –Ω–µ—Ç</div>
        <button onclick="clearCart()">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>

    <h2>–¢–æ–≤–∞—Ä—ã –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</h2>

    <div class="product">
        <h3>–¢–æ–≤–∞—Ä 1 - –ü–æ—Å—Ç–∞–≤—â–∏–∫ A</h3>
        <p>supplier_id: supplier-a-123</p>
        <button onclick="addToCart('product1', 'supplier-a-123', '–¢–æ–≤–∞—Ä 1')">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>

    <div class="product">
        <h3>–¢–æ–≤–∞—Ä 2 - –ü–æ—Å—Ç–∞–≤—â–∏–∫ A</h3>
        <p>supplier_id: supplier-a-123</p>
        <button onclick="addToCart('product2', 'supplier-a-123', '–¢–æ–≤–∞—Ä 2')">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>

    <div class="product">
        <h3>–¢–æ–≤–∞—Ä 3 - –ü–æ—Å—Ç–∞–≤—â–∏–∫ B</h3>
        <p>supplier_id: supplier-b-456</p>
        <button onclick="addToCart('product3', 'supplier-b-456', '–¢–æ–≤–∞—Ä 3')">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>

    <div class="product">
        <h3>–¢–æ–≤–∞—Ä 4 - –ü–æ—Å—Ç–∞–≤—â–∏–∫ B</h3>
        <p>supplier_id: supplier-b-456</p>
        <button onclick="addToCart('product4', 'supplier-b-456', '–¢–æ–≤–∞—Ä 4')">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>

    <h2>–õ–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π:</h2>
    <div id="log"></div>

    <script>
        // –≠–º—É–ª—è—Ü–∏—è —Ö—É–∫–∞ useCart
        let cart = [];
        let activeSupplier = null;

        function addToCart(productId, supplierId, productName) {
            const logDiv = document.getElementById('log');

            // –õ–æ–≥–∏–∫–∞ –∏–∑ useCart.ts (—Å—Ç—Ä–æ–∫–∏ 82-111)
            if (cart.length === 0 || activeSupplier === supplierId) {
                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
                activeSupplier = supplierId;

                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                    logDiv.innerHTML += `<div class="success">‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${productName} (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${existingItem.quantity})</div>`;
                } else {
                    cart.push({ id: productId, name: productName, supplierId: supplierId, quantity: 1 });
                    logDiv.innerHTML += `<div class="success">‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É: ${productName}</div>`;
                }

                updateCartDisplay();
                return true;
            } else {
                // –î—Ä—É–≥–æ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫ - –±–ª–æ–∫–∏—Ä—É–µ–º
                logDiv.innerHTML += `<div class="error">‚ùå –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û: ${productName} –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (${supplierId})</div>`;
                alert('–ù–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –¥—Ä—É–≥–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞. –°–Ω–∞—á–∞–ª–∞ –æ—á–∏—Å—Ç–∏—Ç–µ –∫–æ—Ä–∑–∏–Ω—É.');
                return false;
            }
        }

        function clearCart() {
            cart = [];
            activeSupplier = null;
            document.getElementById('log').innerHTML += '<div class="info">üîÑ –ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞</div>';
            updateCartDisplay();
        }

        function updateCartDisplay() {
            const cartInfo = document.getElementById('cartInfo');
            const supplierInfo = document.getElementById('activeSupplier');

            if (cart.length > 0) {
                cartInfo.innerHTML = `–¢–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ: ${cart.length}<br>` +
                    cart.map(item => `- ${item.name} (–∫–æ–ª-–≤–æ: ${item.quantity})`).join('<br>');
            } else {
                cartInfo.innerHTML = '–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞';
            }

            supplierInfo.innerHTML = `–ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫: ${activeSupplier || '–Ω–µ—Ç'}`;
        }
    </script>
</body>
</html>