# üöÄ GET2B PROJECT MANAGEMENT BOT GUIDE

## üìã **–û–ì–õ–ê–í–õ–ï–ù–ò–ï**
1. [üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
3. [üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–µ–∫—Ç–∞](#–∂–∏–∑–Ω–µ–Ω–Ω—ã–π-—Ü–∏–∫–ª-–ø—Ä–æ–µ–∫—Ç–∞)
4. [ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram Bot](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—á–µ—Ä–µ–∑-telegram-bot)
5. [üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á–µ—Ç—ã](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–æ—Ç—á–µ—Ç—ã)
6. [üÜò Troubleshooting](#troubleshooting)

---

## üéØ **–û–ë–ó–û–† –°–ò–°–¢–ï–ú–´**

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ GET2B**
GET2B –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **7-—à–∞–≥–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É** —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è B2B –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Telegram –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤.

### **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- üì± **Next.js Web App** - –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üóÑÔ∏è **Supabase Database** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ü§ñ **Telegram Bot** `@Get2b_bot` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏
- üåê **Ngrok Tunneling** - –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- üìÑ **OCR Processing** - –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

---

## ‚öôÔ∏è **–ù–ê–°–¢–†–û–ô–ö–ê –û–ö–†–£–ñ–ï–ù–ò–Ø**

### **1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
# ü§ñ TELEGRAM BOT –ù–ê–°–¢–†–û–ô–ö–ò
TELEGRAM_BOT_TOKEN="7674425495:AAGiuSrYNJuJA06a65fXA95Ss0pcXhOE8tQ"
TELEGRAM_CHAT_ID="6725753966"

# üóÑÔ∏è SUPABASE –ù–ê–°–¢–†–û–ô–ö–ò
NEXT_PUBLIC_SUPABASE_URL="https://ejkhdhexkadecpbjjmsz.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# üåê NGROK –ù–ê–°–¢–†–û–ô–ö–ò (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
NGROK_WEBHOOK_URL="https://your-ngrok-url.ngrok.io"
```

### **2. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã**
```bash
# –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ Next.js —Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok (–Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª)
ngrok http 3000

# –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –±–æ—Ç–∞
curl -X POST "https://api.telegram.org/bot{BOT_TOKEN}/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-ngrok-url.ngrok.io/api/telegram-webhook"}'
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl "https://api.telegram.org/bot{BOT_TOKEN}/getWebhookInfo"

# –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
curl -X POST "http://localhost:3000/api/telegram/send-message" \
  -H "Content-Type: application/json" \
  -d '{"text": "–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞! üöÄ"}'
```

---

## üîÑ **–ñ–ò–ó–ù–ï–ù–ù–´–ô –¶–ò–ö–õ –ü–†–û–ï–ö–¢–ê**

### **STEP 1: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏**
```
–°—Ç–∞—Ç—É—Å: draft
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
–î–µ–π—Å—Ç–≤–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
```

### **STEP 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∏–Ω–≤–æ–π—Å–∞**
```
–°—Ç–∞—Ç—É—Å: in_progress ‚Üí waiting_approval
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "üìÑ –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Ç—Ä–µ–±—É–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è"
–î–µ–π—Å—Ç–≤–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞: –û–¥–æ–±—Ä–∏—Ç—å/–û—Ç–∫–ª–æ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –≤ Telegram
```

### **STEP 3: –û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞**
```
–°—Ç–∞—Ç—É—Å: waiting_receipt
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —á–µ–∫ –æ–± –æ–ø–ª–∞—Ç–µ
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "üí∞ –ü–æ–ª—É—á–µ–Ω —á–µ–∫ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞"
–î–µ–π—Å—Ç–≤–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞: –û–¥–æ–±—Ä–∏—Ç—å/–û—Ç–∫–ª–æ–Ω–∏—Ç—å —á–µ–∫
```

### **STEP 4: –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫—É**
```
–°—Ç–∞—Ç—É—Å: receipt_approved ‚Üí filling_requisites
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –í—ã–±–æ—Ä –±–∞–Ω–∫/–∫—Ä–∏–ø—Ç–æ/P2P –æ–ø–ª–∞—Ç—ã
–î–µ–π—Å—Ç–≤–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
```

### **STEP 5: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤**
```
–°—Ç–∞—Ç—É—Å: filling_requisites
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö/–∫—Ä–∏–ø—Ç–æ –¥–∞–Ω–Ω—ã—Ö
–î–µ–π—Å—Ç–≤–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
```

### **STEP 6: –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º**
```
–°—Ç–∞—Ç—É—Å: waiting_manager_receipt ‚Üí in_work
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç —á–µ–∫ –æ–± –æ–ø–ª–∞—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
–ö–∞–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—å: Reply –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram —Å —Ñ–∞–π–ª–æ–º
```

### **STEP 7: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞**
```
–°—Ç–∞—Ç—É—Å: waiting_client_confirmation ‚Üí completed
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –ö–ª–∏–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "‚úÖ –ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ"
```

---

## ü§ñ **–£–ü–†–ê–í–õ–ï–ù–ò–ï –ß–ï–†–ï–ó TELEGRAM BOT**

### **üî• –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π webhook:
```
‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: /api/telegram-webhook
‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: /api/telegram-manager-webhook
```

### **üì± –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**

#### **1. –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω**
```
üÜï –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∏–ª–∏ –æ–±–Ω–æ–≤–ª—ë–Ω!

–ù–æ–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞: 1023ff09-9a29-4916-850a-ccaff97df9bb
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: user@example.com
–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: –û–û–û –ü–†–ò–ú–ï–†

–î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏:
- –ù–∞–∑–≤–∞–Ω–∏–µ: –û–û–û –ü–†–ò–ú–ï–†
- –ò–ù–ù: 1234567890
- –ö–ü–ü: 123456001
```

#### **2. –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ–¥–æ–±—Ä–µ–Ω–∏–µ**
```
üìã –ü–†–û–ï–ö–¢ –¢–†–ï–ë–£–ï–¢ –û–î–û–ë–†–ï–ù–ò–Ø

üÜî ID: abc-123-def
üìä –ù–∞–∑–≤–∞–Ω–∏–µ: –û–û–û –¢–ï–°–¢
üí∞ –°—É–º–º–∞: 150,000 RUB
üè≠ –ü–æ—Å—Ç–∞–≤—â–∏–∫: China Supplier Ltd

[–û–¥–æ–±—Ä–∏—Ç—å] [–û—Ç–∫–ª–æ–Ω–∏—Ç—å]
```

#### **3. –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–º**
```
üí∞ –ü–û–õ–£–ß–ï–ù –ß–ï–ö –û–¢ –ö–õ–ò–ï–ù–¢–ê

üÜî –ü—Ä–æ–µ–∫—Ç: abc-123-def
üìÑ –§–∞–π–ª: client_receipt.jpg
‚è∞ –í—Ä–µ–º—è: 13:45 15/09/2025

[–û–¥–æ–±—Ä–∏—Ç—å —á–µ–∫] [–û—Ç–∫–ª–æ–Ω–∏—Ç—å —á–µ–∫]
```

#### **4. –ó–∞–ø—Ä–æ—Å –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º**
```
üì§ –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ abc-123-def

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ–∫ (—Ñ–æ—Ç–æ –∏–ª–∏ —Ñ–∞–π–ª)
–≤ –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.

üí° –ö–∞–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—å: Reply –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ + –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª
```

### **‚ö° –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏**

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
- `‚úÖ –û–¥–æ–±—Ä–∏—Ç—å` - –æ–¥–æ–±—Ä—è–µ—Ç –ø—Ä–æ–µ–∫—Ç –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
- `‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å` - –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
- `üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫` - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
- `üîç –î–µ—Ç–∞–ª–∏` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ

#### **–ê—Ç–æ–º–∞—Ä–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:**
- `approve_atomic_` - –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- `reject_atomic_` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- `request_changes_atomic_` - –∑–∞–ø—Ä–æ—Å –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### **–†–∞–±–æ—Ç–∞ —Å —á–µ–∫–∞–º–∏:**
- `approve_receipt_` - –æ–¥–æ–±—Ä–µ–Ω–∏–µ —á–µ–∫–∞ –æ–ø–ª–∞—Ç—ã
- `reject_receipt_` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —á–µ–∫–∞
- `approve_client_receipt_` - –æ–¥–æ–±—Ä–µ–Ω–∏–µ —á–µ–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞

---

## üìä **–ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –û–¢–ß–ï–¢–´**

### **üóÑÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**
```sql
-- –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
SELECT id, name, status, current_step, created_at
FROM projects
WHERE status != 'completed'
ORDER BY created_at DESC;

-- –ü—Ä–æ–µ–∫—Ç—ã —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞
SELECT id, name, status, current_step
FROM projects
WHERE status IN (
  'waiting_approval',
  'waiting_receipt',
  'waiting_manager_receipt'
)
ORDER BY current_step;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —ç—Ç–∞–ø–∞–º
SELECT status, current_step, COUNT(*) as count
FROM projects
GROUP BY status, current_step
ORDER BY current_step;
```

### **üìà API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
curl "http://localhost:3000/api/debug-projects"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π –ø—Ä–æ–µ–∫—Ç–∞
curl "http://localhost:3000/api/check-project-fields"

# –ê–Ω–∞–ª–∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
curl "http://localhost:3000/api/analyze-project-specifications"
```

### **üîç –û—Ç–ª–∞–¥–∫–∞ webhook'–æ–≤**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
tail -f .next/trace

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ngrok —Ç—Ä–∞—Ñ–∏–∫–∞
ngrok http 3000 --log=stdout

# –¢–µ—Å—Ç webhook'–∞
curl -X POST "https://your-ngrok-url.ngrok.io/api/telegram-webhook" \
  -H "Content-Type: application/json" \
  -d '{"callback_query": {"id": "test", "data": "approve_test-project-id"}}'
```

---

## üÜò **TROUBLESHOOTING**

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "–ë–æ—Ç –Ω–µ –∞–ø—Ä—É–≤–∏—Ç —Å–¥–µ–ª–∫–∏"**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook URL
curl "https://api.telegram.org/bot{TOKEN}/getWebhookInfo"

# 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å webhook –µ—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
curl -X POST "https://api.telegram.org/bot{TOKEN}/setWebhook" \
  -d '{"url": "https://your-ngrok.ngrok.io/api/telegram-webhook"}'

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
grep "telegram" logs/server.log
```

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "–ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç"**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å callback_query –æ–±—Ä–∞–±–æ—Ç–∫—É
grep "callback_query" logs/server.log

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç callback_data
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: approve_1023ff09-9a29-4916-850a-ccaff97df9bb
# –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: approve_deal 1023ff09

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ë–î
psql -c "SELECT status FROM projects WHERE id='project-id';"
```

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "–§–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è"**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ Supabase Storage
# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook –æ–±—Ä–∞–±–æ—Ç–∫—É message —Å photo/document
# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å reply_to_message —Å–≤—è–∑—å

grep "reply_to_message" logs/server.log
```

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "U–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç"**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TELEGRAM_CHAT_ID –≤ .env
echo $TELEGRAM_CHAT_ID

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç
curl "https://api.telegram.org/bot{TOKEN}/getChat?chat_id={CHAT_ID}"

# 3. –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏
curl -X POST "http://localhost:3000/api/telegram/send-message" \
  -d '{"text": "Test message"}'
```

### **üîß –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

#### **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ webhook:**
```bash
# –í—ã–∫–ª—é—á–∏—Ç—å webhook
curl -X POST "https://api.telegram.org/bot{TOKEN}/setWebhook" -d '{"url": ""}'

# –í–∫–ª—é—á–∏—Ç—å webhook
curl -X POST "https://api.telegram.org/bot{TOKEN}/setWebhook" \
  -d '{"url": "https://your-ngrok.ngrok.io/api/telegram-webhook"}'
```

#### **–û—á–∏—Å—Ç–∫–∞ pending updates:**
```bash
# –ü–æ–ª—É—á–∏—Ç—å updates
curl "https://api.telegram.org/bot{TOKEN}/getUpdates"

# –û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å
curl "https://api.telegram.org/bot{TOKEN}/getUpdates?offset=-1"
```

#### **–ü–µ—Ä–µ–≤–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø –≤—Ä—É—á–Ω—É—é:**
```sql
-- –û–¥–æ–±—Ä–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
UPDATE projects
SET status = 'waiting_receipt', current_step = 3
WHERE id = 'project-id';

-- –û–¥–æ–±—Ä–∏—Ç—å —á–µ–∫
UPDATE projects
SET status = 'receipt_approved', current_step = 4
WHERE id = 'project-id';
```

---

## üéØ **–ë–´–°–¢–†–´–ô –°–¢–ê–†–¢**

### **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞:**

1. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:** `npm run dev`
2. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç—å ngrok:** `ngrok http 3000`
3. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook:** `curl webhook setup`
4. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** –ø—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª
5. ‚úÖ **–¢–µ—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:** –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
6. ‚úÖ **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:** —á–µ—Ä–µ–∑ –≤–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
7. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:** –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –≤ Telegram
8. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏:** –Ω–∞–∂–∞—Ç—å –û–¥–æ–±—Ä–∏—Ç—å/–û—Ç–∫–ª–æ–Ω–∏—Ç—å
9. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ –ë–î:** —Å—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è

### **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞:**
```bash
# 1. –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞
./scripts/setup-bot.sh

# 2. –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
curl -X POST "http://localhost:3000/api/telegram/send-project-approval" \
  -H "Content-Type: application/json" \
  -d '{"text": "TEST PROJECT", "projectId": "test-123", "type": "spec"}'

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
psql -c "SELECT * FROM projects WHERE id='test-123';"
```

---

## üìû **–ö–û–ù–¢–ê–ö–¢–´ –ò –ü–û–î–î–ï–†–ñ–ö–ê**

- ü§ñ **Bot Username:** `@Get2b_bot`
- üÜî **Bot ID:** `7674425495`
- üí¨ **Manager Chat ID:** `6725753966`
- üåê **Webhook Endpoint:** `/api/telegram-webhook`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞:** 13.09.2025
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** v2.3.8
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ

---

*üí° –°–æ–≤–µ—Ç: –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –∑–∞–∫–ª–∞–¥–∫–∏ –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!*