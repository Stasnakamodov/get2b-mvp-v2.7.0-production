# üöÄ –ù–û–í–´–ï API ENDPOINTS –ö–ê–¢–ê–õ–û–ì–ê V2.0

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29 –¥–µ–∫–∞–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìã **–û–ë–ó–û–† –ê–†–•–ò–¢–ï–ö–¢–£–†–´**

### üèóÔ∏è **–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:**
- **üß° –û—Ä–∞–Ω–∂–µ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞** - –ê–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ Get2B (`catalog_verified_suppliers`)
- **üîµ –°–∏–Ω—è—è –∫–æ–º–Ω–∞—Ç–∞** - –õ–∏—á–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`catalog_user_suppliers`)
- **üîÑ –ò–º–ø–æ—Ä—Ç** - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –æ—Ä–∞–Ω–∂–µ–≤–æ–π –≤ —Å–∏–Ω—é—é –∫–æ–º–Ω–∞—Ç—É
- **üìä –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø—Ä–æ–µ–∫—Ç–æ–≤

---

## üß° **1. –ê–ö–ö–†–ï–î–ò–¢–û–í–ê–ù–ù–´–ï –ü–û–°–¢–ê–í–©–ò–ö–ò (–û—Ä–∞–Ω–∂–µ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞)**

### **GET** `/api/catalog/verified-suppliers`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ Get2B

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `category` - –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (`–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞`, `–¢–µ–∫—Å—Ç–∏–ª—å –∏ –æ–¥–µ–∂–¥–∞`, etc.)
- `country` - –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç—Ä–∞–Ω–µ
- `featured` - –¢–æ–ª—å–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ (`true`)
- `search` - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∫–æ–º–ø–∞–Ω–∏–∏, –æ–ø–∏—Å–∞–Ω–∏—é

**–û—Ç–≤–µ—Ç:**
```json
{
  "suppliers": [
    {
      "id": "uuid",
      "name": "TechnoMax Electronics",
      "company_name": "TechnoMax Electronics Ltd.",
      "category": "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
      "country": "–ö–∏—Ç–∞–π",
      "city": "–®—ç–Ω—å—á–∂—ç–Ω—å",
      "description": "–í–µ–¥—É—â–∏–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏...",
      "rating": 4.8,
      "reviews_count": 127,
      "projects_count": 89,
      "is_featured": true,
      "catalog_verified_products": [...]
    }
  ],
  "total": 15
}
```

### **POST** `/api/catalog/verified-suppliers`
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ Get2B)

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞",
  "company_name": "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  "category": "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
  "country": "–ö–∏—Ç–∞–π",
  "city": "–®—ç–Ω—å—á–∂—ç–Ω—å",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏",
  "contact_email": "sales@company.com",
  "contact_phone": "+86 755 1234 5678",
  "website": "https://company.com",
  "min_order": "$5,000",
  "response_time": "24 —á–∞—Å–∞"
}
```

### **PATCH** `/api/catalog/verified-suppliers`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤)

---

## üîµ **2. –õ–ò–ß–ù–´–ï –ü–û–°–¢–ê–í–©–ò–ö–ò (–°–∏–Ω—è—è –∫–æ–º–Ω–∞—Ç–∞)**

### **GET** `/api/catalog/user-suppliers`
–ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `category` - –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `source_type` - –ò—Å—Ç–æ—á–Ω–∏–∫: `user_added`, `imported_from_catalog`, `extracted_from_7steps`
- `search` - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∫–æ–º–ø–∞–Ω–∏–∏, –æ–ø–∏—Å–∞–Ω–∏—é
- `sort_by` - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: `total_projects`, `last_project_date`, `created_at`, `name`

**–û—Ç–≤–µ—Ç:**
```json
{
  "suppliers": [
    {
      "id": "uuid",
      "user_id": "uuid",
      "name": "–ò–≥—Ä–∏–∫ –ò–≤–∞–Ω–æ–≤",
      "company_name": "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ101",
      "source_type": "extracted_from_7steps",
      "total_projects": 12,
      "successful_projects": 12,
      "total_spent": 7837924835.54,
      "last_project_date": "2025-06-25T20:03:37.432149+00:00",
      "catalog_user_products": [...]
    }
  ],
  "total": 5,
  "user_id": "uuid"
}
```

### **POST** `/api/catalog/user-suppliers`
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ª–∏—á–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞",
  "company_name": "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  "category": "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
  "country": "–†–æ—Å—Å–∏—è",
  "contact_email": "supplier@company.ru",
  "contact_phone": "+7 999 123-45-67"
}
```

### **PATCH** `/api/catalog/user-suppliers`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏)

### **DELETE** `/api/catalog/user-suppliers`
–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (is_active = false)

---

## üîÑ **3. –ò–ú–ü–û–†–¢ –ü–û–°–¢–ê–í–©–ò–ö–û–í**

### **POST** `/api/catalog/import-supplier`
–ò–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ Get2B –≤ –ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "verified_supplier_id": "uuid",
  "import_products": false
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–ü–æ—Å—Ç–∞–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à –ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫",
  "supplier_id": "uuid",
  "supplier": { ... }
}
```

### **GET** `/api/catalog/import-supplier?verified_supplier_id=uuid`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "can_import": true,
  "verified_supplier": { ... }
}
```

–ò–ª–∏:
```json
{
  "can_import": false,
  "reason": "–ü–æ—Å—Ç–∞–≤—â–∏–∫ —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à –ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫",
  "existing_supplier": { ... }
}
```

---

## üìä **4. –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ö–ê–¢–ê–õ–û–ì–ê**

### **POST** `/api/catalog/sync`
–ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ø—Ä–æ–µ–∫—Ç–æ–≤

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞",
  "result": {
    "status": "success",
    "suppliers_extracted": 12,
    "sync_completed_at": "2025-06-29T13:47:31.345546+00:00"
  },
  "timestamp": "2025-06-29T13:47:31.345546+00:00"
}
```

### **GET** `/api/catalog/sync`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–û—Ç–≤–µ—Ç:**
```json
{
  "user_catalog": {
    "total_suppliers": 5,
    "extracted_from_projects": 5,
    "manually_added": 0,
    "imported_from_catalog": 0,
    "total_projects": 60,
    "total_spent": 39189624177.7,
    "last_sync_date": "2025-06-25T20:03:37.432149+00:00"
  },
  "verified_catalog": {
    "total_verified": 15,
    "featured": 8,
    "by_category": {
      "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞": 5,
      "–¢–µ–∫—Å—Ç–∏–ª—å –∏ –æ–¥–µ–∂–¥–∞": 3,
      "–ö—Ä–∞—Å–æ—Ç–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ": 4,
      "–ê–≤—Ç–æ—Ç–æ–≤–∞—Ä—ã": 2,
      "–°–ø–æ—Ä—Ç –∏ –æ—Ç–¥—ã—Ö": 1
    },
    "by_country": {
      "–ö–∏—Ç–∞–π": 6,
      "–¢—É—Ä—Ü–∏—è": 3,
      "–ì–µ—Ä–º–∞–Ω–∏—è": 2,
      "–°–®–ê": 2,
      "–ò—Ç–∞–ª–∏—è": 2
    }
  },
  "sync_available": true,
  "last_check": "2025-06-29T13:47:31.345546+00:00"
}
```

---

## üéØ **–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –° –•–£–ö–ê–ú–ò**

### **–ò–º–ø–æ—Ä—Ç —Ö—É–∫–æ–≤:**
```typescript
import { 
  useVerifiedSuppliers, 
  useUserSuppliers, 
  useImportSupplier,
  useCatalogSync 
} from '@/hooks/useCatalogSuppliers';
```

### **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
// –ê–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ (–æ—Ä–∞–Ω–∂–µ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞)
const { suppliers: verifiedSuppliers, loading: verifiedLoading } = useVerifiedSuppliers({
  category: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞',
  featured: true
});

// –õ–∏—á–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ (—Å–∏–Ω—è—è –∫–æ–º–Ω–∞—Ç–∞)
const { suppliers: userSuppliers, loading: userLoading } = useUserSuppliers({
  sort_by: 'total_projects'
});

// –ò–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
const { importSupplier, loading: importLoading } = useImportSupplier();

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
const { syncCatalog, getStats } = useCatalogSync();
```

---

## üîê **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨**

### **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
- –í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Supabase Auth
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã Get2B –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏

### **RLS –ü–æ–ª–∏—Ç–∏–∫–∏:**
- `catalog_user_suppliers` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏
- `catalog_verified_suppliers` - –ø—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `user_id` –≤ —Å–∏–Ω–µ–π –∫–æ–º–Ω–∞—Ç–µ

---

## ‚úÖ **–°–¢–ê–¢–£–° –ì–û–¢–û–í–ù–û–°–¢–ò**

**API Endpoints:** ‚úÖ –ì–æ—Ç–æ–≤—ã  
**TypeScript —Ç–∏–ø—ã:** ‚úÖ –ì–æ—Ç–æ–≤—ã  
**React —Ö—É–∫–∏:** ‚úÖ –ì–æ—Ç–æ–≤—ã  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** ‚úÖ –ì–æ—Ç–æ–≤–∞  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** ‚úÖ –ì–æ—Ç–æ–≤–∞  

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º üé® 