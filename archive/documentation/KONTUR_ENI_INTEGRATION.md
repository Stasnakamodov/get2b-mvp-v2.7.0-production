# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ö–æ–Ω—Ç—É—Ä.–≠–Ω–∏

## –û–±–∑–æ—Ä

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –ö–æ–Ω—Ç—É—Ä.–≠–Ω–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–º–ø–∞–Ω–∏–∏ –Ω–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫—É—é —á–∏—Å—Ç–æ—Ç—É –ø—Ä—è–º–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ Get2B. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –î–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü:
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —é—Ä–ª–∏—Ü–µ –∏ –µ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Å–ø–∏—Å–∫–∞—Ö –†–æ—Å—Ñ–∏–Ω–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ –¥–µ–ª–∞
- ‚úÖ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –≤ –§–°–°–ü
- ‚úÖ –†–µ–µ—Å—Ç—Ä –∑–∞–ª–æ–≥–æ–≤ –¥–≤–∏–∂–∏–º–æ–≥–æ –∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –†–µ–µ—Å—Ç—Ä –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

### –£—Ä–æ–≤–Ω–∏ —Ä–∏—Å–∫–æ–≤:
- üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π** - –ë–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ, –†–æ—Å—Ñ–∏–Ω–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- üü† **–í—ã—Å–æ–∫–∏–π** - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ –¥–µ–ª–∞, –∫—Ä—É–ø–Ω—ã–µ –¥–æ–ª–≥–∏
- üü° **–°—Ä–µ–¥–Ω–∏–π** - –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ –¥–µ–ª–∞, –∑–∞–ª–æ–≥–∏
- üü¢ **–ù–∏–∑–∫–∏–π** - –ú–µ–ª–∫–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å API –ö–æ–Ω—Ç—É—Ä.–≠–Ω–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ [–ö–æ–Ω—Ç—É—Ä.–†–µ–µ—Å—Ç—Ä–æ](https://api.testkontur.ru/)
2. –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á (`apiKey`) –∏ ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (`orgId`)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env.local`:

```env
# –ö–æ–Ω—Ç—É—Ä.–≠–Ω–∏ API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
KONTUR_ENI_API_KEY=your_api_key_here
KONTUR_ENI_ORG_ID=your_org_id_here
KONTUR_ENI_BASE_URL=https://api.testkontur.ru/realty/assessment/v2.1
```

### 3. –¢–µ—Å—Ç–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ `test_scenarios.json`:

```json
{
  "organization": {
    "ogrn": "1063573215232"  // –ö–æ–º–ø–∞–Ω–∏—è –±–µ–∑ —Ä–∏—Å–∫–æ–≤
  }
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –ø—Ä–æ—Ñ–∏–ª–µ –∫–ª–∏–µ–Ω—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ—Ñ–∏–ª—å" ‚Üí "–í–∞—à–∏ –∫–∞—Ä—Ç–æ—á–∫–∏"
2. –ù–∞–π–¥–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –∫–ª–∏–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ò–ù–ù –∏ –û–ì–†–ù
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å" (–∏–∫–æ–Ω–∫–∞ —â–∏—Ç–∞) –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∫–ª–∏–µ–Ω—Ç–∞
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–¥–æ 5 –º–∏–Ω—É—Ç)
6. –ò–∑—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
- URL: `/test-kontur-eni`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API
- –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–π
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

–°–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:

- **–û–±—â—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–æ–≤** —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
- **–î–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤** —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–∏–ø—É —Ä–∏—Å–∫–∞
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ä–∏—Å–∫–æ–≤ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π

## API Endpoints

### POST /api/kontur-eni/check-company

–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏:

```json
{
  "inn": "1234567890",
  "ogrn": "1234567890123",
  "name": "–û–û–û –ü—Ä–∏–º–µ—Ä",
  "address": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1"
}
```

### GET /api/kontur-eni/check-company?checkId={id}

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏:

```json
{
  "success": true,
  "data": {
    "checkId": "uuid",
    "status": "Processed",
    "risks": [...],
    "summary": {
      "totalRisks": 2,
      "criticalRisks": 0,
      "highRisks": 1,
      "mediumRisks": 1,
      "lowRisks": 0,
      "overallRisk": "high"
    }
  }
}
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–µ—Ä–≤–∏—Å KonturEniService

```typescript
// lib/services/KonturEniService.ts
export class KonturEniService {
  // –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–±—ä–µ–∫—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
  async createSubject(companyData: CompanyCheckRequest)
  
  // –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
  async startCompanyCheck(subjectId: string, companyData: CompanyCheckRequest)
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  async getCheckResults(checkId: string): Promise<CompanyCheckResult>
  
  // –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ + –∑–∞–ø—É—Å–∫ + –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
  async checkCompany(companyData: CompanyCheckRequest)
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç KonturEniCheckModal

```typescript
// components/KonturEniCheckModal.tsx
interface KonturEniCheckModalProps {
  open: boolean;
  onClose: () => void;
  companyData: {
    name: string;
    inn: string;
    ogrn: string;
  };
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:

1. **–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã API –∫–ª—é—á–∏**
   ```
   –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ö–æ–Ω—Ç—É—Ä.–≠–Ω–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
   ```

2. **–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏**
   ```
   –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ò–ù–ù –∏–ª–∏ –û–ì–†–ù –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
   ```

3. **–¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏**
   ```
   Check timeout - exceeded maximum attempts
   ```

4. **–û—à–∏–±–∫–∏ API –ö–æ–Ω—Ç—É—Ä**
   ```
   Kontur API error: 400 - Validation failed
   ```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å API –ö–æ–Ω—Ç—É—Ä.–≠–Ω–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

```
üîç [Kontur Eni] –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–º–ø–∞–Ω–∏–∏: { inn: "1234567890", ogrn: "1234567890123" }
‚úÖ [Kontur Eni] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: { checkId: "uuid", status: "Processed", totalRisks: 2 }
```

### –ú–µ—Ç—Ä–∏–∫–∏

–û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –£—Ä–æ–≤–Ω–∏ —Ä–∏—Å–∫–æ–≤
- –û—à–∏–±–∫–∏ API

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–≤–µ—Ä–æ–∫

1. –û–±–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `CompanyCheckRequest`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–ø –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `startCompanyCheck`
3. –û–±–Ω–æ–≤–∏—Ç–µ `analyzeRisks` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. –î–æ–±–∞–≤—å—Ç–µ –∏–∫–æ–Ω–∫—É –∏ –º–µ—Ç–∫—É –≤ `KonturEniCheckModal`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
curl -X POST http://localhost:3000/api/kontur-eni/check-company \
  -H "Content-Type: application/json" \
  -d '{"inn":"1234567890","ogrn":"1234567890123"}'
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ò–ù–ù/–û–ì–†–ù
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –ö–æ–Ω—Ç—É—Ä.–≠–Ω–∏

---

*–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –ö–æ–Ω—Ç—É—Ä.–†–µ–µ—Å—Ç—Ä–æ v2.1* 