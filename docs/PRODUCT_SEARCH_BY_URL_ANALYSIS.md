# –ê–Ω–∞–ª–∏–∑: –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Å—Å—ã–ª–∫–µ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞

**–î–∞—Ç–∞:** 31 –æ–∫—Ç—è–±—Ä—è 2025
**–ó–∞–¥–∞—á–∞:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Å—ã–ª–∫—É —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ (Wildberries, Ozon, AliExpress –∏ —Ç.–¥.) –∏ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã –≤ –≤–∞—à–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ

---

## üìä –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ß—Ç–æ —É–∂–µ –µ—Å—Ç—å:
‚úÖ **–ü–æ–∏—Å–∫ –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é** (`/api/catalog/search-by-image`)
- Yandex Vision Classification (–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è)
- Yandex Vision OCR (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞)
- YandexGPT (—É–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤)
- –ü–æ–∏—Å–∫ –≤ PostgreSQL –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `catalog_verified_products` (84 —Ç–æ–≤–∞—Ä–∞)
- –ü–æ–ª—è: name, description, category, price, supplier_id, is_active

‚úÖ **AI –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- Yandex Vision API (–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è + OCR)
- YandexGPT API (–∞–Ω–∞–ª–∏–∑ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~0.3-0.5‚ÇΩ –∑–∞ –∑–∞–ø—Ä–æ—Å

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### **–í–ê–†–ò–ê–ù–¢ 1: –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä—Å–∏–Ω–≥ + —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–Æ

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–°—Å—ã–ª–∫–∞ ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Üí –ü–æ–∏—Å–∫ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
```

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- **Open Graph –ø–∞—Ä—Å–µ—Ä** (open-graph-scraper –¥–ª—è Node.js)
- **Cheerio** –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML (–µ—Å–ª–∏ OG –Ω–µ—Ç)
- **YandexGPT** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```typescript
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É:
   https://www.wildberries.ru/catalog/12345678/detail.aspx

2. –ü–∞—Ä—Å–∏–º Open Graph –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:
   - og:title = "–¢–æ—Ä–º–æ–∑–Ω—ã–µ –¥–∏—Å–∫–∏ Brembo GT"
   - og:description = "–ü–µ—Ä–µ–¥–Ω–∏–µ –ø–µ—Ä—Ñ–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏—Å–∫–∏..."
   - og:image = "https://..."

3. –ï—Å–ª–∏ OG –Ω–µ—Ç ‚Üí –ø–∞—Ä—Å–∏–º HTML:
   - <h1> –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–æ–≤–∞—Ä–∞
   - <div class="description"> –æ–ø–∏—Å–∞–Ω–∏–µ
   - <span class="price"> —Ü–µ–Ω–∞

4. –ü–µ—Ä–µ–¥–∞–µ–º –≤ YandexGPT –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
   Prompt: "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–æ–≤–∞—Ä –∏ —Å–æ–∑–¥–∞–π –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞:
            –ù–∞–∑–≤–∞–Ω–∏–µ: –¢–æ—Ä–º–æ–∑–Ω—ã–µ –¥–∏—Å–∫–∏ Brembo GT
            –û–ø–∏—Å–∞–Ω–∏–µ: –ü–µ—Ä–µ–¥–Ω–∏–µ –ø–µ—Ä—Ñ–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏—Å–∫–∏..."

5. YandexGPT –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
   {
     "brand": "Brembo",
     "category": "–ê–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–∏",
     "keywords": ["Brembo", "—Ç–æ—Ä–º–æ–∑–Ω—ã–µ –¥–∏—Å–∫–∏", "brake disc", "GT", "–ø–µ—Ä—Ñ–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ"],
     "synonyms": ["—Ç–æ—Ä–º–æ–∑–∞", "—Å—É–ø–ø–æ—Ä—Ç", "—Ç–æ—Ä–º–æ–∑–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"]
   }

6. –ò—â–µ–º –≤ –ë–î:
   SELECT * FROM catalog_verified_products
   WHERE name ILIKE '%Brembo%'
      OR description ILIKE '%—Ç–æ—Ä–º–æ–∑–Ω—ã–µ –¥–∏—Å–∫–∏%'
      OR description ILIKE '%brake disc%'
   LIMIT 20
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å (1-2 –¥–Ω—è)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é AI –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ –î–µ—à–µ–≤–æ (~0.5‚ÇΩ –∑–∞ –∑–∞–ø—Ä–æ—Å)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –¢–æ—á–Ω–æ—Å—Ç—å 60-70%
- ‚ùå –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚ùå –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –æ–ø–∏—Å–∞–Ω–∏–π

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞: 1-2 –¥–Ω—è
- –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è: ~0.5‚ÇΩ –∑–∞ –ø–æ–∏—Å–∫
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: —Ç–µ–∫—É—â–∞—è (YandexGPT)

---

### **–í–ê–†–ò–ê–ù–¢ 2: –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ (—Ç–µ–∫—Å—Ç + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)** ‚≠ê‚≠ê –ó–û–õ–û–¢–ê–Ø –°–ï–†–ï–î–ò–ù–ê

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–°—Å—ã–ª–∫–∞ ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ ‚Üí –¢–µ–∫—Å—Ç + –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫
```

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- **Open Graph –ø–∞—Ä—Å–µ—Ä** + **Cheerio**
- **Yandex Vision** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
- **YandexGPT** –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫**

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```typescript
1. –ü–∞—Ä—Å–∏–º —Å—Å—ã–ª–∫—É ‚Üí –ø–æ–ª—É—á–∞–µ–º:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "Brembo GT —Ç–æ—Ä–º–æ–∑–Ω—ã–µ –¥–∏—Å–∫–∏"
   - –û–ø–∏—Å–∞–Ω–∏–µ: "–ü–µ—Ä–µ–¥–Ω–∏–µ –ø–µ—Ä—Ñ–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ..."
   - URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: "https://..."

2. –°–∫–∞—á–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:
   const imageResponse = await fetch(imageUrl)
   const imageBuffer = await imageResponse.arrayBuffer()
   const imageBase64 = Buffer.from(imageBuffer).toString('base64')

3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (Yandex Vision):
   - Classification: "brake", "automotive", "metal"
   - OCR: "BREMBO", "GT"

4. –û–±—ä–µ–¥–∏–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ YandexGPT:
   Prompt: "–£ –º–µ–Ω—è –µ—Å—Ç—å —Ç–æ–≤–∞—Ä:
            –ù–∞–∑–≤–∞–Ω–∏–µ: Brembo GT —Ç–æ—Ä–º–æ–∑–Ω—ã–µ –¥–∏—Å–∫–∏
            –û–ø–∏—Å–∞–Ω–∏–µ: –ü–µ—Ä–µ–¥–Ω–∏–µ –ø–µ—Ä—Ñ–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ...
            –ù–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏: BREMBO, GT, brake, automotive

            –°–æ–∑–¥–∞–π –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞–Ω–∞–ª–æ–≥–æ–≤"

5. YandexGPT –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
   {
     "brand": "Brembo",
     "category": "–ê–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–∏",
     "textKeywords": ["—Ç–æ—Ä–º–æ–∑–Ω—ã–µ –¥–∏—Å–∫–∏", "brake disc", "–ø–µ—Ä–µ–¥–Ω–∏–µ"],
     "imageKeywords": ["Brembo", "GT", "brake"],
     "synonyms": ["—Ç–æ—Ä–º–æ–∑–∞", "—Å—É–ø–ø–æ—Ä—Ç", "–¥–∏—Å–∫–æ–≤—ã–µ —Ç–æ—Ä–º–æ–∑–∞"],
     "confidence": 0.92
   }

6. –í–∑–≤–µ—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –ë–î:
   - 50% –≤–µ—Å - —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
   - 30% –≤–µ—Å - —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - 20% –≤–µ—Å - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏ –±—Ä–µ–Ω–¥
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –¢–æ—á–Ω–æ—Å—Ç—å 75-85%
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–ª–æ—Ö–æ–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –î–æ—Ä–æ–∂–µ (~1‚ÇΩ –∑–∞ –∑–∞–ø—Ä–æ—Å: –ø–∞—Ä—Å–∏–Ω–≥ + Vision + GPT)
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (5-10 —Å–µ–∫—É–Ω–¥)
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –∫–æ–¥–∞ (3-4 –¥–Ω—è)

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞: 3-4 –¥–Ω—è
- –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è: ~1‚ÇΩ –∑–∞ –ø–æ–∏—Å–∫
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: —Ç–µ–∫—É—â–∞—è

---

### **–í–ê–†–ò–ê–ù–¢ 3: Vector Embeddings + —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** üöÄ ENTERPRISE

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–°—Å—ã–ª–∫–∞ ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ ‚Üí Embeddings ‚Üí Vector Search –≤ Supabase pgvector
```

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- **OpenAI Embeddings** –∏–ª–∏ **Sentence-BERT**
- **Supabase pgvector** (–≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PostgreSQL)
- **Multimodal embeddings** (—Ç–µ–∫—Å—Ç + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```typescript
1. –ü–∞—Ä—Å–∏–º —Ç–æ–≤–∞—Ä —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞

2. –°–æ–∑–¥–∞–µ–º embeddings –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è:
   const embedding = await openai.embeddings.create({
     model: "text-embedding-3-small",
     input: "–¢–æ—Ä–º–æ–∑–Ω—ã–µ –¥–∏—Å–∫–∏ Brembo GT –ø–µ—Ä–µ–¥–Ω–∏–µ –ø–µ—Ä—Ñ–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ..."
   })
   // –ü–æ–ª—É—á–∞–µ–º –≤–µ–∫—Ç–æ—Ä [1536 —á–∏—Å–µ–ª]

3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞:
   ALTER TABLE catalog_verified_products
   ADD COLUMN embedding vector(1536)

4. –ò—â–µ–º –ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã (–∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ):
   SELECT *,
          1 - (embedding <=> query_embedding) as similarity
   FROM catalog_verified_products
   WHERE 1 - (embedding <=> query_embedding) > 0.7
   ORDER BY similarity DESC
   LIMIT 20
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –¢–æ—á–Ω–æ—Å—Ç—å 85-95%
- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
- ‚úÖ –ü–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Å–∏–Ω–æ–Ω–∏–º—ã

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚ùå –î–æ—Ä–æ–≥–æ –¥–ª—è OpenAI ($0.02 –∑–∞ 1K —Ç–æ–∫–µ–Ω–æ–≤)
- ‚ùå –°–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (5-7 –¥–Ω–µ–π)
- ‚ùå –¢—Ä–µ–±—É–µ—Ç pgvector –≤ Supabase

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞: 5-7 –¥–Ω–µ–π
- –ü–µ—Ä–≤–∏—á–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è: ~$5-10 (–¥–ª—è 100K —Ç–æ–≤–∞—Ä–æ–≤)
- –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è: ~$0.01 –∑–∞ –ø–æ–∏—Å–∫ (~1‚ÇΩ)
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: —Ç—Ä–µ–±—É–µ—Ç—Å—è pgvector

---

### **–í–ê–†–ò–ê–ù–¢ 4: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥** üéØ –û–ü–¢–ò–ú–ê–õ–¨–ù–´–ô

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –í–∞—Ä–∏–∞–Ω—Ç–∞ 1 –∏ –í–∞—Ä–∏–∞–Ω—Ç–∞ 2 —Å —Ñ–æ–ª–ª–±—ç–∫–æ–º:

```typescript
async function searchProductByUrl(url: string) {
  // 1. –ü–∞—Ä—Å–∏–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–±—ã—Å—Ç—Ä–æ)
  const metadata = await parseOpenGraph(url)

  // 2. –ü—Ä–æ–±—É–µ–º –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
  let results = await simpleTextSearch(metadata.title, metadata.description)

  // 3. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ < 3 —Ç–æ–≤–∞—Ä–æ–≤ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  if (results.length < 3 && metadata.image) {
    const imageAnalysis = await analyzeImage(metadata.image)
    results = await multimodalSearch(metadata, imageAnalysis)
  }

  // 4. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –º–∞–ª–æ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º YandexGPT –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
  if (results.length < 5) {
    const enrichedKeywords = await enrichWithGPT(metadata)
    results = await expandedSearch(enrichedKeywords)
  }

  return results
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ
- ‚úÖ –ë—ã—Å—Ç—Ä–æ –≤ 70% —Å–ª—É—á–∞–µ–≤ (–ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫)
- ‚úÖ –¢–æ—á–Ω–æ –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç AI)
- ‚úÖ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –ª–æ–≥–∏–∫–∞
- ‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (1-10 —Å–µ–∫)

---

## üõ†Ô∏è –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (–í–∞—Ä–∏–∞–Ω—Ç 1 - –†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å –Ω–µ–≥–æ)

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (–î–µ–Ω—å 1)
```typescript
// –°–æ–∑–¥–∞—Ç—å API endpoint
POST /api/catalog/search-by-url

// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
npm install open-graph-scraper cheerio

// –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
1. –ü–∞—Ä—Å–∏–Ω–≥ Open Graph –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
2. Fallback –ø–∞—Ä—Å–∏–Ω–≥ HTML –µ—Å–ª–∏ OG –Ω–µ—Ç
3. –ë–∞–∑–æ–≤—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –≤ –ë–î
```

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YandexGPT (–î–µ–Ω—å 2)
```typescript
// –£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —á–µ—Ä–µ–∑ AI
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å parsed –¥–∞–Ω–Ω—ã–µ –≤ YandexGPT
2. –ü–æ–ª—É—á–∏—Ç—å –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
3. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏
4. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```

### –≠—Ç–∞–ø 3: UI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–î–µ–Ω—å 2)
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ CatalogDropdown.tsx
1. –ü–æ–ª–µ –≤–≤–æ–¥–∞ URL
2. –ö–Ω–æ–ø–∫–∞ "–ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ"
3. –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
```

### –≠—Ç–∞–ø 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–î–µ–Ω—å 3)
```typescript
1. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
4. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

---

## üí∞ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –í–∞—Ä–∏–∞–Ω—Ç 1 | –í–∞—Ä–∏–∞–Ω—Ç 2 | –í–∞—Ä–∏–∞–Ω—Ç 3 | –í–∞—Ä–∏–∞–Ω—Ç 4 |
|----------|-----------|-----------|-----------|-----------|
| **–¢–æ—á–Ω–æ—Å—Ç—å** | 60-70% | 75-85% | 85-95% | 75-90% |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | 1-2 —Å–µ–∫ | 5-10 —Å–µ–∫ | 2-3 —Å–µ–∫ | 1-10 —Å–µ–∫ |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å/–∑–∞–ø—Ä–æ—Å** | 0.5‚ÇΩ | 1‚ÇΩ | 1‚ÇΩ | 0.5-1‚ÇΩ |
| **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞** | 1-2 –¥–Ω—è | 3-4 –¥–Ω—è | 5-7 –¥–Ω–µ–π | 3-4 –¥–Ω—è |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚úÖ | ‚úÖ | ‚úÖ‚úÖ‚úÖ | ‚úÖ‚úÖ |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### **–ù–∞—á–∞—Ç—å —Å –í–∞—Ä–∏–∞–Ω—Ç–∞ 1**, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. **–ë—ã—Å—Ç—Ä–æ –≤–Ω–µ–¥—Ä–∏—Ç—å** (1-2 –¥–Ω—è) ‚Üí –±—ã—Å—Ç—Ä—ã–π feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–î–µ—à–µ–≤–æ** (~0.5‚ÇΩ –∑–∞ –∑–∞–ø—Ä–æ—Å) ‚Üí –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ —Ä–∏—Å–∫–æ–≤
3. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É** ‚Üí –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–æ–≤–æ–≥–æ
4. **–õ–µ–≥–∫–æ —É–ª—É—á—à–∏—Ç—å** ‚Üí –ø–æ—Ç–æ–º –¥–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–í–∞—Ä–∏–∞–Ω—Ç 2) –∏–ª–∏ embeddings (–í–∞—Ä–∏–∞–Ω—Ç 3)

### –ü—É—Ç—å —Ä–∞–∑–≤–∏—Ç–∏—è:
```
–≠—Ç–∞–ø 1: –í–∞—Ä–∏–∞–Ω—Ç 1 (—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫) ‚Üí MVP –∑–∞ 2 –¥–Ω—è
         ‚Üì
–≠—Ç–∞–ø 2: –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Üí —Ç–æ—á–Ω–æ—Å—Ç—å +15%
         ‚Üì
–≠—Ç–∞–ø 3: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –≤–Ω–µ–¥—Ä–∏—Ç—å embeddings ‚Üí —Ç–æ—á–Ω–æ—Å—Ç—å +10%
```

---

## üìù –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (–í–∞—Ä–∏–∞–Ω—Ç 1)

```typescript
// app/api/catalog/search-by-url/route.ts
import { NextRequest, NextResponse } from 'next/server'
import ogs from 'open-graph-scraper'
import { getYandexGPTService } from '@/lib/services/YandexGPTService'
import { supabase } from '@/lib/supabaseClient'

export async function POST(request: NextRequest) {
  try {
    const { url } = await request.json()

    // 1. –ü–∞—Ä—Å–∏–º Open Graph
    const { result } = await ogs({ url })
    const title = result.ogTitle || result.twitterTitle || ''
    const description = result.ogDescription || result.twitterDescription || ''

    console.log('üì¶ –¢–æ–≤–∞—Ä —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞:', { title, description })

    // 2. –û–±–æ–≥–∞—â–∞–µ–º —á–µ—Ä–µ–∑ YandexGPT
    const gptService = getYandexGPTService()
    const analysis = await gptService.analyzeProduct(title, description)

    console.log('ü§ñ –ê–Ω–∞–ª–∏–∑ GPT:', analysis)

    // 3. –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
    const searchTerms = [
      ...analysis.keywords,
      analysis.brand,
      analysis.category
    ].filter(Boolean)

    // 4. –ò—â–µ–º –≤ –ë–î
    let query = supabase
      .from('catalog_verified_products')
      .select('*')
      .eq('is_active', true)

    // –î–æ–±–∞–≤–ª—è–µ–º ILIKE —É—Å–ª–æ–≤–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞
    const conditions = searchTerms.map(term =>
      `name.ilike.%${term}%,description.ilike.%${term}%`
    ).join(',')

    query = query.or(conditions)

    const { data: products, error } = await query.limit(20)

    if (error) throw error

    return NextResponse.json({
      success: true,
      metadata: { title, description },
      analysis,
      products,
      productsCount: products?.length || 0
    })

  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –ø–æ URL:', error)
    return NextResponse.json(
      { error: '–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä' },
      { status: 500 }
    )
  }
}
```

---

## üîç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã

–° Open Graph –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
- ‚úÖ Wildberries (og:title, og:description, og:image)
- ‚úÖ Ozon (og:title, og:description, og:image)
- ‚úÖ AliExpress (og:title, og:description, og:image)
- ‚úÖ –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç (og –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
- ‚úÖ Amazon (og –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
- ‚úÖ –°–±–µ—Ä–ú–µ–≥–∞–ú–∞—Ä–∫–µ—Ç (og –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)

–î–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ –±–µ–∑ OG ‚Üí fallback –Ω–∞ HTML –ø–∞—Ä—Å–∏–Ω–≥.

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
1. **–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø–æ–∏—Å–∫–æ–≤** (–Ω–∞–π–¥–µ–Ω–æ > 0 —Ç–æ–≤–∞—Ä–æ–≤)
2. **–°—Ä–µ–¥–Ω—è—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–Ω—É–ª –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç?)
3. **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞** (—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ–∏—Å–∫?)
4. **–°—Ç–æ–∏–º–æ—Å—Ç—å** (—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç 1000 –∑–∞–ø—Ä–æ—Å–æ–≤?)

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è

1. **–ö–∞–∫–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã?** (Wildberries? Ozon? –í—Å–µ?)
2. **–ö–∞–∫–æ–π –±—é–¥–∂–µ—Ç –Ω–∞ AI –∑–∞–ø—Ä–æ—Å—ã?** (100‚ÇΩ/–¥–µ–Ω—å? 1000‚ÇΩ/–¥–µ–Ω—å?)
3. **–°–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ?** (–≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥–∞)
4. **–ù—É–∂–Ω–∞ –ª–∏ –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (90%+)?** (–µ—Å–ª–∏ –¥–∞ ‚Üí –í–∞—Ä–∏–∞–Ω—Ç 3)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–í—ã–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç** (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –í–∞—Ä–∏–∞–Ω—Ç 1)
2. **–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á–∏** –≤ TodoList
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å MVP** –∑–∞ 1-2 –¥–Ω—è
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–∫–∞—Ö
5. **–ò—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å** –Ω–∞ –æ—Å–Ω–æ–≤–µ feedback

---

**–ê–≤—Ç–æ—Ä:** Claude Code
**–î–∞—Ç–∞:** 31.10.2025
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –æ–±—Å—É–∂–¥–µ–Ω–∏—é
