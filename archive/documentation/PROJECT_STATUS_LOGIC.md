# –õ–æ–≥–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

## –û–±–∑–æ—Ä —Å—Ç–∞—Ç—É—Å–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
- `draft` - –ß–µ—Ä–Ω–æ–≤–∏–∫, –ø—Ä–æ–µ–∫—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
- `in_progress` - –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- `waiting_approval` - –û–∂–∏–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- `waiting_receipt` - –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–º
- `receipt_approved` - –ß–µ–∫ –∫–ª–∏–µ–Ω—Ç–∞ –æ–¥–æ–±—Ä–µ–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- `receipt_rejected` - –ß–µ–∫ –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–∫–ª–æ–Ω—ë–Ω
- `filling_requisites` - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
- `waiting_manager_receipt` - **–î–û–ë–ê–í–õ–ï–ù**: –û–∂–∏–¥–∞–Ω–∏–µ —á–µ–∫–∞ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- `in_work` - –í —Ä–∞–±–æ—Ç–µ (—á–µ–∫ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω)
- `completed` - –ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à—ë–Ω

## –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –Ω–∞ —à–∞–≥–∏

| –®–∞–≥ | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|---------|----------|
| 1 | –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏ | `draft` | –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ |
| 2 | –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–º | `in_progress`, `waiting_approval`, `receipt_rejected` | –ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —á–µ–∫ |
| 3 | –û–∂–∏–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è | `waiting_receipt`, `receipt_approved` | –ú–µ–Ω–µ–¥–∂–µ—Ä –æ–¥–æ–±—Ä—è–µ—Ç —á–µ–∫ |
| 4 | –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã | - | –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —à–∞–≥ |
| 5 | –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ | - | –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —à–∞–≥ |
| 6 | –ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ–∫–∞ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞ | `waiting_manager_receipt`, `in_work` | **–ö–ª—é—á–µ–≤–æ–π —à–∞–≥** |
| 7 | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ | `completed` | –ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à—ë–Ω |

## –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏

```
draft ‚Üí in_progress
in_progress ‚Üí waiting_approval | receipt_rejected
waiting_approval ‚Üí waiting_receipt | receipt_rejected  
waiting_receipt ‚Üí receipt_approved | receipt_rejected
receipt_approved ‚Üí filling_requisites
receipt_rejected ‚Üí in_progress
filling_requisites ‚Üí waiting_manager_receipt
waiting_manager_receipt ‚Üí in_work
in_work ‚Üí completed
```

## –õ–æ–≥–∏–∫–∞ 6 —à–∞–≥–∞ (–∫–ª—é—á–µ–≤–∞—è)

### –î–æ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- **–°—Ç–∞—Ç—É—Å**: `waiting_manager_receipt`
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: "‚è≥ –û–∂–∏–¥–∞–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ–∫–∞ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞. –ú—ã —É–≤–µ–¥–æ–º–∏–º –≤–∞—Å, –∫–æ–≥–¥–∞ —á–µ–∫ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤."
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ü–µ—Ä–µ—Ö–æ–¥ —Å 5 —à–∞–≥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç —Å—Ç–∞—Ç—É—Å

### –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º  
- **–°—Ç–∞—Ç—É—Å**: `in_work`
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: "‚úÖ –ß–µ–∫ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É!"
- **–î–µ–π—Å—Ç–≤–∏–µ**: Webhook –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞

## Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä—É
1. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ 6 —à–∞–≥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞"
2. –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∑–∫–∏
3. –ú–µ–Ω–µ–¥–∂–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª –≤ reply ‚Üí webhook –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ: `{client_receipt: "...", manager_receipt: "...", manager_uploaded_at: "..."}`
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è —Å `waiting_manager_receipt` –Ω–∞ `in_work`

## –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- ‚úÖ –¢–∏–ø—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤ (`lib/types/project-status.ts`)
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ (`components/ui/ProjectStatus.tsx`)
- ‚úÖ –õ–æ–≥–∏–∫–∞ Step5 —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –Ω–∞ `waiting_manager_receipt`
- ‚úÖ –õ–æ–≥–∏–∫–∞ Step6 —Å —Ä–∞–∑–ª–∏—á–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - enum —Å—Ç–∞—Ç—É—Å `waiting_manager_receipt` –¥–æ–±–∞–≤–ª–µ–Ω**

### üîÑ –í —Ä–∞–±–æ—Ç–µ
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ñ–ª–æ—É —Å –Ω–æ–≤—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

## SQL –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ (–í–´–ü–û–õ–ù–ï–ù–û)

```sql
ALTER TYPE project_status ADD VALUE IF NOT EXISTS 'waiting_manager_receipt';
```

## –§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ó–ê–í–ï–†–®–ï–ù–û)

- ‚úÖ `lib/types/project-status.ts` - —Ç–∏–ø—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- ‚úÖ `components/ui/ProjectStatus.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ `app/dashboard/create-project/steps/Step5RequisiteSelectForm.tsx` - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 6 —à–∞–≥  
- ‚úÖ `app/dashboard/create-project/steps/Step6ReceiptForClient.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ `app/api/telegram-webhook/route.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ enum –∑–Ω–∞—á–µ–Ω–∏—è

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ–∫–æ–≤

–ß–µ–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ:
```json
{
  "client_receipt": "URL_—á–µ–∫–∞_–∫–ª–∏–µ–Ω—Ç–∞",
  "manager_receipt": "URL_—á–µ–∫–∞_–º–µ–Ω–µ–¥–∂–µ—Ä–∞", 
  "manager_uploaded_at": "2025-06-17T23:23:33.897Z"
}
```

## –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ 6 —à–∞–≥–µ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π ("–æ–∂–∏–¥–∞–Ω–∏–µ" vs "–≥–æ—Ç–æ–≤")
- ‚úÖ –†–∞–±–æ—á–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å `waiting_manager_receipt` –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
