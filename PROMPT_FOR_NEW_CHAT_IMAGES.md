# üî¥ –ü–†–û–ë–õ–ï–ú–ê: –ö–∞—Ä—Ç–∏–Ω–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ UI

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–†–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤.

**–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. ‚úÖ –°–æ–∑–¥–∞–Ω API `/api/catalog/products/import-from-url` –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤
2. ‚úÖ API —Å–∫–∞—á–∏–≤–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å –≤–Ω–µ—à–Ω–∏—Ö URL –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Supabase Storage
3. ‚úÖ –ö–∞—Ä—Ç–∏–Ω–∫–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –±–∞–∫–µ—Ç `product-images`
4. ‚úÖ –¢–æ–≤–∞—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î —Å –ø—É–±–ª–∏—á–Ω—ã–º–∏ URL –∏–∑ Storage
5. ‚úÖ –¢–æ–≤–∞—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ UI –∫–∞—Ç–∞–ª–æ–≥–∞

**–ù–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞:**
‚ùå –ö–∞—Ä—Ç–∏–Ω–∫–∏ –ù–ï –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–µ—Ä–∞—è –∏–∫–æ–Ω–∫–∞ placeholder

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### 1. –¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä –≤ –ë–î
```
ID: 4f7dd6a8-1302-42b0-b362-73abeff07511
–ù–∞–∑–≤–∞–Ω–∏–µ: –°–º–∞—Ä—Ç—Ñ–æ–Ω Apple iPhone 15 Pro Max 256GB
–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –¢–ï–°–¢–û–í–ê–Ø
–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è ID: 731e04c6-875d-492f-a460-e8e248c75e5b
–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –ë–î: https://ejkhdhexkadecpbjjmsz.supabase.co/storage/v1/object/public/product-images/imported/1764245612544_smartfon_apple_iphone_15_pro_max_256gb.jpeg
```

### 2. –§–∞–π–ª –≤ Storage
```
–ë–∞–∫–µ—Ç: product-images
–ü—É—Ç—å: imported/1764245612544_smartfon_apple_iphone_15_pro_max_256gb.jpeg
–†–∞–∑–º–µ—Ä: 1.1 MB
–ó–∞–≥—Ä—É–∂–µ–Ω: ‚úÖ –£—Å–ø–µ—à–Ω–æ
```

### 3. UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç
- –¢–æ–≤–∞—Ä –≤–∏–¥–µ–Ω –≤ –∫–∞—Ç–∞–ª–æ–≥–µ ‚úÖ
- –ù–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω–∞, –æ–ø–∏—Å–∞–Ω–∏–µ - –≤—Å—ë –û–ö ‚úÖ
- –ö–∞—Ä—Ç–∏–Ω–∫–∞ –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è ‚ùå (—Å–µ—Ä–∞—è –∏–∫–æ–Ω–∫–∞ placeholder)

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. CORS –ø–æ–ª–∏—Ç–∏–∫–∞ Storage
Supabase Storage –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø —Å localhost

### 2. –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∫–µ—Ç—É
–ë–∞–∫–µ—Ç `product-images` –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### 3. RLS (Row Level Security) –ø–æ–ª–∏—Ç–∏–∫–∏
–ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –≤ Supabase –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø

### 4. CSP (Content Security Policy)
Next.js –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Å Supabase –¥–æ–º–µ–Ω–∞

### 5. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
URL –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### –ó–ê–î–ê–ß–ê 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏
```bash
# –ü–æ–ø—Ä–æ–±—É–π –æ—Ç–∫—Ä—ã—Ç—å URL –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ
https://ejkhdhexkadecpbjjmsz.supabase.co/storage/v1/object/public/product-images/imported/1764245612544_smartfon_apple_iphone_15_pro_max_256gb.jpeg

# –ò–ª–∏ —á–µ—Ä–µ–∑ curl
curl -I "https://ejkhdhexkadecpbjjmsz.supabase.co/storage/v1/object/public/product-images/imported/1764245612544_smartfon_apple_iphone_15_pro_max_256gb.jpeg"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 200 –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–ï—Å–ª–∏ 404 –∏–ª–∏ 403:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É–±–ª–∏—á–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –±–∞–∫–µ—Ç—É

---

### –ó–ê–î–ê–ß–ê 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∫–µ—Ç—É

–í Supabase Dashboard:

1. Storage ‚Üí Buckets ‚Üí `product-images`
2. Settings ‚Üí Public bucket: **ON** ‚úÖ
3. Policies ‚Üí –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É:
   ```sql
   -- –ü–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è
   CREATE POLICY "Public read access"
   ON storage.objects FOR SELECT
   USING (bucket_id = 'product-images');
   ```

---

### –ó–ê–î–ê–ß–ê 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –≤ next.config.js

–§–∞–π–ª: `/Users/user/Desktop/godplisgomvp-forvercel/next.config.js`

–î–æ–±–∞–≤–∏—Ç—å Supabase –¥–æ–º–µ–Ω –≤ `remotePatterns`:

```javascript
images: {
  remotePatterns: [
    {
      protocol: 'https',
      hostname: 'ejkhdhexkadecpbjjmsz.supabase.co',
      port: '',
      pathname: '/storage/v1/object/public/**',
    },
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ
  ]
}
```

---

### –ó–ê–î–ê–ß–ê 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ProductCard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

–§–∞–π–ª: `/Users/user/Desktop/godplisgomvp-forvercel/app/dashboard/catalog/components/ProductCard.tsx`

–°—Ç—Ä–æ–∫–∞ 54-64: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `<img>` —Ç–µ–≥ (–ù–ï Next.js `<Image>`), –ø–æ—ç—Ç–æ–º—É `remotePatterns` –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è.

**–ü—Ä–æ–≤–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
- –í–∫–ª–∞–¥–∫–∞ Console
- –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤–∏–¥–∞:
  ```
  ‚ùå –û–®–ò–ë–ö–ê –ó–ê–ì–†–£–ó–ö–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø –¢–û–í–ê–†–ê ...
  ```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–∏—á–∏–Ω—É (CORS, 404, 403, etc.)

---

### –ó–ê–î–ê–ß–ê 5: –í—Ä–µ–º–µ–Ω–Ω—ã–π workaround

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vercel Blob Storage –≤–º–µ—Å—Ç–æ Supabase Storage:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
   ```bash
   npm install @vercel/blob
   ```

2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –≤ `import-from-url/route.ts`:
   ```typescript
   import { put } from '@vercel/blob'

   async function downloadAndUploadImage(imageUrl: string, productName: string) {
     const response = await fetch(imageUrl)
     const blob = await response.blob()

     const fileName = `imported/${Date.now()}_${sanitizedName}.jpeg`
     const blobData = await put(fileName, blob, {
       access: 'public',
       addRandomSuffix: false
     })

     return blobData.url // Vercel Blob URL (—Ç–æ—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)
   }
   ```

---

## –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

1. **API –∏–º–ø–æ—Ä—Ç–∞:**
   `/Users/user/Desktop/godplisgomvp-forvercel/app/api/catalog/products/import-from-url/route.ts`

2. **ProductCard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:**
   `/Users/user/Desktop/godplisgomvp-forvercel/app/dashboard/catalog/components/ProductCard.tsx`

3. **Next.js –∫–æ–Ω—Ñ–∏–≥:**
   `/Users/user/Desktop/godplisgomvp-forvercel/next.config.js`

4. **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**
   `/Users/user/Desktop/godplisgomvp-forvercel/scripts/test-import-with-storage.js`

---

## –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–æ–≤–∞—Ä –≤ –ë–î —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º URL
curl -s 'http://localhost:3000/api/catalog/products?supplier_type=verified&category=–¢–ï–°–¢–û–í–ê–Ø' | jq '.products[] | {name, images}'

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏
curl -I "https://ejkhdhexkadecpbjjmsz.supabase.co/storage/v1/object/public/product-images/imported/1764245612544_smartfon_apple_iphone_15_pro_max_256gb.jpeg"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
# –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Console ‚Üí –ò—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
```

---

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚úÖ –í UI –∫–∞—Ç–∞–ª–æ–≥–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (–ù–ï —Å–µ—Ä–∞—è –∏–∫–æ–Ω–∫–∞)
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ù–ï–¢ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### Supabase –ø—Ä–æ–µ–∫—Ç:
```
Project ID: ejkhdhexkadecpbjjmsz
URL: https://ejkhdhexkadecpbjjmsz.supabase.co
Storage: https://ejkhdhexkadecpbjjmsz.supabase.co/storage/v1
```

### Env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (.env.local):
```
NEXT_PUBLIC_SUPABASE_URL=https://ejkhdhexkadecpbjjmsz.supabase.co
SUPABASE_SERVICE_ROLE_KEY=[–µ—Å—Ç—å –≤ .env.local]
```

### Dev —Å–µ—Ä–≤–µ—Ä:
```bash
npm run dev
# http://localhost:3000
```

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á

**–ö–†–ò–¢–ò–ß–ù–û:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ/curl
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∫–µ—Ç—É `product-images`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

**–í–ê–ñ–ù–û:**
4. –î–æ–±–∞–≤–∏—Ç—å Supabase –¥–æ–º–µ–Ω –≤ `next.config.js` (—Ö–æ—Ç—è –¥–ª—è `<img>` –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase

**–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û:**
6. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Vercel Blob Storage (–µ—Å–ª–∏ Supabase Storage –ø—Ä–æ–±–ª–µ–º–Ω—ã–π)

---

## –°–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–æ–±–ª–µ–º—ã

UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –¢–æ–≤–∞—Ä: "–°–º–∞—Ä—Ç—Ñ–æ–Ω Apple iPhone 15 Pro Max 256GB"
- –ö–∞—Ä—Ç–∏–Ω–∫–∞: –°–µ—Ä–∞—è –∏–∫–æ–Ω–∫–∞ placeholder (‚ùå)
- –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ: –û–ö ‚úÖ

**–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ù–∞—Å—Ç–æ—è—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ iPhone –≤–º–µ—Å—Ç–æ —Å–µ—Ä–æ–π –∏–∫–æ–Ω–∫–∏

---

## –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

1. –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç curl –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ URL –∫–∞—Ä—Ç–∏–Ω–∫–∏? (200, 404, 403?)
2. –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞? (CORS, CSP, 404?)
3. –ë–∞–∫–µ—Ç `product-images` - –ø—É–±–ª–∏—á–Ω—ã–π? (Public bucket = ON?)
4. –ï—Å—Ç—å –ª–∏ RLS –ø–æ–ª–∏—Ç–∏–∫–∏, –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –¥–æ—Å—Ç—É–ø?

–û—Ç–≤–µ—Ç—ã –Ω–∞ —ç—Ç–∏ –≤–æ–ø—Ä–æ—Å—ã —Å—Ä–∞–∑—É –ø–æ–∫–∞–∂—É—Ç –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–±–ª–µ–º—ã.

---

**–ù–ê–ß–ù–ò –° –≠–¢–û–ì–û:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏
curl -I "https://ejkhdhexkadecpbjjmsz.supabase.co/storage/v1/object/public/product-images/imported/1764245612544_smartfon_apple_iphone_15_pro_max_256gb.jpeg"

# 2. –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ Console (F12) –∏ –ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –æ—à–∏–±–∫–∏
# –ü–µ—Ä–µ–π–¥–∏ –Ω–∞: http://localhost:3000/dashboard/catalog
# –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –¢–ï–°–¢–û–í–ê–Ø ‚Üí –¢–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
```

–≠—Ç–æ –¥–∞—Å—Ç –≥–ª–∞–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã! üîç
