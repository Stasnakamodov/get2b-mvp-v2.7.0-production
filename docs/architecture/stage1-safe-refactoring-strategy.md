# üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–ê–Ø –°–¢–†–ê–¢–ï–ì–ò–Ø –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê STAGE 1

## üéØ –¶–µ–ª—å
–í—ã–Ω–µ—Å—Ç–∏ 2560 —Å—Ç—Ä–æ–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ Stage 1 –≤ —Ö—É–∫–∏ –ë–ï–ó –ø–æ—Ç–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏ –ë–ï–ó –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫.

## ‚ö†Ô∏è –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
**Stage 1 - —ç—Ç–æ –∫–ª—É–±–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- 35 useState —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π
- 17 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤—ã–∑—ã–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ (Step 4 ‚Üî Step 5)
- OCR –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ö–∞—Ç–∞–ª–æ–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç Step 2, 4, 5

**–ù–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –≤—ã—Ä–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ —Ö—É–∫!**

---

## üß† –°–¢–†–ê–¢–ï–ì–ò–Ø: "–í–ï–†–¢–ò–ö–ê–õ–¨–ù–ê–Ø –î–ï–ö–û–ú–ü–û–ó–ò–¶–ò–Ø"

–í–º–µ—Å—Ç–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è (–≤—Å–µ —Ö—É–∫–∏ —Å—Ä–∞–∑—É), –¥–µ–ª–∞–µ–º **–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ä–µ–∑—ã** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏—á–∏ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞.

### –ü—Ä–∏–Ω—Ü–∏–ø:
1. ‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å**: –ù–∞–π—Ç–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é —Ñ–∏—á—É —Å –º–∏–Ω–∏–º—É–º–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. ‚úÖ **–ò–∑–≤–ª–µ—á—å**: –í—ã–Ω–µ—Å—Ç–∏ –í–°–Æ –ª–æ–≥–∏–∫—É —ç—Ç–æ–π —Ñ–∏—á–∏ –≤ —Ö—É–∫/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç
3. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å**: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ñ–∏—á–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ **–ö–æ–º–º–∏—Ç**: –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. ‚úÖ **–ü–æ–≤—Ç–æ—Ä–∏—Ç—å**: –°–ª–µ–¥—É—é—â–∞—è —Ñ–∏—á–∞

---

## üìã –ü–õ–ê–ù –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê (5 –í–ï–†–¢–ò–ö–ê–õ–¨–ù–´–• –°–†–ï–ó–û–í)

### üü¢ –°–†–ï–ó 1: TEMPLATE SYSTEM (–°–∞–º—ã–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠êÔ∏è –õ–µ–≥–∫–æ
**–°—Ç—Ä–æ–∫:** ~200
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ú–∏–Ω–∏–º—É–º (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ templates –∏–∑ —Ö—É–∫–∞)

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ–º:**
- –°–æ—Å—Ç–æ—è–Ω–∏—è: `templateSelection`, `selectedTemplateId`
- –§—É–Ω–∫—Ü–∏–∏: `handleTemplateSelect`, `applyTemplate`
- UI: –£–∂–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (–Ω–∏—á–µ–≥–æ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º)

**–°–æ–∑–¥–∞—ë–º —Ö—É–∫:**
```typescript
// hooks/useTemplateSystem.ts
export function useTemplateSystem({
  templates,
  setManualData,
  setStepConfigs,
  closeModal
}) {
  const [templateSelection, setTemplateSelection] = useState(false)
  const [selectedTemplateId, setSelectedTemplateId] = useState<string | null>(null)

  const handleTemplateSelect = (templateId: string) => { /* ... */ }
  const applyTemplate = (template: Template) => { /* ... */ }

  return {
    templateSelection,
    setTemplateSelection,
    selectedTemplateId,
    handleTemplateSelect,
    applyTemplate
  }
}
```

**–¢–µ—Å—Ç:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–∏–ª–∏—Å—å

**–ö–æ–º–º–∏—Ç:** `refactor(stage1): Extract template system to useTemplateSystem hook`

---

### üü° –°–†–ï–ó 2: OCR UPLOAD (–°—Ä–µ–¥–Ω—è—è –∏–∑–æ–ª—è—Ü–∏—è)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠êÔ∏è‚≠êÔ∏è –°—Ä–µ–¥–Ω–µ
**–°—Ç—Ä–æ–∫:** ~400
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç Step 1-2, –Ω–æ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö —Ñ–∏—á

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ–º:**
- –°–æ—Å—Ç–æ—è–Ω–∏—è: `uploadedFiles`, `uploadErrors`, `uploadingStep`
- –§—É–Ω–∫—Ü–∏–∏: `handleOcrUpload`, `processOcrResult`, `handleFileSelect`
- OCR –∞–Ω–∞–ª–∏–∑: `analyzeOcrData` (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π)

**–°–æ–∑–¥–∞—ë–º —Ö—É–∫:**
```typescript
// hooks/useOcrUpload.ts
export function useOcrUpload({
  supabase,
  setManualData,
  setStepConfigs,
  setAutoFillNotification
}) {
  const [uploadedFiles, setUploadedFiles] = useState<Record<string, string>>({})
  const [uploadErrors, setUploadErrors] = useState<Record<number, string>>({})
  const [uploadingStep, setUploadingStep] = useState<number | null>(null)

  const handleOcrUpload = async (stepId: number, file: File) => { /* ... */ }
  const processOcrResult = (stepId: number, ocrData: any) => { /* ... */ }

  return {
    uploadedFiles,
    uploadErrors,
    uploadingStep,
    handleOcrUpload,
    isUploading: uploadingStep !== null
  }
}
```

**–¢–µ—Å—Ç:** –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—á—ë—Ç ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Step 1 –∏ 2 –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–∏–ª–∏—Å—å

**–ö–æ–º–º–∏—Ç:** `refactor(stage1): Extract OCR upload to useOcrUpload hook`

---

### üü† –°–†–ï–ó 3: MANUAL DATA MANAGEMENT (–ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠êÔ∏è‚≠êÔ∏è –°—Ä–µ–¥–Ω–µ
**–°—Ç—Ä–æ–∫:** ~300
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç, –Ω–æ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ–º:**
- –°–æ—Å—Ç–æ—è–Ω–∏—è: `manualData`
- –§—É–Ω–∫—Ü–∏–∏: `handleManualDataSave`, `handleRemoveSource`, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –£—Ç–∏–ª–∏—Ç—ã: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º

**–°–æ–∑–¥–∞—ë–º —Ö—É–∫:**
```typescript
// hooks/useStepData.ts
export function useStepData({
  stepConfigs,
  setStepConfigs,
  checkSummaryReadiness
}) {
  const [manualData, setManualData] = useState<Record<number, any>>({})

  const saveStepData = (stepId: StepNumber, data: any) => {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    const validation = validateStepData(stepId, data)
    if (!validation.success) {
      return { success: false, errors: validation.errors }
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    setManualData(prev => ({ ...prev, [stepId]: data }))
    setStepConfigs(prev => ({ ...prev, [stepId]: 'manual' }))

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
    checkSummaryReadiness()

    return { success: true }
  }

  const removeStepData = (stepId: number) => { /* ... */ }

  return {
    manualData,
    saveStepData,
    removeStepData
  }
}
```

**–¢–µ—Å—Ç:** –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚Üí —É–¥–∞–ª–∏—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å states

**–ö–æ–º–º–∏—Ç:** `refactor(stage1): Extract manual data management to useStepData hook`

---

### üî¥ –°–†–ï–ó 4: CATALOG INTEGRATION (–°–ª–æ–∂–Ω–∞—è —Å–≤—è–∑—å)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è –°–ª–æ–∂–Ω–æ
**–°—Ç—Ä–æ–∫:** ~600
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç Step 2, 4, 5 + Blue/Orange rooms

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ–º:**
- –°–æ—Å—Ç–æ—è–Ω–∏—è: `blueRoomSuppliers`, `showCatalogModal`, —Ä–µ–∂–∏–º—ã –≤—ã–±–æ—Ä–∞
- –§—É–Ω–∫—Ü–∏–∏:
  - `handleCatalogProductsAdd` (188 —Å—Ç—Ä–æ–∫) - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
  - `handleSelectBlueRoomSupplier` (131 —Å—Ç—Ä–æ–∫–∞) - —Å–∏–Ω—è—è –∫–æ–º–Ω–∞—Ç–∞
  - `handleSelectOrangeRoomSupplier` (114 —Å—Ç—Ä–æ–∫) - –æ—Ä–∞–Ω–∂–µ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: Step 2 ‚Üí Step 4 ‚Üí Step 5

**–°–æ–∑–¥–∞—ë–º —Ö—É–∫:**
```typescript
// hooks/useCatalogIntegration.ts
export function useCatalogIntegration({
  manualData,
  setManualData,
  stepConfigs,
  setStepConfigs,
  setAutoFillNotification
}) {
  const [blueRoomSuppliers, setBlueRoomSuppliers] = useState<SupplierData[]>([])
  const [selectedProducts, setSelectedProducts] = useState<CatalogProduct[]>([])

  const addCatalogProducts = (products: CatalogProduct[]) => {
    // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Step 2 (—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è)
    // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Step 4 (–º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)
    // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Step 5 (—Ä–µ–∫–≤–∏–∑–∏—Ç—ã –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)
    /* ... —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ ... */
  }

  const selectBlueRoomSupplier = (supplier: SupplierData) => { /* ... */ }
  const selectOrangeRoomSupplier = (supplier: SupplierData) => { /* ... */ }

  return {
    blueRoomSuppliers,
    selectedProducts,
    addCatalogProducts,
    selectBlueRoomSupplier,
    selectOrangeRoomSupplier
  }
}
```

**–¢–µ—Å—Ç:**
1. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ ‚Üí Step 2, 4, 5 –∑–∞–ø–æ–ª–Ω–∏–ª–∏—Å—å
2. –í—ã–±—Ä–∞—Ç—å —Å–∏–Ω—é—é –∫–æ–º–Ω–∞—Ç—É ‚Üí —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –æ–±–Ω–æ–≤–∏–ª–∏—Å—å
3. –í—ã–±—Ä–∞—Ç—å –æ—Ä–∞–Ω–∂–µ–≤—É—é –∫–æ–º–Ω–∞—Ç—É ‚Üí —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –æ–±–Ω–æ–≤–∏–ª–∏—Å—å

**–ö–æ–º–º–∏—Ç:** `refactor(stage1): Extract catalog integration to useCatalogIntegration hook`

---

### üî¥üî¥ –°–†–ï–ó 5: STEP 4-5 SYNC (–°–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è –ö–ê–¢–ê–°–¢–†–û–§–ê
**–°—Ç—Ä–æ–∫:** ~300
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Step 4 ‚Üî Step 5

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ–º:**
- –õ–æ–≥–∏–∫–∞: Step 4 –º–µ–Ω—è–µ—Ç—Å—è ‚Üí Step 5 –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –õ–æ–≥–∏–∫–∞: Step 5 –º–µ–Ω—è–µ—Ç—Å—è ‚Üí Step 4 –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –†–µ–∂–∏–º—ã: Cubes –≤ Step 5 –≤ 4 —Ä–µ–∂–∏–º–∞—Ö (–ø—Ä–æ—Ñ–∏–ª—å, –∫–∞—Ç–∞–ª–æ–≥, —à–∞–±–ª–æ–Ω, —Ä—É—á–Ω–æ–π)

**–°–æ–∑–¥–∞—ë–º —Ö—É–∫:**
```typescript
// hooks/useStep4Step5Sync.ts
export function useStep4Step5Sync({
  manualData,
  stepConfigs,
  setManualData
}) {
  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Step 4 ‚Üí Step 5
  useEffect(() => {
    if (stepConfigs[4] && manualData[4]) {
      const paymentMethod = manualData[4].selectedMethod
      // –û–±–Ω–æ–≤–∏—Ç—å Step 5 —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–µ—Ç–æ–¥–∞
      syncRequisitesToStep5(paymentMethod)
    }
  }, [manualData[4], stepConfigs[4]])

  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Step 5 ‚Üí Step 4
  useEffect(() => {
    if (stepConfigs[5] && manualData[5]) {
      // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ —Å –º–µ—Ç–æ–¥–æ–º –æ–ø–ª–∞—Ç—ã
      validateRequisitesCompatibility()
    }
  }, [manualData[5], stepConfigs[5]])

  return {
    syncRequisitesToStep5,
    validateRequisitesCompatibility
  }
}
```

**–¢–µ—Å—Ç:**
1. –í—ã–±—Ä–∞—Ç—å P2P –≤ Step 4 ‚Üí Step 5 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
2. –í—ã–±—Ä–∞—Ç—å Bank –≤ Step 4 ‚Üí Step 5 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
3. –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –≤ Step 5 ‚Üí Step 4 –Ω–µ —Å–ª–æ–º–∞–ª—Å—è

**–ö–æ–º–º–∏—Ç:** `refactor(stage1): Extract Step 4-5 sync to useStep4Step5Sync hook`

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê

### 1. –ù–ò–ö–û–ì–î–ê –Ω–µ —É–¥–∞–ª—è–π –∫–æ–¥ –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–∞ –¥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ö—É–∫–∞
```typescript
// ‚ùå –ü–õ–û–•–û: –°—Ä–∞–∑—É —É–¥–∞–ª–∏–ª –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–∞
const { templates, applyTemplate } = useTemplateSystem(...)

// ‚úÖ –•–û–†–û–®–û: –î—É–±–ª–∏—Ä—É–µ–º –Ω–∞ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏
const { templates, applyTemplate } = useTemplateSystem(...)
// –°–¢–ê–†–´–ô –ö–û–î –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù, –ù–ï –£–î–ê–õ–Å–ù:
// const [templateSelection, setTemplateSelection] = useState(false)
// const handleTemplateSelect = ...
```

### 2. –ö–æ–º–º–∏—Ç—å –ø–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û —Å—Ä–µ–∑–∞
```bash
# –ü–æ—Å–ª–µ –°—Ä–µ–∑–∞ 1
git add .
git commit -m "refactor(stage1): Extract template system to useTemplateSystem hook"
npm run build # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é
npm run test  # –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ—Å—Ç—ã

# –ü–æ—Å–ª–µ –°—Ä–µ–∑–∞ 2
git add .
git commit -m "refactor(stage1): Extract OCR upload to useOcrUpload hook"
# ...–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å feature flags –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```typescript
const USE_NEW_TEMPLATE_SYSTEM = true // —Ñ–ª–∞–≥ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

{USE_NEW_TEMPLATE_SYSTEM ? (
  <NewTemplateSystemComponent {...useTemplateSystem(...)} />
) : (
  <OldTemplateSystemComponent /> // —Å—Ç–∞—Ä—ã–π –∫–æ–¥
)}
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –î–û —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞
```
1. –ù–∞–ø–∏—Å–∞—Ç—å —Ö—É–∫
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ö—É–∫ –í –î–û–ü–û–õ–ù–ï–ù–ò–ï –∫ —Å—Ç–∞—Ä–æ–º—É –∫–æ–¥—É
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ö—É–∫ (–∫–ª–∏–∫-–∫–ª–∏–∫ –≤ UI)
4. –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥
5. –ï—Å–ª–∏ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –æ—Ç–∫–∞—Ç–∏—Ç—å —Ö—É–∫, –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å—Ä–µ–∑–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º:
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Stage 1 —Ä–∞–±–æ—Ç–∞—é—Ç (—Ä—É—á–Ω–æ–π —Ç–µ—Å—Ç)
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ page.tsx —É–º–µ–Ω—å—à–∏–ª–æ—Å—å
- ‚úÖ –ù–æ–≤—ã–π —Ö—É–∫ –ø–æ–∫—Ä—ã—Ç JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

### –§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–ª—å:
| –ú–µ—Ç—Ä–∏–∫–∞ | –î–û | –ü–û–°–õ–ï | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| page.tsx | 4807 —Å—Ç—Ä–æ–∫ | ~500 —Å—Ç—Ä–æ–∫ | -90% |
| –•—É–∫–∏ | 0 | 5 —Ö—É–∫–æ–≤ (~1800 —Å—Ç—Ä–æ–∫) | +5 –º–æ–¥—É–ª–µ–π |
| –£—Ç–∏–ª–∏—Ç—ã | 0 | ~760 —Å—Ç—Ä–æ–∫ | –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ö–ê–¢–ê–°–¢–†–û–§–ê | –ü–û–†–Ø–î–û–ö | üéâ |

---

## üöÄ –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø

```mermaid
graph TD
    A[START] --> B[–°–†–ï–ó 1: Templates]
    B --> C[–ö–æ–º–º–∏—Ç + –¢–µ—Å—Ç]
    C --> D[–°–†–ï–ó 2: OCR Upload]
    D --> E[–ö–æ–º–º–∏—Ç + –¢–µ—Å—Ç]
    E --> F[–°–†–ï–ó 3: Manual Data]
    F --> G[–ö–æ–º–º–∏—Ç + –¢–µ—Å—Ç]
    G --> H[–°–†–ï–ó 4: Catalog]
    H --> I[–ö–æ–º–º–∏—Ç + –¢–µ—Å—Ç]
    I --> J[–°–†–ï–ó 5: Step4-5 Sync]
    J --> K[–ö–æ–º–º–∏—Ç + –¢–µ—Å—Ç]
    K --> L[–§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞]
    L --> M[DONE: 4807 ‚Üí 500 —Å—Ç—Ä–æ–∫]
```

**–í—Ä–µ–º—è:**
- –°—Ä–µ–∑ 1: 2 —á–∞—Å–∞
- –°—Ä–µ–∑ 2: 3 —á–∞—Å–∞
- –°—Ä–µ–∑ 3: 2 —á–∞—Å–∞
- –°—Ä–µ–∑ 4: 4 —á–∞—Å–∞
- –°—Ä–µ–∑ 5: 3 —á–∞—Å–∞
- –û—á–∏—Å—Ç–∫–∞: 1 —á–∞—Å

**–ò–¢–û–ì–û: ~15 —á–∞—Å–æ–≤ (2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è)**

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –°—Ä–µ–∑–∞ 1:
```bash
# 1. –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É
git checkout -b refactor/stage1-templates

# 2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Ö—É–∫–∞
mkdir -p hooks/project-constructor
touch hooks/project-constructor/useTemplateSystem.ts

# 3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–∞
# (–Ω–∞–π—Ç–∏ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å "template" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏)

# 4. –ù–∞–ø–∏—Å–∞—Ç—å —Ö—É–∫
# 5. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ö—É–∫ –≤ –º–æ–Ω–æ–ª–∏—Ç–µ (–ù–ï —É–¥–∞–ª—è—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥)
# 6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
# 7. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥
# 8. –ö–æ–º–º–∏—Ç
```

---

## üõë –ß–¢–û –î–ï–õ–ê–¢–¨ –ï–°–õ–ò –ß–¢–û-–¢–û –°–õ–û–ú–ê–õ–û–°–¨

### –ï—Å–ª–∏ —Å–ª–æ–º–∞–ª–æ—Å—å –ü–û–°–õ–ï –∫–æ–º–º–∏—Ç–∞:
```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç (–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è)
git reset --soft HEAD~1

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É
# –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
```

### –ï—Å–ª–∏ —Å–ª–æ–º–∞–ª–æ—Å—å –î–û –∫–æ–º–º–∏—Ç–∞:
```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git restore .

# –ù–∞—á–∞—Ç—å —Å—Ä–µ–∑ –∑–∞–Ω–æ–≤–æ —Å –¥—Ä—É–≥–∏–º –ø–æ–¥—Ö–æ–¥–æ–º
```

### –ï—Å–ª–∏ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å:
```bash
# –°—Ä–∞–≤–Ω–∏—Ç—å —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —Ä–∞–±–æ—á–∏–º –∫–æ–º–º–∏—Ç–æ–º
git diff HEAD

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª —Å npm run dev
```

---

## üìù –®–ê–ë–õ–û–ù –ö–û–ú–ú–ò–¢–ê

```
refactor(stage1): Extract [FEATURE] to [HOOK_NAME] hook

- Move [FUNCTION1], [FUNCTION2] to [HOOK_NAME]
- Extract states: [STATE1], [STATE2]
- Reduce page.tsx by [N] lines

Before: page.tsx = [LINES_BEFORE] lines
After: page.tsx = [LINES_AFTER] lines

Test: [MANUAL_TEST_DESCRIPTION]

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

---

## ‚úÖ –ì–û–¢–û–í–û –ö –°–¢–ê–†–¢–£?

**–ù–∞—á–∏–Ω–∞–µ–º —Å –°—Ä–µ–∑–∞ 1: Template System** (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

–°–∫–∞–∂–∏ "–Ω–∞—á–∏–Ω–∞–µ–º" –∏ —è —Å–æ–∑–¥–∞–º –ø–µ—Ä–≤—ã–π —Ö—É–∫ `useTemplateSystem`!
