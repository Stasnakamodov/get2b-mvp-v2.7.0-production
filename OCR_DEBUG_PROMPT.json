{
  "project_context": {
    "project_name": "Get2B - B2B платформа для сделок",
    "current_component": "Атомарный конструктор проектов (Atomic Project Constructor)",
    "specific_feature": "OCR анализ карточки компании (Step 1)",
    "technology_stack": "Next.js, Supabase, Yandex Vision API, TypeScript"
  },
  "current_problem": {
    "issue": "OCR не извлекает данные из карточки компании",
    "symptoms": [
      "Название компании = 'Не указано'",
      "ИНН = 'Не указано'", 
      "КПП = 'Не указано'",
      "Название банка = 'Не указано'",
      "Только ОГРН и адрес извлекаются корректно"
    ],
    "expected_behavior": "OCR должен извлекать: название компании, ИНН, КПП, банковские реквизиты, контактные данные"
  },
  "technical_details": {
    "api_endpoint": "app/api/document-analysis/route.ts",
    "function": "extractCompanyData(text: string)",
    "ocr_service": "Yandex Vision API",
    "file_types": ["JPG", "PNG", "PDF"],
    "current_status": "Алгоритм извлекает текст, но парсинг данных работает плохо"
  },
  "debugging_info": {
    "console_logs": "В консоли браузера видны логи extractCompanyData",
    "manualData_output": "manualData[1] показывает неправильно извлеченные данные",
    "text_extraction": "Текст извлекается, но алгоритм парсинга не находит нужные поля"
  },
  "recent_changes": {
    "improvements_made": [
      "Добавлены агрессивные паттерны поиска",
      "Улучшена логика очистки данных",
      "Добавлено расширенное логирование",
      "Исправлены паттерны для ИНН/КПП"
    ],
    "current_approach": "Алгоритм очищает неправильные данные, но не находит правильные"
  },
  "next_steps": {
    "immediate_task": "Исправить алгоритм парсинга данных компании",
    "priority": "КРИТИЧЕСКАЯ - пользователь не может заполнить Step 1",
    "approach": "Анализировать логи extractCompanyData и исправлять паттерны поиска",
    "testing": "Загрузить карточку компании и проверить результат в модальном окне"
  },
  "user_context": {
    "user_frustration": "Высокая - пользователь говорит 'на фиг шаблоны, мы занимаемся OCR'",
    "deadline_pressure": "Пользователь работает под давлением времени",
    "expectation": "OCR должен работать сразу и извлекать все данные корректно"
  },
  "files_to_examine": [
    "app/api/document-analysis/route.ts - основная функция extractCompanyData",
    "app/dashboard/project-constructor/page.tsx - где вызывается OCR",
    "lib/services/YandexVisionService.ts - сервис для работы с Yandex Vision"
  ],
  "key_requirements": {
    "must_work": "OCR должен извлекать название компании, ИНН, КПП, банковские реквизиты",
    "user_experience": "Пользователь загружает документ и сразу видит заполненные поля",
    "reliability": "Алгоритм должен работать с разными форматами документов"
  }
} 