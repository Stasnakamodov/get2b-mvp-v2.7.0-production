diff --git a/Desktop/godplisgomvp-forvercel/app/dashboard/create-project/page.tsx b/Desktop/godplisgomvp-forvercel/app/dashboard/create-project/page.tsx
index 5359ad6..f03eb24 100644
--- a/Desktop/godplisgomvp-forvercel/app/dashboard/create-project/page.tsx
+++ b/Desktop/godplisgomvp-forvercel/app/dashboard/create-project/page.tsx
@@ -38,6 +38,9 @@ import {
   sendClientConfirmationRequestToTelegramClient,
 } from "@/lib/telegram-client"
 import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from "@/components/ui/dialog"
+import { CreateProjectProvider, useCreateProjectContext } from "./context/CreateProjectContext"
+import Step1CompanyForm from "./steps/Step1CompanyForm"
+import ProjectTimeline from "@/components/ui/ProjectTimeline"
 
 // --- –î–û–ë–ê–í–¨: —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram ---
 async function sendCompanyDataToTelegram(companyData: any) {
@@ -54,7 +57,7 @@ async function sendCompanyDataToTelegram(companyData: any) {
     await sendTelegramMessageClient(text)
   } catch (error) {
     console.error("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏ –≤ Telegram:", error)
-    alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram: " + error.message)
+    alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram: " + (error instanceof Error ? error.message : String(error)))
   }
 }
 
@@ -100,7 +103,7 @@ async function sendSpecificationToTelegram({
     console.log("‚úÖ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Telegram")
   } catch (error) {
     console.error("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ Telegram:", error)
-    alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ Telegram: " + error.message)
+    alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ Telegram: " + (error instanceof Error ? error.message : String(error)))
   }
 }
 
@@ -134,3752 +137,84 @@ async function sendReceiptApprovalRequestToTelegram(receiptUrl: string, projectN
   await sendTelegramProjectApprovalRequestClient(text + `\n–ß–µ–∫: ${receiptUrl}`, projectId, "receipt")
 }
 
-export default function CreateProjectPage() {
-  const [projectName, setProjectName] = useState("–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç")
-  const [currentStep, setCurrentStep] = useState(1)
-  const [isLoading, setIsLoading] = useState(true)
-  const [isVerifying, setIsVerifying] = useState(false)
-  const [isVerified, setIsVerified] = useState(false)
-  const [companyFormData, setCompanyFormData] = useState({
-    name: "",
-    legalName: "",
-    inn: "",
-    kpp: "",
-    ogrn: "",
-    address: "",
-    bankName: "",
-    bankAccount: "",
-    bankCorrAccount: "",
-    bankBik: "",
-    email: "",
-    phone: "",
-    website: "",
-  })
-
-  // Specification items state
-  const [specificationItems, setSpecificationItems] = useState([
-    {
-      id: 1,
-      name: "",
-      code: "",
-      image: null,
-      quantity: 0,
-      unit: "—à—Ç",
-      pricePerUnit: 0,
-      totalPrice: 0,
-    },
-  ])
-
-  const [currency, setCurrency] = useState("USD")
-  const fileInputRefs = useRef([])
-
-  // –î–æ–±–∞–≤–∏–º –Ω–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —à–∞–≥–æ–≤ –æ–∂–∏–¥–∞–Ω–∏—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –∏ –ø–ª–∞—Ç–µ–∂–∫–∏
-  const [isWaitingApproval, setIsWaitingApproval] = useState(false)
-  const [isApproved, setIsApproved] = useState(false)
-  const [showPaymentInvoice, setShowPaymentInvoice] = useState(false)
-
-  // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
-  const [selectedTransferMethod, setSelectedTransferMethod] = useState("")
-  const [showTransferMethodSelection, setShowTransferMethodSelection] = useState(false)
-  const [isReceiptUploaded, setIsReceiptUploaded] = useState(false)
-  const [receiptFile, setReceiptFile] = useState<File | null>(null)
-  const [receiptUrl, setReceiptUrl] = useState<string | null>(null)
-
-  // Add these state variables with the other useState declarations
-  const [isSaveDialogOpen, setIsSaveDialogOpen] = useState(false)
-  const [templateName, setTemplateName] = useState("")
-  const [templateDescription, setTemplateDescription] = useState("")
-  const router = useRouter()
-  const searchParams = useSearchParams()
-
-  // Add state for invoice type and file
-  const [invoiceType, setInvoiceType] = useState("create")
-  const [invoiceFile, setInvoiceFile] = useState(null)
-
-  // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∫–∞—Ä—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
-  const [supplierCards, setSupplierCards] = useState<any[]>([])
-  const [selectedCard, setSelectedCard] = useState(null)
-
-  const [showBankSelector, setShowBankSelector] = useState(false)
-  const [availableBanks, setAvailableBanks] = useState([
-    { id: 1, name: "Bank of China" },
-    { id: 2, name: "Industrial and Commercial Bank of China" },
-    { id: 3, name: "China Construction Bank" },
-    { id: 4, name: "Agricultural Bank of China" },
-    { id: 5, name: "China Merchants Bank" },
-    { id: 6, name: "China CITIC Bank" },
-    { id: 7, name: "Shanghai Pudong Development Bank" },
-  ])
-  const [newCardDetails, setNewCardDetails] = useState({
-    bank: "",
-    cardNumber: "",
-    holderName: "",
-    expiryDate: "",
-  })
-
-  // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã
-  const [showNewCardForm, setShowNewCardForm] = useState(false)
-
-  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
-  const [cardToDelete, setCardToDelete] = useState<number | null>(null)
-  const [showDeleteCardConfirm, setShowDeleteCardConfirm] = useState(false)
-
-  // Add these state variables after the other useState declarations
-  const [cryptoAddress, setCryptoAddress] = useState("")
-  const [cryptoNetwork, setCryptoNetwork] = useState("trc20")
-  const [cryptoNetworks, setCryptoNetworks] = useState([
-    { id: "trc20", name: "TRC20 (TRON)" },
-    { id: "bep20", name: "BEP20 (Binance Smart Chain)" },
-  ])
-
-  // –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–æ–≤
-  const [savedCryptoWallets, setSavedCryptoWallets] = useState<any[]>([])
-  const [selectedWallet, setSelectedWallet] = useState<string | null>(null)
-  const [showSavedWallets, setShowSavedWallets] = useState(false)
-  const [showAddWalletForm, setShowAddWalletForm] = useState(false)
-  const [newWalletDetails, setNewWalletDetails] = useState({
-    name: "",
-    address: "",
-    network: "trc20",
-  })
-  const [walletToDelete, setWalletToDelete] = useState<number | null>(null)
-  const [showDeleteWalletConfirm, setShowDeleteWalletConfirm] = useState(false)
-
-  const [methodLoadingState, setMethodLoadingState] = useState({})
-
-  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
-  const [bankTransferDetails, setBankTransferDetails] = useState({
-    // –û–±—â–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
-    recipientName: "",
-    recipientAddress: "",
-    bankName: "",
-    bankAddress: "",
-    accountNumber: "",
-    swift: "",
-    paymentPurpose: "",
-    transferCurrency: "USD",
-
-    // –ö–∏—Ç–∞–π—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
-    cnapsCode: "",
-
-    // –¢—É—Ä–µ—Ü–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
-    iban: "",
-
-    // –î—Ä—É–≥–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
-    otherDetails: "",
-  })
-
-  // –°—Ç—Ä–∞–Ω–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
-  const [recipientCountry, setRecipientCountry] = useState("china")
-
-  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –∫–∞–∫ —à–∞–±–ª–æ–Ω
-  const [saveAsTemplate, setSaveAsTemplate] = useState(false)
-  const [templateBankName, setTemplateBankName] = useState("")
-
-  // –°–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç
-  const supportedCurrencies = ["USD", "EUR", "CNY", "TRY", "RUB"]
-
-  const [uploadingImageId, setUploadingImageId] = useState<number | null>(null)
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
-  const [savedBankAccounts, setSavedBankAccounts] = useState<any[]>([])
-  const [selectedBankAccount, setSelectedBankAccount] = useState<number | null>(null)
-  const [showSavedBankAccounts, setShowSavedBankAccounts] = useState(false)
-  const [showAddBankAccountForm, setShowAddBankAccountForm] = useState(false)
-  const [newBankAccountDetails, setNewBankAccountDetails] = useState<{
-    name: string
-    country: string
-    details: { [key: string]: string }
-  }>({
-    name: "",
-    country: "china",
-    details: {
-      recipientName: "",
-      recipientAddress: "",
-      bankName: "",
-      bankAddress: "",
-      accountNumber: "",
-      swift: "",
-      paymentPurpose: "",
-      transferCurrency: "USD",
-      cnapsCode: "",
-      iban: "",
-      otherDetails: "",
-    },
-  })
-  const [bankAccountToDelete, setBankAccountToDelete] = useState<number | null>(null)
-  const [showDeleteBankAccountConfirm, setShowDeleteBankAccountConfirm] = useState(false)
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã
-  const [selectedBankCountry, setSelectedBankCountry] = useState<string | null>(null)
-
-  // --- –î–û–ë–ê–í–ò–¢–¨: –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç –∏–∑ Supabase
-  const fetchSupplierCards = useCallback(async () => {
-    try {
-      const {
-        data: { user },
-        error,
-      } = await supabase.auth.getUser()
-      if (error || !user) {
-        console.log("No authenticated user found")
-        return
-      }
-      const { data, error: fetchError } = await supabase
-        .from("supplier_cards")
-        .select("*")
-        .eq("user_id", user.id)
-        .order("created_at", { ascending: true })
-      if (!fetchError && data) {
-        setSupplierCards(data)
-      }
-    } catch (error) {
-      console.error("Error fetching supplier cards:", error)
-    }
-  }, [])
-
-  // --- –î–û–ë–ê–í–ò–¢–¨: useEffect –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
-  useEffect(() => {
-    fetchSupplierCards()
-  }, [fetchSupplierCards])
-
-  // --- –ó–ê–ú–ï–ù–ò–¢–¨ savedCryptoWallets –Ω–∞ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
-  useEffect(() => {
-    const fetchWallets = async () => {
-      try {
-        const {
-          data: { user },
-          error,
-        } = await supabase.auth.getUser()
-        if (error || !user) return
-        const { data, error: fetchError } = await supabase
-          .from("crypto_wallets")
-          .select("*")
-          .eq("user_id", user.id)
-          .order("created_at", { ascending: false })
-        if (!fetchError && data) setSavedCryptoWallets(data)
-      } catch (error) {
-        console.error("Error fetching crypto wallets:", error)
-      }
-    }
-    fetchWallets()
-  }, [])
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ useEffect –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –∏–∑ Supabase
-  useEffect(() => {
-    const fetchBankAccounts = async () => {
-      try {
-        const {
-          data: { user },
-          error,
-        } = await supabase.auth.getUser()
-        if (error || !user) return
-        const { data, error: fetchError } = await supabase
-          .from("bank_accounts")
-          .select("*")
-          .eq("user_id", user.id)
-          .order("created_at", { ascending: false })
-        if (!error && data) setSavedBankAccounts(data)
-      } catch (error) {
-        console.error("Error fetching bank accounts:", error)
-      }
-    }
-    fetchBankAccounts()
-  }, [])
-
-  // Handle image upload
-  const handleImageUpload = async (id: number, e: React.ChangeEvent<HTMLInputElement>) => {
-    if (e.target.files && e.target.files[0]) {
-      const file = e.target.files[0]
-      setUploadingImageId(id)
-      try {
-        const fileExt = file.name.split(".").pop()
-        const fileName = `${id}-${Date.now()}.${fileExt}`
-        const filePath = `project-images/${fileName}`
-        const { error: uploadError } = await supabase.storage.from("project-images").upload(filePath, file)
-        if (uploadError) throw uploadError
-        const { data } = supabase.storage.from("project-images").getPublicUrl(filePath)
-        if (!data?.publicUrl) throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ")
-        handleSpecificationItemChange(id, "image", data.publicUrl)
-      } catch (err: any) {
-        alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: " + (err.message || err))
-      } finally {
-        setUploadingImageId(null)
-      }
-    }
-  }
-
-  // --- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–≤–æ–π—Å–∞ ---
-  const [isInvoiceUploading, setIsInvoiceUploading] = useState(false)
-  const handleInvoiceUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
-    if (e.target.files && e.target.files[0]) {
-      setIsInvoiceUploading(true)
-      const file = e.target.files[0]
-      // –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage
-      const fileExt = file.name.split(".").pop()
-      const fileName = `invoice-${Date.now()}.${fileExt}`
-      const filePath = `${fileName}`
-      const uploadResult = await supabase.storage.from("invoices").upload(filePath, file)
-      if (uploadResult.error) {
-        alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–≤–æ–π—Å–∞: " + uploadResult.error.message)
-        setIsInvoiceUploading(false)
-        return
-      }
-      const { data } = supabase.storage.from("invoices").getPublicUrl(filePath)
-      if (data?.publicUrl) {
-        setInvoiceFile({ name: file.name, url: data.publicUrl })
-      } else {
-        alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∏–Ω–≤–æ–π—Å")
-      }
-      setIsInvoiceUploading(false)
-    }
-  }
-
-  // –î–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ–∫–∞
-  const handleReceiptUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
-    if (e.target.files && e.target.files[0]) {
-      const file = e.target.files[0]
-      setReceiptFile(file as File | null)
-      // –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage
-      const fileExt = file.name.split(".").pop()
-      const fileName = `receipt-${Date.now()}.${fileExt}`
-      // –ü—É—Ç—å —Ç–æ–ª—å–∫–æ –∏–º—è —Ñ–∞–π–ª–∞, –±–µ–∑ –ø–∞–ø–æ–∫
-      const uploadResult = await supabase.storage.from("receipts").upload(fileName, file)
-      if (uploadResult.error) {
-        alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ–∫–∞: " + uploadResult.error.message)
-        return
-      }
-      const { data } = supabase.storage.from("receipts").getPublicUrl(fileName)
-      if (data?.publicUrl) {
-        setReceiptUrl(data.publicUrl as string)
-        // --- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —á–µ–∫ –≤ Supabase ---
-        if (projectId) {
-          const { error } = await supabase.from("projects").update({ receipt_url: data.publicUrl, status: "waiting_receipt_approval", currentStep: 3 }).eq("id", projectId)
-          if (error) {
-            alert("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ–∫–∞ –≤ –ø—Ä–æ–µ–∫—Ç: " + error.message)
-            console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è receipt_url:", error)
-          }
-          await sendReceiptApprovalRequestToTelegram(data.publicUrl, projectName, projectId)
-          setIsWaitingReceiptApproval(true)
-        } else {
-          alert("–û—à–∏–±–∫–∞: projectId –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω, —á–µ–∫ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –ø—Ä–æ–µ–∫—Ç!")
-          console.error("projectId is null in handleReceiptUpload")
-        }
-      }
-      setIsReceiptUploaded(true)
-    }
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã
-  const handleNewCardChange = (e: React.ChangeEvent<HTMLInputElement>) => {
-    const { name, value } = e.target
-    setNewCardDetails((prev) => ({
-      ...prev,
-      [name]: value,
-    }))
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã
-  const handleAddNewCard = async () => {
-    if (
-      !newCardDetails.bank ||
-      !newCardDetails.cardNumber ||
-      !newCardDetails.holderName ||
-      !newCardDetails.expiryDate
-    ) {
-      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è")
-      return
-    }
-    try {
-      const {
-        data: { user },
-        error: authError,
-      } = await supabase.auth.getUser()
-      if (authError || !user) {
-        alert("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç")
-        return
-      }
-      const { data, error } = await supabase
-        .from("supplier_cards")
-        .insert([
-          {
-            user_id: user.id,
-            bank: newCardDetails.bank,
-            card_number: newCardDetails.cardNumber,
-            holder_name: newCardDetails.holderName,
-            expiry_date: newCardDetails.expiryDate,
-          },
-        ])
-        .select()
-      if (error) {
-        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã: " + error.message)
-        return
-      }
-      setShowNewCardForm(false)
-      setNewCardDetails({ bank: "", cardNumber: "", holderName: "", expiryDate: "" })
-      if (data && data[0]) {
-        setSelectedCard(data[0].id) // –°—Ä–∞–∑—É –≤—ã–±–∏—Ä–∞–µ–º –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É
-        setSupplierCards((prev) => [data[0], ...prev])
-        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –≤ Telegram
-        await sendPaymentDetailsToTelegram(
-          {
-            bank: data[0].bank,
-            card_number: data[0].card_number,
-            holder_name: data[0].holderName,
-            expiry_date: data[0].expiryDate,
-          },
-          projectName,
-        )
-      }
-      fetchSupplierCards()
-      setTimeout(() => {
-        setCurrentStep(6)
-      }, 1000)
-    } catch (error) {
-      console.error("Error adding new card:", error)
-      alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã.")
-    }
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
-  const handleDeleteCard = (cardId: number, e: React.MouseEvent<HTMLButtonElement>) => {
-    e.stopPropagation()
-    setCardToDelete(cardId as number)
-    setShowDeleteCardConfirm(true)
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
-  const confirmDeleteCard = async () => {
-    if (cardToDelete) {
-      await supabase.from("supplier_cards").delete().eq("id", cardToDelete)
-      fetchSupplierCards()
-      if (selectedCard === cardToDelete) {
-        setSelectedCard(null)
-      }
-      setCardToDelete(null)
-      setShowDeleteCardConfirm(false)
-    }
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–µ –Ω–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
-  const handleNewWalletChange = (e: React.ChangeEvent<HTMLInputElement>) => {
-    const { name, value } = e.target
-    setNewWalletDetails((prev) => ({
-      ...prev,
-      [name]: value,
-    }))
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
-  const handleAddNewWallet = async () => {
-    if (!newWalletDetails.name || !newWalletDetails.address) {
-      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è")
-      return
-    }
-    try {
-      const {
-        data: { user },
-        error: authError,
-      } = await supabase.auth.getUser()
-      if (authError || !user) {
-        alert("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç")
-        return
-      }
-      const { data, error } = await supabase
-        .from("crypto_wallets")
-        .insert([
-          {
-            user_id: user.id,
-            name: newWalletDetails.name,
-            address: newWalletDetails.address,
-            network: newWalletDetails.network,
-          },
-        ])
-        .select()
-      if (!error && data && data[0]) {
-        setSavedCryptoWallets((prev) => [data[0], ...prev])
-        setCryptoAddress(data[0].address)
-        setCryptoNetwork(data[0].network)
-        setSelectedWallet(data[0].id)
-        setNewWalletDetails({ name: "", address: "", network: "trc20" })
-        setShowAddWalletForm(false)
-        setShowSavedWallets(false)
-      } else {
-        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞")
-      }
-      if (!error && data && data[0]) {
-        setSavedCryptoWallets((prev) => [data[0], ...prev])
-        setShowAddWalletForm(false)
-        setNewWalletDetails({
-          name: "",
-          address: "",
-          network: "trc20",
-        })
-        await sendPaymentDetailsToTelegram(newWalletDetails, projectName)
-      } else {
-        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞")
-      }
-    } catch (error) {
-      console.error("Error adding new wallet:", error)
-      alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞.")
-    }
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
-  const handleSelectWallet = async (wallet: any) => {
-    setCryptoAddress(wallet.address)
-    setCryptoNetwork(wallet.network)
-    setSelectedWallet(wallet.id)
-    setShowSavedWallets(false)
-    await sendPaymentDetailsToTelegram(
-      {
-        name: wallet.name,
-        address: wallet.address,
-        network: wallet.network,
-      },
-      projectName,
-    )
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ—à–µ–ª—å–∫–∞
-  const toggleFavoriteWallet = (walletId: number, e: React.MouseEvent<HTMLButtonElement>) => {
-    e.stopPropagation()
-    setSavedCryptoWallets(
-      savedCryptoWallets.map((wallet) =>
-        wallet.id === walletId ? { ...wallet, isFavorite: !wallet.isFavorite } : wallet,
-      ),
-    )
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
-  const handleDeleteWallet = (walletId: number, e: React.MouseEvent<HTMLButtonElement>) => {
-    e.stopPropagation()
-    setWalletToDelete(walletId as number)
-    setShowDeleteWalletConfirm(true)
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
-  const confirmDeleteWallet = async () => {
-    if (walletToDelete) {
-      const { error } = await supabase.from("crypto_wallets").delete().eq("id", walletToDelete)
-      if (!error) {
-        setSavedCryptoWallets(savedCryptoWallets.filter((wallet) => wallet.id !== walletToDelete))
-        setWalletToDelete(null)
-        setShowDeleteWalletConfirm(false)
-      } else {
-        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞")
-      }
-    }
-  }
-
-  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
-  const handleBankDetailsChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {
-    const { name, value } = e.target
-    setBankTransferDetails((prev) => ({
-      ...prev,
-      [name]: value,
-    }))
-  }
-
-  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
-  const handleSubmitBankTransfer = () => {
-    // –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç—Ä–∞–Ω—ã
-    let isValid = true
-    const requiredFields = ["recipientName", "bankName", "accountNumber", "paymentPurpose", "transferCurrency"]
-
-    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω—ã –ø–æ–ª—è
-    if (recipientCountry === "china") {
-      requiredFields.push("cnapsCode")
-    } else if (recipientCountry === "turkey") {
-      requiredFields.push("iban")
-    } else {
-      requiredFields.push("swift")
-    }
-
-    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
-    for (const field of requiredFields) {
-      if (!bankTransferDetails[field]) {
-        isValid = false
-        break
-      }
-    }
-
-    if (!isValid) {
-      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è")
-      return
-    }
-
-    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ —à–∞–±–ª–æ–Ω, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è
-    if (saveAsTemplate && templateBankName) {
-      const savedTemplates = JSON.parse(localStorage.getItem("bankTemplates") || "[]")
-      savedTemplates.push({
-        name: templateBankName,
-        country: recipientCountry,
-        details: bankTransferDetails,
-        // createdAt: new Date().toISOString(), // –£–ë–†–ê–ù–û!
-      })
-      localStorage.setItem("bankTemplates", JSON.stringify(savedTemplates))
-    }
-
-    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
-    setCurrentStep(6)
-  }
-
-  // Simulate checking if company profile exists
-  useEffect(() => {
-    setTimeout(() => {
-      setIsLoading(false)
-    }, 1000)
-  }, [])
-
-  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ URL
-  useEffect(() => {
-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ step –≤ URL
-    const stepParam = searchParams.get("step")
-    if (stepParam) {
-      const step = Number.parseInt(stepParam)
-      if (!isNaN(step) && step >= 1 && step <= 8) {
-        setCurrentStep(step)
-      }
-    }
-
-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
-    try {
-      const projectDataJson = localStorage.getItem("projectData")
-
-      if (projectDataJson) {
-        const projectData = JSON.parse(projectDataJson)
-
-        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
-        if (projectData.specification?.title) {
-          setProjectName(projectData.specification.title)
-        } else if (projectData.newSpecification?.supplier) {
-          setProjectName(`–ü—Ä–æ–µ–∫—Ç —Å ${projectData.newSpecification.supplier}`)
-        }
-
-        // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
-        if (projectData.company) {
-          setCompanyFormData({
-            name: projectData.company.name || "",
-            legalName: projectData.company.name || "",
-            inn: projectData.company.inn || "",
-            kpp: "",
-            ogrn: "",
-            address: projectData.company.address || "",
-            bankName: projectData.bankAccount?.bankName || "",
-            bankAccount: projectData.bankAccount?.accountNumber || "",
-            bankCorrAccount: "",
-            bankBik: "",
-            email: projectData.company.email || "",
-            phone: projectData.company.phone || "",
-            website: "",
-          })
-
-          // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–æ–º–ø–∞–Ω–∏—é, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –≤—ã–±—Ä–∞–Ω–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
-          setIsVerified(true)
-        }
-
-        // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
-        if (projectData.specification) {
-          // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
-          const items = []
-
-          // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
-          if (projectData.selectedItems && projectData.selectedItems.length > 0) {
-            projectData.selectedItems.forEach((selectedItem) => {
-              if (selectedItem.items && projectData.selectedItems.length > 0) {
-                selectedItem.items.forEach((item) => {
-                  items.push({
-                    id: items.length + 1,
-                    name: item.name,
-                    code: item.code,
-                    image: null,
-                    quantity: item.quantity,
-                    unit: item.unit,
-                    pricePerUnit: item.pricePerUnit,
-                    totalPrice: item.totalPrice,
-                  })
-                })
-              }
-            })
-          } else if (projectData.specification.items) {
-            // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –≤—Å—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
-            projectData.specification.items.forEach((item) => {
-              items.push({
-                id: items.length + 1,
-                name: item.name,
-                code: item.code,
-                image: null,
-                quantity: item.quantity,
-                unit: item.unit,
-                pricePerUnit: item.pricePerUnit,
-                totalPrice: item.totalPrice,
-              })
-            })
-          }
-
-          if (items.length > 0) {
-            setSpecificationItems(items)
-          }
-
-          if (projectData.specification.currency) {
-            setCurrency(projectData.specification.currency)
-          }
-        } else if (projectData.newSpecification) {
-          // –ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
-          const items = []
-
-          if (projectData.newSpecification.items) {
-            projectData.newSpecification.items.forEach((item) => {
-              items.push({
-                id: items.length + 1,
-                name: item.name,
-                code: item.code,
-                image: null,
-                quantity: item.quantity,
-                unit: item.unit,
-                price: item.price,
-                total: item.total,
-              })
-            })
-          }
-
-          if (items.length > 0) {
-            setSpecificationItems(items)
-          }
-
-          if (projectData.newSpecification.currency) {
-            setCurrency(projectData.newSpecification.currency)
-          }
-        }
-
-        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∏–ø –∏–Ω–≤–æ–π—Å–∞
-        if (projectData.invoiceType) {
-          setInvoiceType(projectData.invoiceType)
-        }
-
-        // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 2, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∏ –Ω–µ —É–∫–∞–∑–∞–Ω –¥—Ä—É–≥–æ–π —à–∞–≥ –≤ URL
-        if (projectData.company && !stepParam) {
-          setTimeout(() => {
-            setCurrentStep(2)
-          }, 1500)
-        }
-
-        // –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage, —á—Ç–æ–±—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
-        localStorage.removeItem("projectData")
-      }
-    } catch (error) {
-      console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage:", error)
-    }
-
-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
-    try {
-      const currentProjectJson = localStorage.getItem("currentProject")
-      if (currentProjectJson) {
-        const currentProject = JSON.parse(currentProjectJson)
-
-        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
-        if (currentProject.title) {
-          setProjectName(currentProject.title)
-        }
-
-        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç—Ç–∞–ø–∞
-        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ API –∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
-
-        // –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
-        localStorage.removeItem("currentProject")
-      }
-    } catch (error) {
-      console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:", error)
-    }
-
-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —à–∞–±–ª–æ–Ω–∞
-    const templateIndex = searchParams.get("template")
-    if (templateIndex) {
-      // Load saved template from localStorage
-      const storedTemplates = localStorage.getItem("projectTemplates")
-      if (storedTemplates) {
-        try {
-          const templates = JSON.parse(storedTemplates)
-          const template = templates[Number.parseInt(templateIndex)]
-          console.log("–ó–ê–ì–†–£–ñ–ê–ï–ú –®–ê–ë–õ–û–ù:", template)
-          if (template) {
-            // Set states from template
-            setProjectName(template.projectName)
-            setCompanyFormData(template.companyFormData)
-            setSpecificationItems(template.specificationItems)
-            setCurrency(template.currency)
-            // –£—Å—Ç–∞–Ω–æ–≤–∏–º —Ç–∏–ø –∏–Ω–≤–æ–π—Å–∞, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å –≤ —à–∞–±–ª–æ–Ω–µ
-            if (template.invoiceType) {
-              setInvoiceType(template.invoiceType)
-            }
-            console.log("–°–ü–ï–¶–ò–§–ò–ö–ê–¶–ò–Ø –ò–ó –®–ê–ë–õ–û–ù–ê:", template.specificationItems)
-          }
-        } catch (error) {
-          console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —à–∞–±–ª–æ–Ω–∞:", error)
-        }
-      }
-    }
-
-    // –ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞ –∏–∑ Supabase –ø–æ templateId
-    const templateId = searchParams.get("templateId")
-    if (templateId) {
-      const fetchTemplate = async () => {
-        const { data, error } = await supabase.from("templates").select("data").eq("id", templateId).single()
-        if (data && data.data) {
-          setProjectName(data.data.projectName || "")
-          setCompanyFormData(data.data.companyFormData || {})
-          setSpecificationItems(data.data.specificationItems || [])
-          setCurrency(data.data.currency || "USD")
-          setInvoiceType(data.data.invoiceType || "create")
-          // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
-        }
-      }
-      fetchTemplate()
-    }
-
-    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ Supabase –ø–æ projectId
-    const projectIdParam = searchParams.get("projectId");
-    if (projectIdParam) {
-      const fetchProject = async () => {
-        const { data, error }: { data: any, error: any } = await supabase.from("projects").select("*").eq("id", projectIdParam).single();
-        if (!error && data) {
-          setProjectId(data.id);
-          setProjectName(data.name || "");
-          if (data.data?.companyFormData) setCompanyFormData(data.data.companyFormData);
-          if (data.data?.specificationItems) setSpecificationItems(data.data.specificationItems);
-          if (data.data?.currency) setCurrency(data.data.currency);
-          if (data.data?.invoiceType) setInvoiceType(data.data.invoiceType);
-          if (data.receipt_url) {
-            setReceiptUrl(data.receipt_url);
-            setIsReceiptUploaded(true);
-          }
-          // --- –í–û–°–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã ---
-          if (data.selectedTransferMethod) setSelectedTransferMethod(data.selectedTransferMethod);
-          if (data.bankTransferDetails) setBankTransferDetails(data.bankTransferDetails);
-          if (data.selectedCard) setSelectedCard(data.selectedCard);
-          if (data.cryptoAddress) setCryptoAddress(data.cryptoAddress);
-          if (data.cryptoNetwork) setCryptoNetwork(data.cryptoNetwork);
-
-          // --- –ï–î–ò–ù–´–ô –í–´–ë–û–† –®–ê–ì–ê ---
-          let step = data.currentStep || 1;
-          if (data.status === "completed" || data.client_confirmation_url) {
-            step = 7;
-          } else if (data.supplier_receipt_url && !data.client_confirmation_url) {
-            step = 6;
-          } else if (data.status === "receipt_approved" && step < 4) {
-            step = 4;
-          }
-          setCurrentStep(step);
-
-          // --- –°–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—É—Å—ã ---
-          setIsWaitingReceiptApproval(data.status === "waiting_receipt_approval");
-          setIsWaitingApproval(data.status === "pending");
-          setIsApproved(data.status === "approved");
-          if (data.client_confirmation_url) setClientConfirmationUrl(data.client_confirmation_url);
-          setIsProjectCompleted(data.status === "completed");
-        }
-      };
-      fetchProject();
-    }
-  }, [searchParams])
-
-  const handleCompanyFormChange = (e) => {
-    const { name, value } = e.target
-    setCompanyFormData((prev) => ({
-      ...prev,
-      [name]: value,
-    }))
-  }
-
-  // –ò–∑–º–µ–Ω–∏–º —Ñ—É–Ω–∫—Ü–∏—é handleVerifyCompany, —á—Ç–æ–±—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
-  const handleVerifyCompany = async () => {
-    setIsVerifying(true)
-    if (!companyFormData.name || !companyFormData.inn || !companyFormData.email) {
-      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è")
-      setIsVerifying(false)
-      return
-    }
-    setTimeout(async () => {
-      setIsVerifying(false)
-      setIsVerified(true)
-      await sendCompanyDataToTelegram(companyFormData)
-      // --- –°–æ—Ö—Ä–∞–Ω—è–µ–º currentStep = 2 ---
-      if (projectId) {
-        await supabase.from("projects").update({ currentStep: 2 }).eq("id", projectId)
-      }
-      setTimeout(() => {
-        setCurrentStep(2)
-      }, 1000)
-    }, 1500)
-  }
-
-  // –û–±–Ω–æ–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é handleSubmitSpecification, —á—Ç–æ–±—ã —É—á–∏—Ç—ã–≤–∞—Ç—å —Ç–∏–ø –∏–Ω–≤–æ–π—Å–∞
-  // –î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —à–∞–≥—É –æ–∂–∏–¥–∞–Ω–∏—è –æ–¥–æ–±—Ä–µ–Ω–∏—è
-  const handleSubmitSpecification = async () => {
-    if (invoiceType === "ready" && (!invoiceFile || !invoiceFile.url)) {
-      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –∏–Ω–≤–æ–π—Å–∞")
-      return
-    }
-    let invoiceFileUrl = null
-    if (invoiceType === "ready" && invoiceFile && invoiceFile.url) {
-      invoiceFileUrl = invoiceFile.url
-    }
-    try {
-      const {
-        data: { user },
-        error: authError,
-      } = await supabase.auth.getUser()
-      if (authError || !user) {
-        alert("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç")
-        return
-      }
-      // --- –°–û–ó–î–ê–Å–ú –ü–†–û–ï–ö–¢ –í SUPABASE ---
-      const { data, error } = await supabase
-        .from("projects")
-        .insert([
-          {
-            user_id: user?.id,
-            name: projectName,
-            data: {
-              companyFormData,
-              specificationItems,
-              currency,
-              invoiceType,
-              invoiceFile: invoiceFileUrl ? { url: invoiceFileUrl } : null,
-            },
-            status: "pending",
-            created_at: new Date().toISOString(),
-            currentStep: 2, // --- –°–æ—Ö—Ä–∞–Ω—è–µ–º —à–∞–≥ 2 –∫–∞–∫ —Å–ª–µ–¥—É—é—â–∏–π ---
-          },
-        ])
-        .select()
-        .single()
-      if (!error && data && data.id) {
-        setProjectId(data.id)
-        setIsWaitingApproval(true)
-        setProjectStatus("pending")
-        await sendSpecificationToTelegram({
-          projectName,
-          specificationItems,
-          currency,
-          invoiceType,
-          invoiceFile: invoiceFileUrl ? { url: invoiceFileUrl } : null,
-          projectId: data.id,
-        })
-        await supabase.from("projects").update({ currentStep: 2 }).eq("id", data.id)
-        // –£–ë–†–ê–ù setCurrentStep(3) ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å—Ç–∞—Ç—É—Å–∞ approved
-      } else {
-        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –±–∞–∑–µ: " + (error?.message || JSON.stringify(error)))
-        return
-      }
-    } catch (error: any) {
-      console.error("Error submitting specification:", error)
-      alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.")
-    }
-  }
-
-  // –î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–ª–∞—Ç–µ–∂–∫–∏
-  const handleShowPaymentInvoice = () => {
-    setShowPaymentInvoice(true)
-  }
-
-  // –î–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –≤—ã–±–æ—Ä—É —Å–ø–æ—Å–æ–±–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
-  const handleConfirmPayment = () => {
-    if (!isReceiptUploaded) {
-      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã")
-      return
-    }
-    // --- –°–æ—Ö—Ä–∞–Ω—è–µ–º currentStep = 3 ---
-    if (projectId) {
-      supabase.from("projects").update({ currentStep: 3 }).eq("id", projectId)
-    }
-    alert("–ß–µ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞.")
-    // –£–ë–†–ê–ù setCurrentStep(4) ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å—Ç–∞—Ç—É—Å–∞ receipt_approved
-  }
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Ñ—É–Ω–∫—Ü–∏—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç ---
-  const savePaymentMethodToProject = async (method: string) => {
-    if (projectId) {
-      await supabase.from("projects").update({ selectedTransferMethod: method }).eq("id", projectId)
-    }
-  }
-  const saveBankDetailsToProject = async (details: any) => {
-    if (projectId) {
-      await supabase.from("projects").update({ bankTransferDetails: details }).eq("id", projectId)
-    }
-  }
-  const saveCardToProject = async (cardId: number) => {
-    if (projectId) {
-      await supabase.from("projects").update({ selectedCard: cardId }).eq("id", projectId)
-    }
-  }
-  const saveCryptoToProject = async (address: string, network: string) => {
-    if (projectId) {
-      await supabase.from("projects").update({ cryptoAddress: address, cryptoNetwork: network }).eq("id", projectId)
-    }
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–µ—Ç–æ–¥–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
-  const handleTransferMethodSelection = (method) => {
-    setSelectedTransferMethod(method)
-    sendPaymentMethodToTelegram(method, projectName)
-    const loadingState = {}
-    loadingState[method] = true
-    setMethodLoadingState(loadingState)
-    savePaymentMethodToProject(method) // --- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø—Ä–æ–µ–∫—Ç ---
-    setTimeout(() => {
-      setMethodLoadingState({})
-      if (method === "p2p") {
-        setCurrentStep(5)
-        if (projectId) supabase.from("projects").update({ currentStep: 5 }).eq("id", projectId)
-      } else if (method === "crypto") {
-        setCurrentStep(5)
-        if (projectId) supabase.from("projects").update({ currentStep: 5 }).eq("id", projectId)
-      } else if (method === "bank-transfer") {
-        setCurrentStep(5)
-        if (projectId) supabase.from("projects").update({ currentStep: 5 }).eq("id", projectId)
-      } else {
-        setCurrentStep(6)
-        if (projectId) supabase.from("projects").update({ currentStep: 6 }).eq("id", projectId)
-      }
-    }, 1000)
-  }
-
-  // –î–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
-  const handleSelectCard = async (card: any) => {
-    setSelectedCard(card.id)
-    saveCardToProject(card.id) // --- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ä—Ç—É ---
-    setTimeout(async () => {
-      await sendPaymentDetailsToTelegram(
-        {
-          bank: card.bank,
-          cardNumber: card.card_number,
-          holderName: card.holderName,
-          expiryDate: card.expiryDate,
-        },
-        projectName,
-      )
-      setCurrentStep(6)
-      if (projectId) await supabase.from("projects").update({ currentStep: 6 }).eq("id", projectId)
-    }, 1000)
-  }
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–ø–µ—Ä–µ–≤–æ–¥–∞
-  const handleConfirmCryptoTransfer = async () => {
-    if (!cryptoAddress) {
-      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞")
-      return
-    }
-    await sendPaymentDetailsToTelegram(
-      {
-        address: cryptoAddress,
-        network: cryptoNetwork,
-      },
-      projectName,
-    )
-    saveCryptoToProject(cryptoAddress, cryptoNetwork) // --- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫—Ä–∏–ø—Ç–æ ---
-    setCurrentStep(6)
-    if (projectId) await supabase.from("projects").update({ currentStep: 6 }).eq("id", projectId)
-  }
-
-  // Handle specification item changes
-  const handleSpecificationItemChange = (id, field, value) => {
-    setSpecificationItems((prevItems) => {
-      return prevItems.map((item) => {
-        if (item.id === id) {
-          const updatedItem = { ...item, [field]: value }
-
-          // Auto-calculate total price if quantity or price per unit changes
-          if (field === "quantity" || field === "pricePerUnit") {
-            updatedItem.totalPrice = updatedItem.quantity * updatedItem.pricePerUnit
-          }
-
-          return updatedItem
-        }
-        return item
-      })
-    })
-  }
-
-  // Add new specification item
-  const addSpecificationItem = () => {
-    const newId = specificationItems.length > 0 ? Math.max(...specificationItems.map((item) => item.id)) + 1 : 1
-
-    setSpecificationItems([
-      ...specificationItems,
-      {
-        id: newId,
-        name: "",
-        code: "",
-        image: null,
-        quantity: 0,
-        unit: "—à—Ç",
-        pricePerUnit: 0,
-        totalPrice: 0,
-      },
-    ])
-
-    // Ensure fileInputRefs has enough slots
-    if (fileInputRefs.current.length < newId) {
-      fileInputRefs.current[newId] = null
-    }
-  }
-
-  // Remove specification item
-  const removeSpecificationItem = (id) => {
-    if (specificationItems.length > 1) {
-      setSpecificationItems(specificationItems.filter((item) => item.id !== id))
-    }
-  }
-
-  // Calculate total sum of all items
-  const calculateTotalSum = () => {
-    return specificationItems.reduce((sum, item) => sum + (item.totalPrice || 0), 0)
-  }
-
-  // Timeline steps configuration
-  const steps = [
-    {
-      id: 1,
-      title: "–ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è",
-      description: "–î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏",
-      icon: Building,
-    },
-    {
-      id: 2,
-      title: "–ó–∞—è–≤–∫–∞ –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é",
-      description: "–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã",
-      icon: FileText,
-    },
-    {
-      id: 3,
-      title: "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ",
-      description: "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—è–≤–∫–∏",
-      icon: Clock,
-    },
-    {
-      id: 4,
-      title: "–ú–µ—Ç–æ–¥",
-      description: "–í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã",
-      icon: Wallet,
-    },
-    {
-      id: 5,
-      title: "–†–µ–∫–≤–∏–∑–∏—Ç—ã",
-      description: "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥",
-      icon: CreditCard,
-    },
-    {
-      id: 6,
-      title: "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä—ã",
-      description: "–î–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ –æ–ø–ª–∞—Ç–µ",
-      icon: FileText,
-    },
-    {
-      id: 7,
-      title: "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è",
-      description: "–û—Ç–≤–µ—Ç –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞",
-      icon: CheckCircle,
-    },
-  ]
-
-  // –û–±–Ω–æ–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é handleSaveTemplate, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–∏–ø –∏–Ω–≤–æ–π—Å–∞
-  // Add this function to handle template saving
-  const handleSaveTemplate = async () => {
-    console.log('handleSaveTemplate called');
-    if (!templateName.trim()) {
-      alert('–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –ø—É—Å—Ç–æ–µ!');
-      return;
-    }
-    try {
-      const { data: { user }, error: authError } = await supabase.auth.getUser();
-      console.log('user:', user, 'authError:', authError);
-      if (authError || !user) {
-        alert("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç");
-        return;
-      }
-      const data = { projectName, companyFormData, specificationItems, currency, invoiceType };
-      const template = { user_id: user.id, name: templateName, description: templateDescription, data };
-      console.log('template to insert:', template);
-      const { error } = await supabase.from("templates").insert([template]);
-      if (!error) {
-        setIsSaveDialogOpen(false);
-        alert("–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!");
-      } else {
-        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞: " + error.message);
-        console.error('Supabase error:', error);
-      }
-    } catch (error) {
-      alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞: " + (error.message || error));
-      console.error('Catch error:', error);
-    }
-  }
-
-  // –ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–æ–¥–∞
-  // –ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–æ–¥–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≥–ª—É–±–æ–∫–∏–º–∏ –∏ —Ä–æ—Å–∫–æ—à–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏
-  const transferMethods = [
-    {
-      id: "bank-transfer",
-      title: "–û–ø–ª–∞—Ç–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É –±–µ–∑ –Ω–∞–ª–æ–º",
-      description: "–ü—Ä—è–º–æ–π –±–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Å—á–µ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤",
-      icon: Landmark,
-      gradient: "from-slate-900 via-gray-900 to-black",
-      accentGradient: "from-amber-600 via-yellow-600 to-amber-700",
-      iconBg: "bg-amber-600/30",
-      iconColor: "text-amber-300",
-      benefits: ["–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥", "–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö —Å—É–º–º", "–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"],
-      emoji: "üèõÔ∏è",
-      commission: "0.1-0.5%",
-      time: "1-3 –¥–Ω—è",
-      luxuryAccent: "from-amber-400 via-yellow-500 to-amber-600",
-      shadowColor: "shadow-amber-900/40",
-    },
-    {
-      id: "p2p",
-      title: "–û–ø–ª–∞—Ç–∞ p2p –∫–∞—Ä—Ç–∞-–∫–∞—Ä—Ç–∞",
-      description: "–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞–ø—Ä—è–º—É—é —Å –≤–∞—à–µ–π –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä—Ç—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞",
-      icon: CreditCard,
-      gradient: "from-emerald-900 via-green-900 to-teal-900",
-      accentGradient: "from-emerald-500 via-green-500 to-teal-600",
-      iconBg: "bg-emerald-600/30",
-      iconColor: "text-emerald-300",
-      benefits: ["–ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–≤–æ–¥", "–ù–∏–∑–∫–∞—è –∫–æ–º–∏—Å—Å–∏—è", "–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"],
-      emoji: "üí≥",
-      commission: "0.5-1%",
-      time: "–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ",
-      luxuryAccent: "from-emerald-400 via-green-500 to-teal-500",
-      shadowColor: "shadow-emerald-900/40",
-    },
-    {
-      id: "crypto",
-      title: "USDT –∫—Ä–∏–ø—Ç–æ",
-      description: "–û–ø–ª–∞—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–∞ USDT —á–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—É—é –±–∏—Ä–∂—É",
-      icon: Wallet,
-      gradient: "from-indigo-900 via-purple-900 to-violet-900",
-      accentGradient: "from-violet-500 via-purple-500 to-indigo-600",
-      iconBg: "bg-violet-600/30",
-      iconColor: "text-violet-300",
-      benefits: ["–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã", "–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π", "–ë—ã—Å—Ç—Ä–æ–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ"],
-      emoji: "‚Çø",
-      commission: "0.1%",
-      time: "5-30 –º–∏–Ω",
-      luxuryAccent: "from-violet-400 via-purple-500 to-indigo-500",
-      shadowColor: "shadow-violet-900/40",
-    },
-  ]
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
-  const handleAddNewBankAccount = async () => {
-    if (
-      !newBankAccountDetails.name ||
-      !newBankAccountDetails.details.recipientName ||
-      !newBankAccountDetails.details.bankName
-    ) {
-      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è")
-      return
-    }
-    try {
-      const {
-        data: { user },
-        error: authError,
-      } = await supabase.auth.getUser()
-      if (authError || !user) {
-        alert("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç")
-        return
-      }
-      const { data, error } = await supabase
-        .from("bank_accounts")
-        .insert([
-          {
-            user_id: user.id,
-            name: newBankAccountDetails.name,
-            country: newBankAccountDetails.country,
-            details: newBankAccountDetails.details,
-          },
-        ])
-        .select()
-      if (!error && data && data[0]) {
-        setSavedBankAccounts((prev) => [data[0], ...prev])
-        setSelectedBankAccount(data[0].id)
-        setShowAddBankAccountForm(false)
-        setShowSavedBankAccounts(false)
-        setNewBankAccountDetails({
-          name: "",
-          country: "china",
-          details: {
-            recipientName: "",
-            recipientAddress: "",
-            bankName: "",
-            bankAddress: "",
-            accountNumber: "",
-            swift: "",
-            paymentPurpose: "",
-            transferCurrency: "USD",
-            cnapsCode: "",
-            iban: "",
-            otherDetails: "",
-          },
-        })
-        await sendPaymentDetailsToTelegram(newBankAccountDetails.details, projectName)
-      } else {
-        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤")
-      }
-    } catch (error: any) {
-      console.error("Error adding new bank account:", error)
-      alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞.")
-    }
-  }
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
-  const confirmDeleteBankAccount = async () => {
-    if (bankAccountToDelete) {
-      const { error } = await supabase.from("bank_accounts").delete().eq("id", bankAccountToDelete)
-      if (!error) {
-        setSavedBankAccounts(savedBankAccounts.filter((acc) => acc.id !== bankAccountToDelete))
-        setBankAccountToDelete(null)
-        setShowDeleteBankAccountConfirm(false)
-      } else {
-        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤")
-      }
-    }
-  }
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Ñ—É–Ω–∫—Ü–∏—é –≤—ã–±–æ—Ä–∞ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
-  const handleSelectBankAccount = async (acc: any) => {
-    setBankTransferDetails(acc.details)
-    setSelectedBankAccount(acc.id)
-    setShowSavedBankAccounts(false)
-    await sendPaymentDetailsToTelegram(acc.details, projectName)
-    saveBankDetailsToProject(acc.details) // --- —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∫–≤–∏–∑–∏—Ç—ã ---
-  }
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Ñ—É–Ω–∫—Ü–∏—é handleSaveBankAccount ---
-  const handleSaveBankAccount = async (data: any) => {
-    const { name, country, details } = data
-    const { data: userData } = await supabase.auth.getUser()
-    if (!userData?.user) {
-      alert("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç")
-      return
-    }
-    const { data: inserted, error } = await supabase
-      .from("bank_accounts")
-      .insert([
-        {
-          user_id: userData.user.id,
-          name,
-          country,
-          details,
-        },
-      ])
-      .select()
-    if (!error && inserted && inserted[0]) {
-      setSavedBankAccounts((prev) => [inserted[0], ...prev])
-      setSelectedBankAccount(inserted[0].id)
-      setShowAddBankAccountForm(false)
-      setSelectedBankCountry(null)
-      setNewBankAccountDetails({
-        name: "",
-        country: "china",
-        details: {
-          recipientName: "",
-          recipientAddress: "",
-          bankName: "",
-          bankAddress: "",
-          accountNumber: "",
-          swift: "",
-          paymentPurpose: "",
-          transferCurrency: "USD",
-          cnapsCode: "",
-          iban: "",
-          otherDetails: "",
-        },
-      })
-      await sendPaymentDetailsToTelegram(data.details, projectName)
-    } else {
-      alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤")
-    }
-  }
-
-  const [projectId, setProjectId] = useState<string | null>(null)
-  const [projectStatus, setProjectStatus] = useState<string>("pending")
-
-  // --- –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∞–ø—Ä—É–≤–∞ —á–µ–∫–∞ ---
-  const [isWaitingReceiptApproval, setIsWaitingReceiptApproval] = useState(false)
-
-  // Polling —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–µ–∫—Ç–∞
-  useEffect(() => {
-    if (!projectId || !isWaitingApproval) return
-    const interval = setInterval(async () => {
-      const { data, error } = await supabase.from("projects").select("status").eq("id", projectId).single()
-      if (!error && data && data.status) {
-        setProjectStatus(data.status)
-        if (data.status === "approved") {
-          setIsWaitingApproval(false)
-          setIsApproved(true)
-          setCurrentStep(3)
-          // --- –û–±–Ω–æ–≤–ª—è–µ–º currentStep –≤ –±–∞–∑–µ ---
-          await supabase.from("projects").update({ currentStep: 3 }).eq("id", projectId)
-          clearInterval(interval)
-        }
-      }
-    }, 5000)
-    return () => clearInterval(interval)
-  }, [projectId, isWaitingApproval])
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ ---
-  const [templates, setTemplates] = useState<any[]>([])
-  const [isTemplatesLoading, setIsTemplatesLoading] = useState(false)
-  const [templateToDelete, setTemplateToDelete] = useState<string | null>(null)
-  const [showDeleteTemplateConfirm, setShowDeleteTemplateConfirm] = useState(false)
-
-  // --- –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ Supabase ---
-  const fetchTemplates = async () => {
-    setIsTemplatesLoading(true)
-    try {
-      const {
-        data: { user },
-        error,
-      } = await supabase.auth.getUser()
-      if (error || !user) {
-        setIsTemplatesLoading(false)
-        return
-      }
-      const { data, error: fetchError } = await supabase
-        .from("templates")
-        .select("*")
-        .eq("user_id", user.id)
-        .order("created_at", { ascending: false })
-      if (!fetchError && data) setTemplates(data)
-    } catch (error) {
-      console.error("Error fetching templates:", error)
-    }
-    setIsTemplatesLoading(false)
-  }
-
-  // --- useEffect –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ ---
-  useEffect(() => {
-    fetchTemplates()
-  }, [])
-
-  // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ ---
-  const handleDeleteTemplate = async (templateId: string) => {
-    const { error } = await supabase.from("templates").delete().eq("id", templateId)
-    if (!error) {
-      setShowDeleteTemplateConfirm(false)
-      setTemplateToDelete(null)
-      fetchTemplates()
-    } else {
-      alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞")
-    }
-  }
-
-  // --- Polling —Å—Ç–∞—Ç—É—Å–∞ receipt ---
-  useEffect(() => {
-    if (!projectId || !isWaitingReceiptApproval) return
-    const interval = setInterval(async () => {
-      const { data, error } = await supabase.from("projects").select("status").eq("id", projectId).single()
-      if (!error && data && data.status) {
-        if (data.status === "receipt_approved") {
-          setIsWaitingReceiptApproval(false)
-          setCurrentStep(4)
-          // --- –û–±–Ω–æ–≤–ª—è–µ–º currentStep –≤ –±–∞–∑–µ ---
-          await supabase.from("projects").update({ currentStep: 4 }).eq("id", projectId)
-          clearInterval(interval)
-        }
-        if (data.status === "receipt_rejected") {
-          setIsWaitingReceiptApproval(false)
-          alert("–ß–µ–∫ –æ—Ç–∫–ª–æ–Ω—ë–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —á–µ–∫.")
-          setIsReceiptUploaded(false)
-          setReceiptFile(null)
-          setReceiptUrl(null)
-          clearInterval(interval)
-        }
-      }
-    }, 5000)
-    return () => clearInterval(interval)
-  }, [projectId, isWaitingReceiptApproval])
-
-  // --- useEffect –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —á–µ–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —à–∞–≥ 6 ---
-  useEffect(() => {
-    // DEBUG LOG –≤–Ω–µ —É—Å–ª–æ–≤–∏—è
-    console.log('[DEBUG] useEffect (step 6) TRIGGERED', {
-      currentStep,
-      projectId,
-      email: companyFormData.email,
-      companyName: companyFormData.name,
-      amount: calculateTotalSum(),
-      currency,
-      paymentMethod: selectedTransferMethod,
-      alreadySent: window.__supplierReceiptRequestSent
-    });
-    if (
-      currentStep === 6 &&
-      projectId &&
-      companyFormData.email &&
-      projectName &&
-      currency &&
-      selectedTransferMethod &&
-      !window.__supplierReceiptRequestSent
-    ) {
-      // DEBUG LOG –≤–Ω—É—Ç—Ä–∏ —É—Å–ª–æ–≤–∏—è
-      console.log('[DEBUG] useEffect (step 6): –£–°–õ–û–í–ò–ï –ü–†–û–®–õ–û, –æ—Ç–ø—Ä–∞–≤–ª—è—é supplier_receipt')
-      // –ü–æ–ª—É—á–∞–µ–º —Å—É–º–º—É
-      const amount = calculateTotalSum()
-      sendSupplierReceiptRequestToManagerClient({
-        projectId,
-        email: companyFormData.email,
-        companyName: companyFormData.name,
-        amount,
-        currency,
-        paymentMethod: selectedTransferMethod,
-      })
-      // –°—Ç–∞–≤–∏–º —Ñ–ª–∞–≥, —á—Ç–æ–±—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
-      window.__supplierReceiptRequestSent = true
-    }
-  }, [
-    currentStep,
-    projectId,
-    companyFormData.email,
-    companyFormData.name,
-    projectName,
-    currency,
-    selectedTransferMethod,
-  ])
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è supplier_receipt_url ---
-  const [supplierReceiptUrl, setSupplierReceiptUrl] = useState<string | null>(null)
-
-  // --- Polling supplier_receipt_url –Ω–∞ —à–∞–≥–µ 6 ---
-  useEffect(() => {
-    if (currentStep !== 6 || !projectId) return
-    const interval = setInterval(async () => {
-      const { data, error } = await supabase
-        .from("projects")
-        .select("supplier_receipt_url")
-        .eq("id", projectId)
-        .single()
-      if (!error && data && data.supplier_receipt_url) {
-        setSupplierReceiptUrl(data.supplier_receipt_url)
-        setShowProceedToConfirmation(true)
-        // --- –û–±–Ω–æ–≤–ª—è–µ–º currentStep –≤ –±–∞–∑–µ –Ω–∞ 6 ---
-        await supabase.from("projects").update({ currentStep: 6 }).eq("id", projectId)
-        clearInterval(interval)
-      }
-    }, 5000)
-    return () => clearInterval(interval)
-  }, [currentStep, projectId])
-
-  // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook
-  const handleTestTelegram = async () => {
-    console.log("üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –≤ Telegram...")
-    try {
-      await sendTelegramMessageClient("üß™ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è")
-      alert("‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram.")
-    } catch (error) {
-      console.error("‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram:", error)
-      alert("‚ùå –û—à–∏–±–∫–∞: " + error.message)
-    }
-  }
-
-  const handleSetWebhook = async () => {
-    try {
-      const webhookUrl = `${window.location.origin}/api/telegram-webhook`
-      console.log("üîó –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º webhook:", webhookUrl)
-
-      const response = await fetch("/api/telegram/set-webhook", {
-        method: "POST",
-        headers: { "Content-Type": "application/json" },
-        body: JSON.stringify({ webhookUrl }),
-      })
-
-      const result = await response.json()
-
-      if (result.success) {
-        alert("‚úÖ Webhook —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
-      } else {
-        alert("‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook: " + result.error)
-      }
-    } catch (error) {
-      console.error("‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook:", error)
-      alert("‚ùå –û—à–∏–±–∫–∞: " + error.message)
-    }
-  }
-
-  const handleCheckWebhook = async () => {
-    try {
-      const response = await fetch("/api/telegram/set-webhook")
-      const result = await response.json()
-
-      console.log("üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook:", result)
-
-      if (result.result) {
-        const info = result.result
-        alert(
-          `üìã Webhook –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:\nURL: ${info.url || "–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"}\nPending updates: ${info.pending_update_count || 0}\nLast error: ${info.last_error_message || "–ù–µ—Ç –æ—à–∏–±–æ–∫"}`,
-        )
-      }
-    } catch (error) {
-      console.error("‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è webhook info:", error)
-      alert("‚ùå –û—à–∏–±–∫–∞: " + error.message)
-    }
-  }
-
-  const handleTestBot = async () => {
-    try {
-      const response = await fetch("/api/telegram/test-bot")
-      const result = await response.json()
-
-      if (result.success) {
-        alert(`‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!\n–ò–º—è: ${result.bot.first_name}\nUsername: @${result.bot.username}`)
-      } else {
-        alert(`‚ùå –û—à–∏–±–∫–∞ –±–æ—Ç–∞: ${result.error}`)
-      }
-    } catch (error) {
-      console.error("‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞:", error)
-      alert("‚ùå –û—à–∏–±–∫–∞: " + error.message)
-    }
-  }
-
-  // 1. –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —à–∞–≥ 7:
-  const [showProceedToConfirmation, setShowProceedToConfirmation] = useState(false)
-
-  // –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
-  const [isClientConfirmationUploading, setIsClientConfirmationUploading] = useState(false)
-  const [clientConfirmationUrl, setClientConfirmationUrl] = useState<string | null>(null)
-  const [isProjectCompleted, setIsProjectCompleted] = useState(false)
-
-  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
-  const handleClientConfirmationUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
-    if (e.target.files && e.target.files[0]) {
-      const file = e.target.files[0]
-      
-      try {
-        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
-        setIsClientConfirmationUploading(true)
-        
-        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage
-        const fileExt = file.name.split(".").pop()
-        const fileName = `client-confirmation-${projectId}-${Date.now()}.${fileExt}`
-        const uploadResult = await supabase.storage.from("client-confirmations").upload(fileName, file)
-        
-        if (uploadResult.error) {
-          alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: " + uploadResult.error.message)
-          setIsClientConfirmationUploading(false)
-          return
-        }
-        
-        // –ü–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É
-        const { data } = supabase.storage.from("client-confirmations").getPublicUrl(fileName)
-        
-        if (data?.publicUrl) {
-          // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–µ–∫—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
-          await supabase.from("projects").update({
-            client_confirmation_url: data.publicUrl,
-            status: "completed",
-            completed_at: new Date().toISOString()
-          }).eq("id", projectId)
-          
-          setClientConfirmationUrl(data.publicUrl)
-          setIsProjectCompleted(true)
-          
-          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª –≤ Telegram –º–µ–Ω–µ–¥–∂–µ—Ä—É
-          await sendTelegramDocumentClient(
-            data.publicUrl,
-            `–ü—Ä–æ–µ–∫—Ç: ${projectName}\n–ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∏–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è. –ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω.`
-          )
-          
-          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
-          alert("–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω! –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ.")
-          router.push('/dashboard');
-        }
-      } catch (error) {
-        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:", error)
-        alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.")
-      } finally {
-        setIsClientConfirmationUploading(false)
-      }
-    }
-  }
-
-  // --- –í –±–ª–æ–∫–µ —Ç–∞–π–º–ª–∞–π–Ω–∞ ---
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ–≥–æ —à–∞–≥–∞ ---
-  const [maxStepReached, setMaxStepReached] = useState(1);
-
-  // --- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ –≤–ø–µ—Ä—ë–¥ –æ–±–Ω–æ–≤–ª—è—Ç—å maxStepReached ---
-  useEffect(() => {
-    if (currentStep > maxStepReached) setMaxStepReached(currentStep);
-  }, [currentStep]);
-
-  // --- –î–û–ë–ê–í–ò–¢–¨ —Ö—É–∫ –¥–ª—è –ø–µ—á–∞—Ç–∏ –∏–Ω–≤–æ–π—Å–∞ ---
-  const invoiceRef = useRef<HTMLDivElement>(null);
-  const handlePrintInvoice = () => {
-    if (!invoiceRef.current) return;
-    const printContents = invoiceRef.current.innerHTML;
-    const originalContents = document.body.innerHTML;
-    document.body.innerHTML = printContents;
-    window.print();
-    document.body.innerHTML = originalContents;
-    window.location.reload(); // —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å SPA –≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
-  };
-
-  // --- useEffect: –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è supplier_receipt_url –Ω–∞ —à–∞–≥–µ 6 –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫ ---
-  useEffect(() => {
-    if (
-      currentStep === 6 &&
-      projectId &&
-      supplierReceiptUrl &&
-      !clientConfirmationUrl &&
-      !window.__clientConfirmationRequestSent
-    ) {
-      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –≤ Telegram –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫
-      sendClientConfirmationRequestToTelegramClient({
-        projectId,
-        email: companyFormData.email,
-        companyName: companyFormData.name,
-      })
-      window.__clientConfirmationRequestSent = true
-    }
-  }, [currentStep, projectId, supplierReceiptUrl, clientConfirmationUrl, companyFormData.email, companyFormData.name])
+const steps = [
+  { id: 1, title: "–ö–∞—Ä—Ç–æ—á–∫–∞", description: "–î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏", icon: Building },
+  { id: 2, title: "–ó–∞—è–≤–∫–∞", description: "–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è", icon: FileText },
+  { id: 3, title: "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ", description: "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á—ë—Ç–∞", icon: CreditCard },
+  { id: 4, title: "–ú–µ—Ç–æ–¥", description: "–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã", icon: Landmark },
+  { id: 5, title: "–†–µ–∫–≤–∏–∑–∏—Ç—ã", description: "–†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã", icon: Wallet },
+  { id: 6, title: "–ü–æ–ª—É—á–µ–Ω–∏–µ", description: "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤", icon: Settings },
+  { id: 7, title: "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ", description: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ", icon: CheckCircle },
+]
+
+function CreateProjectPageContent() {
+  const { currentStep } = useCreateProjectContext();
+  const [isLoading, setIsLoading] = useState(false);
+  const [isVerified, setIsVerified] = useState(false);
+  const [isVerifying, setIsVerifying] = useState(false);
+  const [setIsSaveDialogOpen, setSetIsSaveDialogOpen] = useState(false);
 
   return (
     <div className="min-h-screen bg-white dark:bg-gray-950">
       {/* Fixed Header */}
-      <div className="fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800">
-        <div className="max-w-screen-xl mx-auto px-4 py-3">
-          <div className="flex items-center justify-between">
-            <div className="flex items-center gap-4">
-              <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                <Button
-                  variant="outline"
-                  size="sm"
-                  className="gap-2 rounded-full"
-                  onClick={() => router.push("/dashboard")}
-                >
-                  <ChevronLeft className="h-4 w-4" />
-                  <span>–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–æ–µ–∫—Ç–∞–º</span>
-                </Button>
-              </motion.div>
-              <h1 className="text-xl font-bold text-gray-900 dark:text-white">–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</h1>
-            </div>
-
-            <div className="flex items-center gap-3">
-              <Input
-                value={projectName}
-                onChange={(e) => setProjectName(e.target.value)}
-                className="w-[240px] h-9 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"
-              />
-
-              <div className="flex items-center gap-2">
-                {/* –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram */}
-                <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                  <Button
-                    variant="outline"
-                    size="sm"
-                    className="gap-2 rounded-full bg-red-500 text-white hover:bg-red-600"
-                    onClick={handleTestTelegram}
-                  >
-                    üß™ –¢–µ—Å—Ç Telegram
-                  </Button>
-                </motion.div>
-                <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                  <Button
-                    variant="outline"
-                    size="sm"
-                    className="gap-2 rounded-full bg-green-500 text-white hover:bg-green-600"
-                    onClick={handleTestBot}
-                  >
-                    ü§ñ –¢–µ—Å—Ç –ë–æ—Ç–∞
-                  </Button>
-                </motion.div>
-                <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                  <Button variant="outline" size="sm" className="gap-2 rounded-full" onClick={handleSetWebhook}>
-                    <Settings className="h-4 w-4" />
-                    Webhook
-                  </Button>
-                </motion.div>
-                <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                  <Button variant="outline" size="sm" className="gap-2 rounded-full" onClick={handleCheckWebhook}>
-                    <Info className="h-4 w-4" />
-                    –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
-                  </Button>
-                </motion.div>
-                <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                  <Button
-                    variant="outline"
-                    size="sm"
-                    className="gap-2 rounded-full"
-                    onClick={() => setIsSaveDialogOpen(true)}
-                  >
-                    <Save className="h-4 w-4" />
-                    <span className="hidden sm:inline">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
-                  </Button>
-                </motion.div>
-                <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                  <Button size="sm" className="gap-2 rounded-full bg-blue-500 hover:bg-blue-600">
-                    <Share2 className="h-4 w-4" />
-                    <span className="hidden sm:inline">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
-                  </Button>
-                </motion.div>
-              </div>
-            </div>
-          </div>
-        </div>
-      </div>
-
-      {/* Main Content with Padding for Fixed Header */}
-      <div className="pt-16 pb-8">
-        <div className="max-w-screen-xl mx-auto px-4">
-          {/* Timeline */}
-          <div className="mt-8 mb-12">
-            <div className="relative">
-              {/* Progress Line */}
-              <div className="absolute top-6 left-0 right-0 h-1 bg-gray-200 dark:bg-gray-700" />
-
-              {/* Completed Line */}
-              <div
-                className="absolute top-6 left-0 h-1 bg-blue-500 transition-all duration-500"
-                style={{ width: `${((currentStep - 1) / (steps.length - 1)) * 100}%` }}
-              />
-
-              {/* Steps */}
-              <div className="relative flex justify-between">
-                {steps.map((step, index) => {
-                  const StepIcon = step.icon
-                  const isCompleted = index + 1 < currentStep
-                  const isCurrent = index + 1 === currentStep
-                  const isPast = index + 1 <= maxStepReached;
-                  const isClickable = isPast && index + 1 !== currentStep;
-
-                  return (
-                    <div key={step.id} className="flex flex-col items-center group">
-                      {/* Tooltip that appears on hover */}
-                      <div className="absolute top-full mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-20">
-                        <div className="w-2 h-2 bg-gray-900 transform rotate-45 mx-auto -mb-1"></div>
-                        <div className="bg-gray-900 text-white text-xs rounded py-1 px-2 max-w-[150px]">
-                          <p className="font-medium">{step.title}</p>
-                          <p className="text-gray-300 text-[10px]">{step.description}</p>
-                          {isClickable && <p className="text-blue-300 text-[10px] mt-1">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞</p>}
-                        </div>
-                      </div>
-
-                      {/* Circle Icon - Make it a button for completed steps */}
-                      <motion.button
-                        type="button"
-                        disabled={!isClickable}
-                        onClick={() => {
-                          if (isClickable) {
-                            // –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —à–∞–≥—É –±–µ–∑ —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
-                            setCurrentStep(index + 1)
-
-                            // –ï—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 1, –Ω–æ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã, —Å–æ—Ö—Ä–∞–Ω—è–µ–º —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
-                            if (index + 1 === 1 && isVerified) {
-                              // –ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º, –æ—Å—Ç–∞–≤–ª—è–µ–º isVerified = true
-                            }
-                          }
-                        }}
-                        initial={{ scale: 0 }}
-                        animate={{ scale: 1 }}
-                        transition={{ delay: index * 0.1, type: "spring", stiffness: 300 }}
-                        className={`relative z-10 flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300
-                         ${
-                           isCompleted
-                             ? "bg-blue-500 border-blue-500 shadow-md shadow-blue-200 dark:shadow-blue-900/30"
-                             : isCurrent
-                               ? "bg-white dark:bg-gray-800 border-blue-500 ring-4 ring-blue-100 dark:ring-blue-900/30"
-                               : "bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600"
-                         }
-                         ${isClickable ? "cursor-pointer hover:scale-110" : "cursor-default"}
-                       `}
-                      >
-                        {isCompleted ? (
-                          <CheckCircle className="h-6 w-6 text-white" />
-                        ) : (
-                          <StepIcon
-                            className={`h-6 w-6 ${isCurrent ? "text-blue-500" : "text-gray-400 dark:text-gray-500"}`}
-                          />
-                        )}
-                      </motion.button>
-
-                      {/* Short label below the circle - just the title */}
-                      <motion.div
-                        initial={{ opacity: 0, y: 10 }}
-                        animate={{ opacity: 1, y: 0 }}
-                        transition={{ delay: index * 0.1 + 0.2, type: "spring" }}
-                        className="mt-2 text-center"
-                      >
-                        <button
-                          type="button"
-                          disabled={!isClickable}
-                          onClick={() => {
-                            if (isClickable) {
-                              // –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —à–∞–≥—É –±–µ–∑ —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
-                              setCurrentStep(index + 1)
-
-                              // –ï—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 1, –Ω–æ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã, —Å–æ—Ö—Ä–∞–Ω—è–µ–º —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
-                              if (index + 1 === 1 && isVerified) {
-                                // –ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º, –æ—Å—Ç–∞–≤–ª—è–µ–º isVerified = true
-                              }
-                            }
-                          }}
-                          className={`text-xs font-medium ${
-                            isCompleted || isCurrent
-                              ? "text-gray-900 dark:text-white"
-                              : "text-gray-500 dark:text-gray-400"
-                          } ${isClickable ? "cursor-pointer hover:underline" : "cursor-default"}`}
-                        >
-                          {step.title.split(" ")[0]}
-                        </button>
-                      </motion.div>
-                    </div>
-                  )
-                })}
-              </div>
-            </div>
-          </div>
-
-          {/* Current Step Content */}
-          <AnimatePresence mode="wait">
-            {currentStep === 1 && (
-              <motion.div
-                key="company-form"
-                initial={{ opacity: 0, y: 20 }}
-                animate={{ opacity: 1, y: 0 }}
-                exit={{ opacity: 0, y: -20 }}
-                transition={{ duration: 0.3 }}
-                className="max-w-4xl mx-auto mt-24"
-              >
-                {isLoading ? (
-                  <div className="flex flex-col items-center justify-center py-12">
-                    <div className="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"></div>
-                    <p className="text-gray-600 dark:text-gray-400">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏...</p>
-                  </div>
-                ) : isVerified ? (
-                  <motion.div
-                    initial={{ scale: 0.9, opacity: 0 }}
-                    animate={{ scale: 1, opacity: 1 }}
-                    className="bg-green-50 dark:bg-green-900/20 p-6 rounded-xl border border-green-200 dark:border-green-800 mb-6 text-center"
-                  >
-                    <motion.div
-                      initial={{ scale: 0 }}
-                      animate={{ scale: 1 }}
-                      transition={{ type: "spring", stiffness: 200, damping: 10 }}
-                    >
-                      <CheckCircle className="h-16 w-16 text-green-500 mx-auto mb-4" />
-                    </motion.div>
-                    <h3 className="text-xl font-bold text-green-700 dark:text-green-400 mb-2">
-                      –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
-                    </h3>
-                    <p className="text-gray-600 dark:text-gray-400 mb-4">
-                      –î–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É...
-                    </p>
-                  </motion.div>
-                ) : (
-                  <>
-                    {/* –û–±–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –≤—Ç–æ—Ä–æ–≥–æ —à–∞–≥–∞: */}
-                    <div className="bg-blue-50 dark:bg-blue-900/20 p-5 rounded-xl border border-blue-200 dark:border-blue-800 mb-8">
-                      <div className="flex items-start">
-                        <Info className="h-5 w-5 text-blue-500 mr-3 mt-0.5 flex-shrink-0" />
-                        <p className="text-sm text-blue-700 dark:text-blue-400">
-                          –ù–∞ —ç—Ç–æ–º —à–∞–≥–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π –∏–Ω–≤–æ–π—Å. –í—ã–±–µ—Ä–∏—Ç–µ
-                          –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ.
-                        </p>
-                      </div>
-                    </div>
-
-                    <div className="space-y-8">
-                      {/* –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
-                      <div className="space-y-6 bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
-                        <div>
-                          <h2 className="text-xl font-bold mb-2">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
-                          <p className="text-sm text-gray-500 dark:text-gray-400">
-                            –î–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
-                          </p>
-                        </div>
-
-                        <div className="space-y-4">
-                          <div className="space-y-2">
-                            <Label htmlFor="company-name">
-                              –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ <span className="text-red-500">*</span>
-                            </Label>
-                            <Input
-                              id="company-name"
-                              name="name"
-                              value={companyFormData.name}
-                              onChange={handleCompanyFormChange}
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                              required
-                            />
-                          </div>
-
-                          <div className="space-y-2">
-                            <Label htmlFor="company-legal-name">
-                              –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ <span className="text-red-500">*</span>
-                            </Label>
-                            <Input
-                              id="company-legal-name"
-                              name="legalName"
-                              value={companyFormData.legalName}
-                              onChange={handleCompanyFormChange}
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                              required
-                            />
-                          </div>
-
-                          <div className="grid grid-cols-2 gap-4">
-                            <div className="space-y-2">
-                              <Label htmlFor="company-inn">
-                                –ò–ù–ù <span className="text-red-500">*</span>
-                              </Label>
-                              <Input
-                                id="company-inn"
-                                name="inn"
-                                value={companyFormData.inn}
-                                onChange={handleCompanyFormChange}
-                                className="bg-gray-50 dark:bg-gray-800/50"
-                                required
-                              />
-                            </div>
-
-                            <div className="space-y-2">
-                              <Label htmlFor="company-kpp">
-                                –ö–ü–ü <span className="text-red-500">*</span>
-                              </Label>
-                              <Input
-                                id="company-kpp"
-                                name="kpp"
-                                value={companyFormData.kpp}
-                                onChange={handleCompanyFormChange}
-                                className="bg-gray-50 dark:bg-gray-800/50"
-                                required
-                              />
-                            </div>
-                          </div>
-
-                          <div className="space-y-2">
-                            <Label htmlFor="company-ogrn">
-                              –û–ì–†–ù <span className="text-red-500">*</span>
-                            </Label>
-                            <Input
-                              id="company-ogrn"
-                              name="ogrn"
-                              value={companyFormData.ogrn}
-                              onChange={handleCompanyFormChange}
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                              required
-                            />
-                          </div>
-
-                          <div className="space-y-2">
-                            <Label htmlFor="company-address">
-                              –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å <span className="text-red-500">*</span>
-                            </Label>
-                            <Input
-                              id="company-address"
-                              name="address"
-                              value={companyFormData.address}
-                              onChange={handleCompanyFormChange}
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                              required
-                            />
-                          </div>
-                        </div>
-                      </div>
-
-                      {/* –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã */}
-                      <div className="space-y-6 bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
-                        <div>
-                          <h2 className="text-xl font-bold mb-2">–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</h2>
-                          <p className="text-sm text-gray-500 dark:text-gray-400">–î–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π</p>
-                        </div>
-
-                        <div className="space-y-4">
-                          <div className="space-y-2">
-                            <Label htmlFor="bank-name">
-                              –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ <span className="text-red-500">*</span>
-                            </Label>
-                            <Input
-                              id="bank-name"
-                              name="bankName"
-                              value={companyFormData.bankName}
-                              onChange={handleCompanyFormChange}
-                              placeholder="–ê–û ¬´–°–±–µ—Ä–±–∞–Ω–∫¬ª"
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                              required
-                            />
-                          </div>
-
-                          <div className="space-y-2">
-                            <Label htmlFor="bank-account">
-                              –†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç <span className="text-red-500">*</span>
-                            </Label>
-                            <Input
-                              id="bank-account"
-                              name="bankAccount"
-                              value={companyFormData.bankAccount}
-                              onChange={handleCompanyFormChange}
-                              placeholder="40702810123450101230"
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                              required
-                            />
-                          </div>
-
-                          <div className="grid grid-cols-2 gap-4">
-                            <div className="space-y-2">
-                              <Label htmlFor="bank-corr-account">
-                                –ö–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—Å–∫–∏–π —Å—á–µ—Ç <span className="text-red-500">*</span>
-                              </Label>
-                              <Input
-                                id="bank-corr-account"
-                                name="bankCorrAccount"
-                                value={companyFormData.bankCorrAccount}
-                                onChange={handleCompanyFormChange}
-                                placeholder="30101810400000000225"
-                                className="bg-gray-50 dark:bg-gray-800/50"
-                                required
-                              />
-                            </div>
-
-                            <div className="space-y-2">
-                              <Label htmlFor="bank-bik">
-                                –ë–ò–ö <span className="text-red-500">*</span>
-                              </Label>
-                              <Input
-                                id="bank-bik"
-                                name="bankBik"
-                                value={companyFormData.bankBik}
-                                onChange={handleCompanyFormChange}
-                                placeholder="044525225"
-                                className="bg-gray-50 dark:bg-gray-800/50"
-                                required
-                              />
-                            </div>
-                          </div>
-                        </div>
-                      </div>
-
-                      {/* –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
-                      <div className="space-y-6 bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
-                        <div>
-                          <h2 className="text-xl font-bold mb-2">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
-                          <p className="text-sm text-gray-500 dark:text-gray-400">
-                            –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–≤—è–∑–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
-                          </p>
-                        </div>
-
-                        <div className="space-y-4">
-                          <div className="space-y-2">
-                            <Label htmlFor="company-email">
-                              Email <span className="text-red-500">*</span>
-                            </Label>
-                            <Input
-                              id="company-email"
-                              type="email"
-                              name="email"
-                              value={companyFormData.email}
-                              onChange={handleCompanyFormChange}
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                              required
-                            />
-                          </div>
-
-                          <div className="space-y-2">
-                            <Label htmlFor="company-phone">
-                              –¢–µ–ª–µ—Ñ–æ–Ω <span className="text-red-500">*</span>
-                            </Label>
-                            <Input
-                              id="company-phone"
-                              name="phone"
-                              value={companyFormData.phone}
-                              onChange={handleCompanyFormChange}
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                              required
-                            />
-                          </div>
-
-                          <div className="space-y-2">
-                            <Label htmlFor="company-website">–í–µ–±-—Å–∞–π—Ç</Label>
-                            <Input
-                              id="company-website"
-                              name="website"
-                              value={companyFormData.website}
-                              onChange={handleCompanyFormChange}
-                              className="bg-gray-50 dark:bg-gray-800/50"
-                            />
-                          </div>
-                        </div>
-                      </div>
-
-                      {/* –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—è—Ö */}
-                      <div className="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800">
-                        <div className="flex items-start">
-                          <AlertCircle className="h-5 w-5 text-yellow-500 mr-3 mt-0.5 flex-shrink-0" />
-                          <p className="text-sm text-yellow-700 dark:text-yellow-400">
-                            –ü–æ–ª—è, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –∑–≤–µ–∑–¥–æ—á–∫–æ–π (<span className="text-red-500">*</span>), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è
-                            –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è.
-                          </p>
-                        </div>
-                      </div>
-                    </div>
-
-                    <div className="flex justify-end gap-4 mt-8">
-                      <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                        <Button
-                          variant="outline"
-                          disabled={isVerifying}
-                          className="rounded-full"
-                          onClick={() => setIsSaveDialogOpen(true)}
-                        >
-                          <Save className="h-4 w-4 mr-2" />
-                          –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω
-                        </Button>
-                      </motion.div>
-                      <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                        <Button
-                          onClick={handleVerifyCompany}
-                          disabled={isVerifying}
-                          className="gap-2 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700"
-                        >
-                          {isVerifying ? (
-                            <>
-                              <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
-                              –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö...
-                            </>
-                          ) : (
-                            <>
-                              –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
-                              <ArrowRight className="h-4 w-4" />
-                            </>
-                          )}
-                        </Button>
-                      </motion.div>
-                    </div>
-                  </>
-                )}
-              </motion.div>
-            )}
-
-            {/* –û—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */}
-            {currentStep === 2 && (
-              <motion.div
-                key="specification-form"
-                initial={{ opacity: 0, y: 20 }}
-                animate={{ opacity: 1, y: 0 }}
-                exit={{ opacity: 0, y: -20 }}
-                transition={{ duration: 0.3 }}
-                className="max-w-4xl mx-auto mt-24"
-              >
-                {/* –û–±–Ω–æ–≤–∏–º —Ç–µ–∫—Å—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –≤—Ç–æ—Ä–æ–≥–æ —à–∞–≥–∞: */}
-                <div className="bg-blue-50 dark:bg-blue-900/20 p-5 rounded-xl border border-blue-200 dark:border-blue-800 mb-8">
-                  <div className="flex items-start">
-                    <Info className="h-5 w-5 text-blue-500 mr-3 mt-0.5 flex-shrink-0" />
-                    <p className="text-sm text-blue-700 dark:text-blue-400">
-                      –ù–∞ —ç—Ç–æ–º —à–∞–≥–µ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–∑–∏—Ü–∏–∏, —É–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏
-                      —Ü–µ–Ω—É.
-                    </p>
-                  </div>
-                </div>
-
-                <div className="space-y-6">
-                  {/* –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∏–Ω–≤–æ–π—Å–∞ */}
-                  <div className="bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
-                    <h2 className="text-xl font-bold mb-4">–¢–∏–ø –∏–Ω–≤–æ–π—Å–∞</h2>
-                    <p className="text-sm text-gray-500 dark:text-gray-400 mb-4">
-                      –í—ã–±–µ—Ä–∏—Ç–µ, –∫–∞–∫–æ–π –∏–Ω–≤–æ–π—Å –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π.
-                    </p>
-
-                    <div className="flex items-center space-x-6">
-                      <div className="flex items-center">
-                        <Input
-                          id="invoice-create"
-                          type="radio"
-                          value="create"
-                          name="invoiceType"
-                          checked={invoiceType === "create"}
-                          onChange={() => setInvoiceType("create")}
-                          className="mr-2"
-                        />
-                        <Label htmlFor="invoice-create">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π</Label>
-                      </div>
-
-                      <div className="flex items-center">
-                        <Input
-                          id="invoice-ready"
-                          type="radio"
-                          value="ready"
-                          name="invoiceType"
-                          checked={invoiceType === "ready"}
-                          onChange={() => setInvoiceType("ready")}
-                          className="mr-2"
-                        />
-                        <Label htmlFor="invoice-ready">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π</Label>
-                      </div>
-                    </div>
-
-                    {invoiceType === "ready" && (
-                      <div className="mt-6">
-                        <Label htmlFor="invoice-file">–§–∞–π–ª –∏–Ω–≤–æ–π—Å–∞</Label>
-                        <Input
-                          id="invoice-file"
-                          type="file"
-                          accept=".pdf,.doc,.docx"
-                          onChange={handleInvoiceUpload}
-                          className="mt-2"
-                          disabled={isInvoiceUploading}
-                        />
-                        {isInvoiceUploading && <div className="text-blue-500 text-sm mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...</div>}
-                        {invoiceFile && invoiceFile.name && (
-                          <p className="text-sm text-gray-500 dark:text-gray-400 mt-2">
-                            –í—ã–±—Ä–∞–Ω —Ñ–∞–π–ª: {invoiceFile.name}
-                          </p>
-                        )}
-                      </div>
-                    )}
-                  </div>
-
-                  {/* –§–æ—Ä–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ */}
-                  {invoiceType === "create" && (
-                    <div className="bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
-                      <h2 className="text-xl font-bold mb-4">–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è</h2>
-                      <p className="text-sm text-gray-500 dark:text-gray-400 mb-4">
-                        –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–∑–∏—Ü–∏–∏, —É–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ü–µ–Ω—É.
-                      </p>
-
-                      <div className="overflow-x-auto">
-                        <table className="w-full whitespace-nowrap">
-                          <thead>
-                            <tr className="text-left">
-                              <th className="py-2 px-3 font-semibold text-gray-500 dark:text-gray-400">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
-                              <th className="py-2 px-3 font-semibold text-gray-500 dark:text-gray-400">–ö–æ–¥</th>
-                              <th className="py-2 px-3 font-semibold text-gray-500 dark:text-gray-400">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
-                              <th className="py-2 px-3 font-semibold text-gray-500 dark:text-gray-400">–ö–æ–ª-–≤–æ</th>
-                              <th className="py-2 px-3 font-semibold text-gray-500 dark:text-gray-400">–ï–¥. –∏–∑–º.</th>
-                              <th className="py-2 px-3 font-semibold text-gray-500 dark:text-gray-400">–¶–µ–Ω–∞ –∑–∞ –µ–¥.</th>
-                              <th className="py-2 px-3 font-semibold text-gray-500 dark:text-gray-400">–°—É–º–º–∞</th>
-                              <th className="py-2 px-3 font-semibold text-gray-500 dark:text-gray-400"></th>
-                            </tr>
-                          </thead>
-                          <tbody>
-                            {specificationItems.map((item, index) => (
-                              <tr key={item.id} className="group">
-                                <td className="py-2 px-3">
-                                  <Input
-                                    type="text"
-                                    value={item.name}
-                                    onChange={(e) => handleSpecificationItemChange(item.id, "name", e.target.value)}
-                                    className="bg-gray-50 dark:bg-gray-800/50"
-                                  />
-                                </td>
-                                <td className="py-2 px-3">
-                                  <Input
-                                    type="text"
-                                    value={item.code}
-                                    onChange={(e) => handleSpecificationItemChange(item.id, "code", e.target.value)}
-                                    className="bg-gray-50 dark:bg-gray-800/50"
-                                  />
-                                </td>
-                                <td className="py-2 px-3">
-                                  <input
-                                    type="file"
-                                    id={`image-upload-${item.id}`}
-                                    accept="image/*"
-                                    style={{ display: "none" }}
-                                    onChange={(e) => handleImageUpload(item.id, e)}
-                                    ref={(el) => (fileInputRefs.current[index] = el)}
-                                  />
-                                  <Button
-                                    variant="outline"
-                                    size="sm"
-                                    className="rounded-full"
-                                    onClick={() => fileInputRefs.current[index]?.click()}
-                                  >
-                                    –ó–∞–≥—Ä—É–∑–∏—Ç—å
-                                  </Button>
-                                  {item.image && (
-                                    <img
-                                      src={item.image || "/placeholder.svg"}
-                                      alt="Preview"
-                                      className="mt-2 w-20 h-20 object-cover rounded-md"
-                                    />
-                                  )}
-                                  {uploadingImageId === item.id && (
-                                    <div className="mt-2 text-xs text-blue-500">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
-                                  )}
-                                </td>
-                                <td className="py-2 px-3">
-                                  <Input
-                                    type="number"
-                                    value={item.quantity}
-                                    onChange={(e) =>
-                                      handleSpecificationItemChange(item.id, "quantity", Number(e.target.value))
-                                    }
-                                    className="w-24 bg-gray-50 dark:bg-gray-800/50"
-                                  />
-                                </td>
-                                <td className="py-2 px-3">
-                                  <Input
-                                    type="text"
-                                    value={item.unit}
-                                    onChange={(e) => handleSpecificationItemChange(item.id, "unit", e.target.value)}
-                                    className="w-16 bg-gray-50 dark:bg-gray-800/50"
-                                  />
-                                </td>
-                                <td className="py-2 px-3">
-                                  <Input
-                                    type="number"
-                                    value={item.pricePerUnit}
-                                    onChange={(e) =>
-                                      handleSpecificationItemChange(item.id, "pricePerUnit", Number(e.target.value))
-                                    }
-                                    className="w-24 bg-gray-50 dark:bg-gray-800/50"
-                                  />
-                                </td>
-                                <td className="py-2 px-3">
-                                  {currency} {item.totalPrice?.toFixed(2)}
-                                </td>
-                                <td className="py-2 px-3 text-right">
-                                  <motion.button
-                                    whileHover={{ scale: 1.1 }}
-                                    whileTap={{ scale: 0.9 }}
-                                    onClick={() => removeSpecificationItem(item.id)}
-                                    className="opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-red-500 hover:text-red-700"
-                                  >
-                                    –£–¥–∞–ª–∏—Ç—å
-                                  </motion.button>
-                                </td>
-                              </tr>
-                            ))}
-                          </tbody>
-                        </table>
-                      </div>
-
-                      <div className="flex justify-between items-center mt-4">
-                        <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                          <Button variant="outline" className="rounded-full" onClick={addSpecificationItem}>
-                            –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
-                          </Button>
-                        </motion.div>
-                        <div className="text-lg font-semibold">
-                          –ò—Ç–æ–≥–æ: {currency} {calculateTotalSum().toFixed(2)}
-                        </div>
-                      </div>
-                    </div>
-                  )}
-
-                  <div className="flex justify-end gap-4 mt-8">
-                    \
-                    <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                      <Button variant="outline" className="rounded-full" onClick={() => setIsSaveDialogOpen(true)}>
-                        <Save className="h-4 w-4 mr-2" />
-                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω
-                      </Button>
-                    </motion.div>
-                    <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
-                      <Button
-                        onClick={handleSubmitSpecification}
-                        className="gap-2 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700"
-                        disabled={isInvoiceUploading || (invoiceType === "ready" && (!invoiceFile || !invoiceFile.url))}
-                      >
-                        {isWaitingApproval ? (
-                          <>
-                            <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
-                            –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...
-                          </>
-                        ) : (
-                          <>
-                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
-                            <ArrowRight className="h-4 w-4" />
-                          </>
-                        )}
-                      </Button>
-                    </motion.div>
-                  </div>
-                </div>
-              </motion.div>
-            )}
-
-            {/* –®–∞–≥ 3: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ/—á–µ–∫ */}
-            {currentStep === 3 && (
-              <>
-                {/* –ö—Ä–∞—Å–∏–≤–∞—è –ø–ª–∞—Ç—ë–∂–∫–∞-–∏–Ω–≤–æ–π—Å, –µ—Å–ª–∏ —á–µ–∫ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω */}
-                {!receiptUrl ? (
-                  <div className="bg-white dark:bg-gray-900 p-8 rounded-xl border border-gray-200 dark:border-gray-800 shadow-xl max-w-3xl mx-auto">
-                    <div className="mb-6">
-                      <div className="flex items-center gap-3 mb-4">
-                        <CheckCircle className="h-8 w-8 text-green-500" />
-                        <span className="text-lg font-bold text-green-700 dark:text-green-400">–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞!</span>
-                  </div>
-                      <div className="text-gray-600 dark:text-gray-400">–í–∞—à–∞ –∑–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ–¥–æ–±—Ä–µ–Ω–∞. –¢–µ–ø–µ—Ä—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –æ–ø–ª–∞—Ç—É.</div>
-                    </div>
-                    {/* --- –û–±–æ—Ä–∞—á–∏–≤–∞—é –∏–Ω–≤–æ–π—Å –≤ ref --- */}
-                    <div ref={invoiceRef} className="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 mb-6 print:!block print:!bg-white print:!text-black">
-                      <div className="flex flex-col md:flex-row md:justify-between md:items-center mb-4">
-                        <div>
-                          <div className="font-bold text-lg mb-1">–°—á—ë—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É</div>
-                          <div className="text-sm text-gray-500 dark:text-gray-400">–°—á—ë—Ç ‚Ññ{projectId} –æ—Ç {new Date().toLocaleDateString()}</div>
-                        </div>
-                        <Button variant="outline" size="sm" className="mt-2 md:mt-0 print:hidden" onClick={handlePrintInvoice}>–ü–µ—á–∞—Ç—å</Button>
-                      </div>
-                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
-                        <div>
-                          <div className="font-semibold mb-1">–ü–æ—Å—Ç–∞–≤—â–∏–∫:</div>
-                          <div className="text-sm">{companyFormData.name}</div>
-                          <div className="text-sm">–ò–ù–ù: {companyFormData.inn}</div>
-                          <div className="text-sm">–ö–ü–ü: {companyFormData.kpp}</div>
-                          <div className="text-sm">–ê–¥—Ä–µ—Å: {companyFormData.address}</div>
-                          <div className="text-sm">Email: {companyFormData.email}</div>
-                          </div>
-                        <div>
-                          <div className="font-semibold mb-1">–ü–æ–∫—É–ø–∞—Ç–µ–ª—å:</div>
-                          <div className="text-sm">{bankTransferDetails.recipientName}</div>
-                          <div className="text-sm">–ò–ù–ù: {bankTransferDetails.inn || '‚Äî'}</div>
-                          <div className="text-sm">–ö–ü–ü: {bankTransferDetails.kpp || '‚Äî'}</div>
-                          <div className="text-sm">–ê–¥—Ä–µ—Å: {bankTransferDetails.recipientAddress || '‚Äî'}</div>
-                          <div className="text-sm">Email: {companyFormData.email}</div>
-                          </div>
-                        </div>
-                      <div className="overflow-x-auto mb-6">
-                        <table className="w-full text-sm border rounded-xl overflow-hidden">
-                          <thead className="bg-gray-100 dark:bg-gray-700">
-                            <tr>
-                              <th className="p-2 font-semibold">‚Ññ</th>
-                              <th className="p-2 font-semibold">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
-                              <th className="p-2 font-semibold">–ö–æ–¥</th>
-                              <th className="p-2 font-semibold">–ö–æ–ª-–≤–æ</th>
-                              <th className="p-2 font-semibold">–ï–¥. –∏–∑–º.</th>
-                              <th className="p-2 font-semibold">–¶–µ–Ω–∞</th>
-                              <th className="p-2 font-semibold">–°—É–º–º–∞</th>
-                            </tr>
-                          </thead>
-                          <tbody>
-                            {specificationItems.map((item, idx) => (
-                              <tr key={item.id} className="border-b last:border-b-0">
-                                <td className="p-2 text-center">{idx + 1}</td>
-                                <td className="p-2">{item.name}</td>
-                                <td className="p-2">{item.code}</td>
-                                <td className="p-2 text-center">{item.quantity}</td>
-                                <td className="p-2 text-center">{item.unit}</td>
-                                <td className="p-2 text-right">{currency} {item.pricePerUnit?.toFixed(2)}</td>
-                                <td className="p-2 text-right">{currency} {item.totalPrice?.toFixed(2)}</td>
-                              </tr>
-                            ))}
-                          </tbody>
-                        </table>
-                      </div>
-                      <div className="flex flex-col md:flex-row md:justify-between gap-4 mb-2">
-                        <div className="text-sm text-gray-500 dark:text-gray-400">–ü–æ–¥—ã—Ç–æ–≥: {currency} {specificationItems.reduce((sum, item) => sum + (item.totalPrice || 0), 0).toFixed(2)}</div>
-                        <div className="text-sm text-gray-500 dark:text-gray-400">–ù–î–° (20%): {currency} {(specificationItems.reduce((sum, item) => sum + (item.totalPrice || 0), 0) * 0.2).toFixed(2)}</div>
-                        <div className="font-bold text-lg">–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ: <span className="text-blue-600">{currency} {(specificationItems.reduce((sum, item) => sum + (item.totalPrice || 0), 0) * 1.2).toFixed(2)}</span></div>
-                          </div>
-                      <div className="mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm text-gray-700 dark:text-gray-300">
-                        <div className="font-semibold mb-1">–†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã:</div>
-                        <div>–ü–æ–ª—É—á–∞—Ç–µ–ª—å: {bankTransferDetails.recipientName}</div>
-                        <div>–†/—Å: {bankTransferDetails.accountNumber}</div>
-                        <div>–ö/—Å: {bankTransferDetails.korAccount || '‚Äî'}</div>
-                        <div>–ë–∞–Ω–∫: {bankTransferDetails.bankName}</div>
-                        <div>–ë–ò–ö: {bankTransferDetails.bik || '‚Äî'}</div>
-                        <div>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: {bankTransferDetails.paymentPurpose}</div>
-                          </div>
-                      <div className="mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg text-yellow-800 dark:text-yellow-200 text-sm">
-                        –£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã: –û–ø–ª–∞—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 3 –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç–∞. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—á–µ–∫, –≤—ã–ø–∏—Å–∫—É) –≤ —Ñ–æ—Ä–º–µ –Ω–∏–∂–µ.
-                          </div>
-                        </div>
-                    <div className="mt-8">
-                      <h3 className="text-lg font-semibold mb-2">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã</h3>
-                      <input
-                            type="file"
-                        accept="image/*,application/pdf"
-                            onChange={handleReceiptUpload}
-                        className="mb-4"
-                          />
-                        <Button
-                        className="px-6 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition"
-                        onClick={handleClientConfirmationUpload}
-                        disabled={!receiptFile}
-                        >
-                          –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É
-                        </Button>
-                      </div>
-                    </div>
-                ) : (
-                  isWaitingReceiptApproval ? (
-                    <div className="bg-yellow-50 dark:bg-yellow-900/20 p-8 rounded-xl border border-yellow-200 dark:border-yellow-800 text-center max-w-2xl mx-auto">
-                      <a href={receiptUrl} target="_blank" rel="noopener noreferrer" className="underline text-blue-600 mb-2 block">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ–∫</a>
-                      <img src={receiptUrl} alt="–ß–µ–∫" className="max-h-64 rounded-lg border mx-auto mb-6" />
-                        <motion.div
-                          animate={{ rotate: 360 }}
-                          transition={{ duration: 2, repeat: Number.POSITIVE_INFINITY, ease: "linear" }}
-                        className="w-16 h-16 mx-auto mb-4"
-                        >
-                        <Clock className="h-16 w-16 text-yellow-500" />
-                        </motion.div>
-                      <h2 className="text-xl font-bold mb-4 text-yellow-800 dark:text-yellow-200">–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —á–µ–∫–∞</h2>
-                      <p className="text-gray-700 dark:text-yellow-100 mb-2">–ß–µ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –º–µ–Ω–µ–¥–∂–µ—Ä—É –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ Telegram.</p>
-                      </div>
-                  ) : (
-                    <div className="bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm text-center max-w-2xl mx-auto">
-                      <h2 className="text-xl font-bold mb-4">–ß–µ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω</h2>
-                      <a href={receiptUrl} target="_blank" rel="noopener noreferrer" className="underline text-blue-600 mb-2">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ–∫</a>
-                      <img src={receiptUrl} alt="–ß–µ–∫" className="max-h-64 rounded-lg border mx-auto" />
-                      <Button
-                        className="mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition"
-                        onClick={() => setCurrentStep(4)}
-                        disabled={projectStatus !== "receipt_approved"}
-                      >
-                        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
-                      </Button>
-                  </div>
-                  )
-                )}
-              </>
-            )}
-
-            {/* –®–∞–≥ 4: –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ */}
-            {currentStep === 4 && (
-              <motion.div
-                key="transfer-method"
-                initial={{ opacity: 0, y: 20 }}
-                animate={{ opacity: 1, y: 0 }}
-                exit={{ opacity: 0, y: -20 }}
-                transition={{ duration: 0.3 }}
-                className="max-w-4xl mx-auto mt-24"
-              >
-                <div className="bg-blue-50 dark:bg-blue-900/20 p-5 rounded-xl border border-blue-200 dark:border-blue-800 mb-8">
-                  <div className="flex items-start">
-                    <Info className="h-5 w-5 text-blue-500 mr-3 mt-0.5 flex-shrink-0" />
-                    <p className="text-sm text-blue-700 dark:text-blue-400">
-                      –í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π –¥–ª—è –≤–∞—Å —Å–ø–æ—Å–æ–± –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤.
-                    </p>
-                  </div>
-                </div>
-
-                <div className="space-y-6">
-                  <h2 className="text-2xl font-bold text-center mb-8">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–≤–æ–¥–∞</h2>
-
-                  <div className="grid gap-8">
-                    {transferMethods.map((method) => {
-                      const Icon = method.icon
-                      const isLoading = methodLoadingState[method.id]
-
-                      return (
-                        <motion.div
-                          key={method.id}
-                          whileHover={{ scale: 1.02, y: -8 }}
-                          whileTap={{ scale: 0.98 }}
-                          className={`relative overflow-hidden rounded-3xl border transition-all duration-700 cursor-pointer group ${
-                            selectedTransferMethod === method.id
-                              ? `border-white/30 shadow-2xl ${method.shadowColor}`
-                              : "border-gray-800/60 hover:border-white/20 hover:shadow-xl hover:shadow-black/30"
-                          }`}
-                          onClick={() => handleTransferMethodSelection(method.id)}
-                        >
-                          {/* –†–æ—Å–∫–æ—à–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω */}
-                          <div className={`relative bg-gradient-to-br ${method.gradient} overflow-hidden`}>
-                            {/* –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –≥–ª—É–±–∏–Ω—ã */}
-                            <div className="absolute top-0 right-0 w-48 h-48 bg-white/3 rounded-full blur-3xl -translate-y-24 translate-x-24" />
-                            <div className="absolute bottom-0 left-0 w-40 h-40 bg-white/2 rounded-full blur-3xl translate-y-20 -translate-x-20" />
-                            <div className="absolute top-1/3 right-1/3 w-32 h-32 bg-white/1 rounded-full blur-2xl" />
-                            <div className="absolute bottom-1/3 left-1/4 w-24 h-24 bg-white/1 rounded-full blur-xl" />
-
-                            {/* –†–æ—Å–∫–æ—à–Ω–∞—è –∞–∫—Ü–µ–Ω—Ç–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ */}
-                            <div className={`h-2 w-full bg-gradient-to-r ${method.luxuryAccent} shadow-lg`} />
-
-                            {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ */}
-                            <div className={`absolute inset-0 bg-gradient-to-br ${method.accentGradient} opacity-5`} />
-
-                            <div className="relative z-10 p-10">
-                              <div className="flex items-start justify-between mb-10">
-                                <div className="flex items-start space-x-8">
-                                  {/* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–æ—Å–∫–æ—à–Ω–∞—è –∏–∫–æ–Ω–∫–∞ */}
-                                  <div className="relative group/icon">
-                                    <div
-                                      className={`relative flex items-center justify-center w-24 h-24 ${method.iconBg} backdrop-blur-2xl rounded-3xl border-2 border-white/20 shadow-2xl`}
-                                    >
-                                      <Icon className={`h-12 w-12 ${method.iconColor} drop-shadow-lg`} />
-                                      {/* –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ª–æ–∏ —Å–≤–µ—á–µ–Ω–∏—è */}
-                                      <div
-                                        className={`absolute inset-0 bg-gradient-to-br ${method.luxuryAccent} opacity-30 rounded-3xl blur-md`}
-                                      />
-                                      <div
-                                        className={`absolute inset-2 bg-gradient-to-br ${method.luxuryAccent} opacity-20 rounded-2xl blur-sm`}
-                                      />
-                                    </div>
-                                    {/* –í–Ω–µ—à–Ω–µ–µ –∫–æ–ª—å—Ü–æ —Å–≤–µ—á–µ–Ω–∏—è */}
-                                    <div
-                                      className={`absolute -inset-2 bg-gradient-to-br ${method.luxuryAccent} opacity-20 rounded-full blur-xl group-hover/icon:opacity-40 transition-opacity duration-500`}
-                                    />
-                                  </div>
-
-                                  <div className="flex-1">
-                                    <div className="flex items-center gap-4 mb-4">
-                                      <h3 className="text-3xl font-bold text-white group-hover:text-white/95 transition-colors drop-shadow-lg">
-                                        {method.title}
-                                      </h3>
-                                      <span className="text-3xl drop-shadow-lg">{method.emoji}</span>
-                                    </div>
-
-                                    <p className="text-white/90 text-xl mb-8 leading-relaxed max-w-2xl drop-shadow-sm">
-                                      {method.description}
-                                    </p>
-
-                                    {/* –†–æ—Å–∫–æ—à–Ω—ã–µ –±–µ–π–¥–∂–∏ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≥–ª—É–±–∏–Ω–æ–π */}
-                                    <div className="flex flex-wrap gap-4">
-                                      {method.benefits.map((benefit, index) => (
-                                        <motion.div
-                                          key={index}
-                                          initial={{ opacity: 0, scale: 0.8, y: 30 }}
-                                          animate={{ opacity: 1, scale: 1, y: 0 }}
-                                          transition={{ delay: index * 0.15 + 0.3, type: "spring", stiffness: 200 }}
-                                          className="group/badge relative"
-                                        >
-                                          {/* –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ª–æ–∏ –¥–ª—è –≥–ª—É–±–∏–Ω—ã */}
-                                          <div className="absolute inset-0 bg-white/30 rounded-full blur-lg" />
-                                          <div className="absolute inset-0 bg-white/20 rounded-full blur-md" />
-                                          <div
-                                            className={`absolute inset-0 bg-gradient-to-r ${method.luxuryAccent} opacity-30 rounded-full blur-sm`}
-                                          />
-
-                                          <div className="relative px-6 py-3 text-sm font-bold bg-white/90 backdrop-blur-2xl text-gray-900 rounded-full border-2 border-white shadow-2xl hover:bg-white hover:shadow-3xl transition-all duration-400 hover:scale-105">
-                                            <span className="mr-3 text-lg">‚ú®</span>
-                                            {benefit}
-                                          </div>
-                                        </motion.div>
-                                      ))}
-                                    </div>
-                                  </div>
-                                </div>
-
-                                {/* –†–æ—Å–∫–æ—à–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è */}
-                                <div className="flex items-center justify-center">
-                                  {isLoading ? (
-                                    <div className="relative">
-                                      <div className="w-12 h-12 border-4 border-white/20 border-t-white rounded-full animate-spin" />
-                                      <div className="absolute inset-0 bg-white/10 rounded-full blur-lg animate-pulse" />
-                                      <div
-                                        className={`absolute inset-0 bg-gradient-to-r ${method.luxuryAccent} opacity-30 rounded-full blur-md`}
-                                      />
-                                    </div>
-                                  ) : selectedTransferMethod === method.id ? (
-                                    <motion.div
-                                      initial={{ scale: 0, rotate: -180 }}
-                                      animate={{ scale: 1, rotate: 0 }}
-                                      transition={{ type: "spring", stiffness: 200, damping: 15 }}
-                                      className="relative"
-                                    >
-                                      <div className="w-12 h-12 bg-white/20 backdrop-blur-2xl rounded-full flex items-center justify-center border-2 border-white/40 shadow-2xl">
-                                        <CheckCircle className="h-7 w-7 text-emerald-300 drop-shadow-lg" />
-                                      </div>
-                                      <div className="absolute inset-0 bg-emerald-400/30 rounded-full blur-xl animate-pulse" />
-                                      <div className="absolute -inset-2 bg-emerald-400/20 rounded-full blur-2xl" />
-                                    </motion.div>
-                                  ) : (
-                                    <div className="w-12 h-12 border-3 border-white/40 rounded-full group-hover:border-white/60 transition-all duration-500 backdrop-blur-xl bg-white/5 shadow-xl" />
-                                  )}
-                                </div>
-                              </div>
-
-                              {/* –†–æ—Å–∫–æ—à–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å */}
-                              <div className="flex items-center justify-between">
-                                <div className="flex items-center gap-8 text-white/80">
-                                  <div className="flex items-center gap-3 group/info">
-                                    <div
-                                      className={`w-3 h-3 rounded-full bg-gradient-to-r ${method.luxuryAccent} shadow-lg`}
-                                    />
-                                    <span className="text-base font-medium drop-shadow-sm group-hover/info:text-white transition-colors">
-                                      üí∞ –ö–æ–º–∏—Å—Å–∏—è: {method.commission}
-                                    </span>
-                                  </div>
-                                  <div className="flex items-center gap-3 group/info">
-                                    <div
-                                      className={`w-3 h-3 rounded-full bg-gradient-to-r ${method.luxuryAccent} shadow-lg animate-pulse`}
-                                    />
-                                    <span className="text-base font-medium drop-shadow-sm group-hover/info:text-white transition-colors">
-                                      ‚ö° –í—Ä–µ–º—è: {method.time}
-                                    </span>
-                                  </div>
-                                </div>
-
-                                <motion.div
-                                  className="flex items-center text-white/80 group-hover:text-white transition-colors"
-                                  whileHover={{ x: 8 }}
-                                >
-                                  <span className="text-base font-semibold mr-4 drop-shadow-sm">–í—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥</span>
-                                  <ArrowRight className="h-6 w-6 drop-shadow-sm" />
-                                </motion.div>
-                              </div>
-                            </div>
-
-                            {/* –†–æ—Å–∫–æ—à–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –≤—ã–±–æ—Ä–∞ */}
-                            {selectedTransferMethod === method.id && (
-                              <motion.div
-                                initial={{ opacity: 0 }}
-                                animate={{ opacity: 1 }}
-                                transition={{ duration: 0.8 }}
-                                className="absolute inset-0"
-                              >
-                                <div className="absolute inset-0 bg-white/8 backdrop-blur-sm" />
-                                <div
-                                  className={`absolute inset-0 bg-gradient-to-br ${method.luxuryAccent} opacity-15`}
-                                />
-                                <div
-                                  className={`absolute inset-0 bg-gradient-to-t ${method.luxuryAccent} opacity-10`}
-                                />
-                              </motion.div>
-                            )}
-                          </div>
-
-                          {/* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–æ—Å–∫–æ—à–Ω–∞—è –Ω–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */}
-                          <div className="bg-black/95 backdrop-blur-2xl border-t-2 border-white/20">
-                            <div className="px-10 py-6">
-                              <div className="flex items-center justify-between">
-                                <div className="flex items-center gap-8 text-sm text-gray-300">
-                                  <div className="flex items-center gap-3">
-                                    <div
-                                      className={`w-2 h-2 rounded-full bg-gradient-to-r ${method.luxuryAccent} shadow-lg`}
-                                    />
-                                    <span className="font-medium">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è</span>
-                                  </div>
-                                  <div className="flex items-center gap-3">
-                                    <div
-                                      className={`w-2 h-2 rounded-full bg-gradient-to-r ${method.luxuryAccent} shadow-lg`}
-                                    />
-                                    <span className="font-medium">–ü–æ–¥–¥–µ—Ä–∂–∫–∞: 24/7</span>
-                                  </div>
-                                  <div className="flex items-center gap-3">
-                                    <div
-                                      className={`w-2 h-2 rounded-full bg-gradient-to-r ${method.luxuryAccent} shadow-lg`}
-                                    />
-                                    <span className="font-medium">–ì–∞—Ä–∞–Ω—Ç–∏—è: 100%</span>
-                                  </div>
-                                </div>
-
-                                <div className="flex items-center gap-3">
-                                  <div
-                                    className={`w-4 h-4 rounded-full bg-gradient-to-r ${method.luxuryAccent} animate-pulse shadow-lg`}
-                                  />
-                                  <span className="text-sm text-gray-300 font-semibold tracking-wide">–ü–†–ï–ú–ò–£–ú</span>
-                                </div>
-                              </div>
-                            </div>
-                          </div>
-                        </motion.div>
-                      )
-                    })}
-                  </div>
-                </div>
-              </motion.div>
-            )}
-
-            {/* –®–∞–≥ 5: –†–µ–∫–≤–∏–∑–∏—Ç—ã */}
-            {currentStep === 5 && (
-              <motion.div
-                key="payment-details"
-                initial={{ opacity: 0, y: 20 }}
-                animate={{ opacity: 1, y: 0 }}
-                exit={{ opacity: 0, y: -20 }}
-                transition={{ duration: 0.3 }}
-                className="max-w-4xl mx-auto mt-24"
-              >
-                <div className="bg-blue-50 dark:bg-blue-900/20 p-5 rounded-xl border border-blue-200 dark:border-blue-800 mb-8">
-                  <div className="flex items-start">
-                    <Info className="h-5 w-5 text-blue-500 mr-3 mt-0.5 flex-shrink-0" />
-                    <p className="text-sm text-blue-700 dark:text-blue-400">
-                      –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –ø–µ—Ä–µ–≤–æ–¥–∞.
-                    </p>
-                  </div>
-                </div>
-
-                <div className="space-y-6">
-                  <h2 className="text-2xl font-bold text-center mb-8">
-                    –†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è{" "}
-                    {selectedTransferMethod === "p2p"
-                      ? "P2P –ø–µ—Ä–µ–≤–æ–¥–∞"
-                      : selectedTransferMethod === "crypto"
-                        ? "–∫—Ä–∏–ø—Ç–æ–ø–µ—Ä–µ–≤–æ–¥–∞"
-                        : "–±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞"}
-                  </h2>
-
-                  {selectedTransferMethod === "p2p" && (
-                    <div className="bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
-                      <h3 className="text-lg font-semibold mb-4">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</h3>
-
-                      <div className="space-y-4">
-                        {supplierCards.map((card) => (
-                          <motion.div
-                            key={card.id}
-                            whileHover={{ scale: 1.02 }}
-                            whileTap={{ scale: 0.98 }}
-                            className={`p-4 border-2 rounded-lg cursor-pointer transition-all ${
-                              selectedCard === card.id
-                                ? "border-blue-500 bg-blue-50 dark:bg-blue-900/20"
-                                : "border-gray-200 dark:border-gray-700 hover:border-gray-300"
-                            }`}
-                            onClick={() => handleSelectCard(card)}
-                          >
-                            <div className="flex justify-between items-start">
-                              <div>
-                                <p className="font-medium">{card.bank}</p>
-                                <p className="text-sm text-gray-500">**** **** **** {card.card_number.slice(-4)}</p>
-                                <p className="text-sm text-gray-500">{card.holder_name}</p>
-                              </div>
-                              <Button
-                                variant="ghost"
-                                size="sm"
-                                onClick={(e) => handleDeleteCard(card.id, e)}
-                                className="text-red-500 hover:text-red-700"
-                              >
-                                –£–¥–∞–ª–∏—Ç—å
-                              </Button>
-                            </div>
-                          </motion.div>
-                        ))}
-
-                        <Button variant="outline" className="w-full" onClick={() => setShowNewCardForm(true)}>
-                          –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É
-                        </Button>
-                      </div>
-                    </div>
-                  )}
-
-                  {selectedTransferMethod === "crypto" && (
-                    <div className="bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
-                      <h3 className="text-lg font-semibold mb-4">–ö—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª–µ–∫</h3>
-                      <div className="space-y-4">
-                        {/* –°–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤ */}
-                        <div>
-                          <Label htmlFor="saved-crypto-wallet">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫</Label>
-                          <select
-                            id="saved-crypto-wallet"
-                            value={selectedWallet || ""}
-                            onChange={e => {
-                              const wallet = savedCryptoWallets.find(w => w.id === e.target.value)
-                              setSelectedWallet(e.target.value)
-                              if (wallet) {
-                                setNewWalletDetails({
-                                  name: wallet.name || "",
-                                  address: wallet.address || "",
-                                  network: wallet.network || "trc20",
-                                })
-                              }
-                            }}
-                            className="mt-2 w-full p-2 border border-gray-300 rounded-md"
-                          >
-                            <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
-                            {savedCryptoWallets.map(wallet => (
-                              <option key={wallet.id} value={wallet.id}>
-                                {wallet.name} ({wallet.address})
-                              </option>
-                            ))}
-                          </select>
-                          <Button
-                            variant="outline"
-                            className="mt-2"
-                            onClick={() => {
-                              setSelectedWallet(null)
-                              setNewWalletDetails({ name: "", address: "", network: "trc20" })
-                            }}
-                          >
-                            –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ—à–µ–ª–µ–∫
-                          </Button>
-                        </div>
-                        {/* –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–µ –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è */}
-                        <div>
-                          <Label htmlFor="crypto-address">–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞</Label>
-                          <Input
-                            id="crypto-address"
-                            name="address"
-                            value={newWalletDetails.address}
-                            onChange={handleNewWalletChange}
-                            placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å USDT –∫–æ—à–µ–ª—å–∫–∞"
-                            className="mt-2"
-                          />
-                        </div>
-                        <div>
-                          <Label htmlFor="crypto-network">–°–µ—Ç—å</Label>
-                          <select
-                            id="crypto-network"
-                            name="network"
-                            value={newWalletDetails.network}
-                            onChange={handleNewWalletChange}
-                            className="mt-2 w-full p-2 border border-gray-300 rounded-md"
-                          >
-                            {cryptoNetworks.map((network) => (
-                              <option key={network.id} value={network.id}>
-                                {network.name}
-                              </option>
-                            ))}
-                          </select>
-                        </div>
-                        <Button onClick={handleAddNewWallet} className="w-full">
-                          –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ—à–µ–ª–µ–∫
-                        </Button>
-                      </div>
-                    </div>
-                  )}
-
-                  {selectedTransferMethod === "bank-transfer" && (
-                    <div className="space-y-8">
-                      {/* –ö—Ä–∞—Å–∏–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */}
-                      <div className="text-center">
-                        <div className="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full mb-4">
-                          <Landmark className="h-8 w-8 text-white" />
-                        </div>
-                        <h3 className="text-2xl font-bold text-gray-900 dark:text-white mb-2">–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</h3>
-                        <p className="text-gray-600 dark:text-gray-400">
-                          –í—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ
-                        </p>
-                      </div>
-
-                      {/* –°—Ç–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ */}
-                      <div className="flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl">
-                        <button
-                          onClick={() => {
-                            setShowSavedBankAccounts(true)
-                            setShowAddBankAccountForm(false)
-                            setSelectedBankCountry(null)
-                          }}
-                          className={`flex-1 py-3 px-6 rounded-lg font-medium transition-all duration-200 ${
-                            showSavedBankAccounts
-                              ? "bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm"
-                              : "text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"
-                          }`}
-                        >
-                          <div className="flex items-center justify-center gap-2">
-                            <CreditCard className="h-4 w-4" />
-                            –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ
-                          </div>
-                        </button>
-                        <button
-                          onClick={() => {
-                            setShowAddBankAccountForm(true)
-                            setShowSavedBankAccounts(false)
-                            setSelectedBankCountry(null)
-                          }}
-                          className={`flex-1 py-3 px-6 rounded-lg font-medium transition-all duration-200 ${
-                            showAddBankAccountForm
-                              ? "bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm"
-                              : "text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"
-                          }`}
-                        >
-                          <div className="flex items-center justify-center gap-2">
-                            <Plus className="h-4 w-4" />
-                            –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ
-                          </div>
-                        </button>
-                      </div>
-
-                      {/* –°–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ */}
-                      {showSavedBankAccounts && (
-                        <div className="space-y-4">
-                          {savedBankAccounts.length > 0 ? (
-                            <div className="grid gap-4">
-                              {savedBankAccounts.map((account) => (
-                                <motion.div
-                                  key={account.id}
-                                  whileHover={{ scale: 1.02, y: -2 }}
-                                  whileTap={{ scale: 0.98 }}
-                                  className={`relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer group ${
-                                    selectedBankAccount === account.id
-                                      ? "border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 shadow-lg shadow-blue-200/50 dark:shadow-blue-900/30"
-                                      : "border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-blue-300 dark:hover:border-blue-600 hover:shadow-md"
-                                  }`}
-                                  onClick={() => handleSelectBankAccount(account)}
-                                >
-                                  {/* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ —Å–≤–µ—Ä—Ö—É */}
-                                  <div
-                                    className={`h-1 w-full ${
-                                      selectedBankAccount === account.id
-                                        ? "bg-gradient-to-r from-blue-500 to-indigo-500"
-                                        : "bg-gradient-to-r from-gray-300 to-gray-400 dark:from-gray-600 dark:to-gray-700"
-                                    }`}
-                                  />
-
-                                  <div className="p-6">
-                                    <div className="flex items-start justify-between">
-                                      <div className="flex items-start space-x-4">
-                                        {/* –ò–∫–æ–Ω–∫–∞ —Å—Ç—Ä–∞–Ω—ã */}
-                                        <div
-                                          className={`flex items-center justify-center w-12 h-12 rounded-full ${
-                                            account.country === "china"
-                                              ? "bg-red-100 dark:bg-red-900/30"
-                                              : account.country === "turkey"
-                                                ? "bg-red-100 dark:bg-red-900/30"
-                                                : "bg-blue-100 dark:bg-blue-900/30"
-                                          }`}
-                                        >
-                                          <span className="text-2xl">
-                                            {account.country === "china"
-                                              ? "üá®üá≥"
-                                              : account.country === "turkey"
-                                                ? "üáπüá∑"
-                                                : "üåç"}
-                                          </span>
-                                        </div>
-
-                                        <div className="flex-1">
-                                          <h4 className="text-lg font-semibold text-gray-900 dark:text-white mb-1">
-                                            {account.name}
-                                          </h4>
-                                          <div className="space-y-1">
-                                            <p className="text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2">
-                                              <Landmark className="h-4 w-4" />
-                                              {account.details.bankName}
-                                            </p>
-                                            <p className="text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2">
-                                              <CreditCard className="h-4 w-4" />
-                                              ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ {account.details.accountNumber?.slice(-4)}
-                                            </p>
-                                            <div className="flex items-center gap-2">
-                                              <span
-                                                className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
-                                                  account.country === "china"
-                                                    ? "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"
-                                                    : account.country === "turkey"
-                                                      ? "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"
-                                                      : "bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"
-                                                }`}
-                                              >
-                                                {account.country === "china"
-                                                  ? "–ö–∏—Ç–∞–π"
-                                                  : account.country === "turkey"
-                                                    ? "–¢—É—Ä—Ü–∏—è"
-                                                    : "–î—Ä—É–≥–∞—è —Å—Ç—Ä–∞–Ω–∞"}
-                                              </span>
-                                              {selectedBankAccount === account.id && (
-                                                <span className="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300">
-                                                  <CheckCircle className="h-3 w-3 mr-1" />
-                                                  –í—ã–±—Ä–∞–Ω–æ
-                                                </span>
-                                              )}
-                                            </div>
-                                          </div>
-                                        </div>
-                                      </div>
-
-                                      {/* –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è */}
-                                      <motion.button
-                                        whileHover={{ scale: 1.1 }}
-                                        whileTap={{ scale: 0.9 }}
-                                        onClick={(e) => {
-                                          e.stopPropagation()
-                                          setBankAccountToDelete(account.id)
-                                          setShowDeleteBankAccountConfirm(true)
-                                        }}
-                                        className="opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg"
-                                      >
-                                        <Trash2 className="h-4 w-4" />
-                                      </motion.button>
-                                    </div>
-                                  </div>
-
-                                  {/* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ */}
-                                  {selectedBankAccount === account.id && (
-                                    <motion.div
-                                      initial={{ scale: 0 }}
-                                      animate={{ scale: 1 }}
-                                      className="absolute top-4 right-4 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center"
-                                    >
-                                      <CheckCircle className="h-4 w-4 text-white" />
-                                    </motion.div>
-                                  )}
-                                </motion.div>
-                              ))}
-                            </div>
-                          ) : (
-                            <motion.div
-                              initial={{ opacity: 0, y: 20 }}
-                              animate={{ opacity: 1, y: 0 }}
-                              className="text-center py-12 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-600"
-                            >
-                              <div className="w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4">
-                                <Landmark className="h-8 w-8 text-gray-400" />
-                              </div>
-                              <h3 className="text-lg font-medium text-gray-900 dark:text-white mb-2">
-                                –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
-                              </h3>
-                              <p className="text-gray-500 dark:text-gray-400 mb-6">
-                                –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –≤ –±—É–¥—É—â–µ–º
-                              </p>
-                              <Button
-                                onClick={() => {
-                                  setShowAddBankAccountForm(true)
-                                  setShowSavedBankAccounts(false)
-                                }}
-                                className="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700"
-                              >
-                                <Plus className="h-4 w-4 mr-2" />
-                                –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
-                              </Button>
-                            </motion.div>
-                          )}
-                        </div>
-                      )}
-
-                      {/* –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ */}
-                      {showAddBankAccountForm && (
-                        <div className="space-y-8">
-                          {/* –í—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã */}
-                          {!selectedBankCountry && (
-                            <motion.div
-                              initial={{ opacity: 0, y: 20 }}
-                              animate={{ opacity: 1, y: 0 }}
-                              className="space-y-6"
-                            >
-                              <div className="text-center">
-                                <h4 className="text-xl font-semibold text-gray-900 dark:text-white mb-2">
-                                  –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –ø–æ–ª—É—á–∞—Ç–µ–ª—è
-                                </h4>
-                                <p className="text-gray-600 dark:text-gray-400">
-                                  –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
-                                </p>
-                              </div>
-
-                              <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
-                                {[
-                                  {
-                                    id: "china",
-                                    name: "–ö–∏—Ç–∞–π",
-                                    flag: "üá®üá≥",
-                                    description: "CNAPS –∫–æ–¥, —é–∞–Ω–∏",
-                                    gradient: "from-red-500 to-yellow-500",
-                                  },
-                                  {
-                                    id: "turkey",
-                                    name: "–¢—É—Ä—Ü–∏—è",
-                                    flag: "üáπüá∑",
-                                    description: "IBAN, –ª–∏—Ä—ã",
-                                    gradient: "from-red-600 to-red-500",
-                                  },
-                                  {
-                                    id: "other",
-                                    name: "–î—Ä—É–≥–∞—è —Å—Ç—Ä–∞–Ω–∞",
-                                    flag: "üåç",
-                                    description: "SWIFT –∫–æ–¥, —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞–ª—é—Ç—ã",
-                                    gradient: "from-blue-500 to-purple-500",
-                                  },
-                                ].map((country) => (
-                                  <motion.div
-                                    key={country.id}
-                                    whileHover={{ scale: 1.05, y: -5 }}
-                                    whileTap={{ scale: 0.95 }}
-                                    className="relative overflow-hidden bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 cursor-pointer hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-300 group"
-                                    onClick={() => {
-                                      setSelectedBankCountry(country.id)
-                                      setNewBankAccountDetails((prev) => ({
-                                        ...prev,
-                                        country: country.id,
-                                      }))
-                                    }}
-                                  >
-                                    {/* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ —Å–≤–µ—Ä—Ö—É */}
-                                    <div className={`h-1 w-full bg-gradient-to-r ${country.gradient}`} />
-
-                                    <div className="p-6 text-center">
-                                      <div className="text-4xl mb-4">{country.flag}</div>
-                                      <h5 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
-                                        {country.name}
-                                      </h5>
-                                      <p className="text-sm text-gray-600 dark:text-gray-400">{country.description}</p>
-                                    </div>
-
-                                    {/* Hover —ç—Ñ—Ñ–µ–∫—Ç */}
-                                    <div className="absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
-                                  </motion.div>
-                                ))}
-                              </div>
-                            </motion.div>
-                          )}
-
-                          {/* –§–æ—Ä–º–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ */}
-                          {selectedBankCountry && (
-                            <motion.div
-                              initial={{ opacity: 0, y: 20 }}
-                              animate={{ opacity: 1, y: 0 }}
-                              className="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"
-                            >
-                              {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–æ—Ä–º—ã */}
-                              <div
-                                className={`p-6 bg-gradient-to-r ${
-                                  selectedBankCountry === "china"
-                                    ? "from-red-500 to-yellow-500"
-                                    : selectedBankCountry === "turkey"
-                                      ? "from-red-600 to-red-500"
-                                      : "from-blue-500 to-purple-500"
-                                }`}
-                              >
-                                <div className="flex items-center justify-between">
-                                  <div className="flex items-center gap-4">
-                                    <Button
-                                      variant="ghost"
-                                      size="sm"
-                                      onClick={() => {
-                                        setSelectedBankCountry(null)
-                                        setNewBankAccountDetails((prev) => ({
-                                          ...prev,
-                                          country: "china",
-                                          details: {
-                                            recipientName: "",
-                                            recipientAddress: "",
-                                            bankName: "",
-                                            bankAddress: "",
-                                            accountNumber: "",
-                                            swift: "",
-                                            paymentPurpose: "",
-                                            transferCurrency: "USD",
-                                            cnapsCode: "",
-                                            iban: "",
-                                            otherDetails: "",
-                                          },
-                                        }))
-                                      }}
-                                      className="text-white hover:bg-white/20"
-                                    >
-                                      <ChevronLeft className="h-4 w-4 mr-1" />
-                                      –ù–∞–∑–∞–¥
-                                    </Button>
-                                    <div>
-                                      <h4 className="text-xl font-semibold text-white">
-                                        –†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è{" "}
-                                        {selectedBankCountry === "china"
-                                          ? "–ö–∏—Ç–∞—è üá®üá≥"
-                                          : selectedBankCountry === "turkey"
-                                            ? "–¢—É—Ä—Ü–∏–∏ üáπüá∑"
-                                            : "–¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω—ã üåç"}
-                                      </h4>
-                                      <p className="text-white/80 text-sm">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è</p>
-                                    </div>
-                                  </div>
-                                </div>
-                              </div>
-
-                              {/* –ü–æ–ª—è —Ñ–æ—Ä–º—ã */}
-                              <div className="p-6 space-y-6">
-                                {/* –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ */}
-                                <div className="space-y-2">
-                                  <Label
-                                    htmlFor="template-name"
-                                    className="text-sm font-medium text-gray-700 dark:text-gray-300"
-                                  >
-                                    –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ *
-                                  </Label>
-                                  <Input
-                                    id="template-name"
-                                    value={newBankAccountDetails.name}
-                                    onChange={(e) =>
-                                      setNewBankAccountDetails((prev) => ({
-                                        ...prev,
-                                        name: e.target.value,
-                                      }))
-                                    }
-                                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫ –≤ –ö–∏—Ç–∞–µ"
-                                    className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                  />
-                                </div>
-
-                                {/* –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –≤ –∫—Ä–∞—Å–∏–≤–æ–π —Å–µ—Ç–∫–µ */}
-                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
-                                  <div className="space-y-2">
-                                    <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                      –ü–æ–ª—É—á–∞—Ç–µ–ª—å *
-                                    </Label>
-                                    <Input
-                                      value={newBankAccountDetails.details.recipientName}
-                                      onChange={(e) =>
-                                        setNewBankAccountDetails((prev) => ({
-                                          ...prev,
-                                          details: { ...prev.details, recipientName: e.target.value },
-                                        }))
-                                      }
-                                      className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                    />
-                                  </div>
-                                  <div className="space-y-2">
-                                    <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                      –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ *
-                                    </Label>
-                                    <Input
-                                      value={newBankAccountDetails.details.bankName}
-                                      onChange={(e) =>
-                                        setNewBankAccountDetails((prev) => ({
-                                          ...prev,
-                                          details: { ...prev.details, bankName: e.target.value },
-                                        }))
-                                      }
-                                      className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                    />
-                                  </div>
-                                </div>
-
-                                <div className="space-y-2">
-                                  <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                    –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞ *
-                                  </Label>
-                                  <Input
-                                    value={newBankAccountDetails.details.accountNumber}
-                                    onChange={(e) =>
-                                      setNewBankAccountDetails((prev) => ({
-                                        ...prev,
-                                        details: { ...prev.details, accountNumber: e.target.value },
-                                      }))
-                                      }
-                                    className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                  />
-                                </div>
-
-                                {/* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã */}
-                                {selectedBankCountry === "china" && (
-                                  <div className="space-y-2">
-                                    <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                      CNAPS –∫–æ–¥ *
-                                    </Label>
-                                    <Input
-                                      value={newBankAccountDetails.details.cnapsCode}
-                                      onChange={(e) =>
-                                        setNewBankAccountDetails((prev) => ({
-                                          ...prev,
-                                          details: { ...prev.details, cnapsCode: e.target.value },
-                                        }))
-                                      }
-                                      placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 102100099996"
-                                      className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                    />
-                                  </div>
-                                )}
-
-                                {selectedBankCountry === "turkey" && (
-                                  <div className="space-y-2">
-                                    <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                      IBAN *
-                                    </Label>
-                                    <Input
-                                      value={newBankAccountDetails.details.iban}
-                                      onChange={(e) =>
-                                        setNewBankAccountDetails((prev) => ({
-                                          ...prev,
-                                          details: { ...prev.details, iban: e.target.value },
-                                        }))
-                                      }
-                                      placeholder="TR33 0006 1005 1978 6457 8413 26"
-                                      className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                    />
-                                  </div>
-                                )}
-
-                                {selectedBankCountry === "other" && (
-                                  <div className="space-y-2">
-                                    <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                      SWIFT –∫–æ–¥ *
-                                    </Label>
-                                    <Input
-                                      value={newBankAccountDetails.details.swift}
-                                      onChange={(e) =>
-                                        setNewBankAccountDetails((prev) => ({
-                                          ...prev,
-                                          details: { ...prev.details, swift: e.target.value },
-                                        }))
-                                      }
-                                      placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: DEUTDEFF"
-                                      className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                    />
-                                  </div>
-                                )}
-
-                                {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è */}
-                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
-                                  <div className="space-y-2">
-                                    <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                      –í–∞–ª—é—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
-                                    </Label>
-                                    <select
-                                      value={newBankAccountDetails.details.transferCurrency}
-                                      onChange={(e) =>
-                                        setNewBankAccountDetails((prev) => ({
-                                          ...prev,
-                                          details: { ...prev.details, transferCurrency: e.target.value },
-                                        }))
-                                      }
-                                      className="w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:border-blue-500 focus:ring-blue-500"
-                                    >
-                                      {supportedCurrencies.map((curr) => (
-                                        <option key={curr} value={curr}>
-                                          {curr}
-                                        </option>
-                                      ))}
-                                    </select>
-                                  </div>
-                                  <div className="space-y-2">
-                                    <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                      –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ *
-                                    </Label>
-                                    <Input
-                                      value={newBankAccountDetails.details.paymentPurpose}
-                                      onChange={(e) =>
-                                        setNewBankAccountDetails((prev) => ({
-                                          ...prev,
-                                          details: { ...prev.details, paymentPurpose: e.target.value },
-                                        }))
-                                      }
-                                      placeholder="–û–ø–ª–∞—Ç–∞ –∑–∞ —Ç–æ–≤–∞—Ä—ã –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É"
-                                      className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                    />
-                                  </div>
-                                </div>
-
-                                <div className="space-y-2">
-                                  <Label className="text-sm font-medium text-gray-700 dark:text-gray-300">
-                                    –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
-                                  </Label>
-                                  <Textarea
-                                    value={newBankAccountDetails.details.otherDetails}
-                                    onChange={(e) =>
-                                      setNewBankAccountDetails((prev) => ({
-                                        ...prev,
-                                        details: { ...prev.details, otherDetails: e.target.value },
-                                      }))
-                                    }
-                                    placeholder="–õ—é–±–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞"
-                                    rows={3}
-                                    className="bg-gray-50 dark:bg-gray-900 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"
-                                  />
-                                </div>
-
-                                {/* –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */}
-                                <motion.div whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }}>
-                                  <Button
-                                    onClick={handleAddNewBankAccount}
-                                    className="w-full py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200"
-                                  >
-                                    <Save className="h-4 w-4 mr-2" />
-                                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
-                                  </Button>
-                                </motion.div>
-                              </div>
-                            </motion.div>
-                          )}
-                        </div>
-                      )}
-
-                      {/* –ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ */}
-                      {selectedBankAccount && !showAddBankAccountForm && (
-                        <motion.div
-                          initial={{ opacity: 0, y: 20 }}
-                          animate={{ opacity: 1, y: 0 }}
-                          className="text-center"
-                        >
-                          <Button
-                            onClick={() => setCurrentStep(6)}
-                            className="px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200"
-                          >
-                            <CheckCircle className="h-4 w-4 mr-2" />
-                            –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
-                          </Button>
-                        </motion.div>
-                      )}
-                    </div>
-                  )}
-                </div>
-              </motion.div>
-            )}
-
-            {/* –®–∞–≥ 6: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä—ã */}
-            {currentStep === 6 && (
-              <motion.div
-                key="invoice-receipt"
-                initial={{ opacity: 0, y: 20 }}
-                animate={{ opacity: 1, y: 0 }}
-                exit={{ opacity: 0, y: -20 }}
-                transition={{ duration: 0.3 }}
-                className="max-w-4xl mx-auto mt-24"
-              >
-                <div className="bg-blue-50 dark:bg-blue-900/20 p-5 rounded-xl border border-blue-200 dark:border-blue-800 mb-8">
-                  <div className="flex items-start">
-                    <Info className="h-5 w-5 text-blue-500 mr-3 mt-0.5 flex-shrink-0" />
-                    <p className="text-sm text-blue-700 dark:text-blue-400">
-                      –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä—ã –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.
-                    </p>
-                  </div>
-                </div>
+      <ProjectTimeline steps={steps} currentStep={currentStep} />
+      <AnimatePresence mode="wait">
+        {currentStep === 1 && (
+          <Step1CompanyForm
+            isLoading={isLoading}
+            isVerified={isVerified}
+            isVerifying={isVerifying}
+            setIsSaveDialogOpen={setSetIsSaveDialogOpen}
+          />
+        )}
+        {/* –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏: currentStep === 2 –∏ —Ç.–¥. */}
+      </AnimatePresence>
+    </div>
+  );
+}
 
-                <div className="space-y-6">
-                  <div className="text-center">
-                    <h2 className="text-2xl font-bold mb-4">–û–∂–∏–¥–∞–Ω–∏–µ —Å—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä—ã</h2>
-                    <p className="text-gray-600 dark:text-gray-400">
-                      –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫—É. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
-                    </p>
-                  </div>
+export default function CreateProjectPage() {
+  return (
+    <CreateProjectProvider>
+      <TemplateLoader />
+      <CreateProjectPageContent />
+    </CreateProjectProvider>
+  );
+}
 
-                  {supplierReceiptUrl ? (
-                    <motion.div
-                      initial={{ scale: 0.9, opacity: 0 }}
-                      animate={{ scale: 1, opacity: 1 }}
-                      className="bg-green-50 dark:bg-green-900/20 p-6 rounded-xl border border-green-200 dark:border-green-800 text-center"
-                    >
-                      <CheckCircle className="h-16 w-16 text-green-500 mx-auto mb-4" />
-                      <h3 className="text-xl font-bold text-green-700 dark:text-green-400 mb-2">
-                        –°—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä–∞ –ø–æ–ª—É—á–µ–Ω–∞!
-                      </h3>
-                      <p className="text-gray-600 dark:text-gray-400 mb-4">–î–æ–∫—É–º–µ–Ω—Ç—ã –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã.</p>
-                      <Button onClick={() => window.open(supplierReceiptUrl, "_blank")} className="gap-2">
-                        <FileText className="h-4 w-4" />
-                        –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
-                      </Button>
-                    </motion.div>
-                  ) : (
-                    <div className="bg-yellow-50 dark:bg-yellow-900/20 p-8 rounded-xl border border-yellow-200 dark:border-yellow-800 text-center">
-                      <motion.div
-                        animate={{ rotate: 360 }}
-                        transition={{ duration: 2, repeat: Number.POSITIVE_INFINITY, ease: "linear" }}
-                        className="w-16 h-16 mx-auto mb-4"
-                      >
-                        <Clock className="h-16 w-16 text-yellow-500" />
-                      </motion.div>
-                      <h3 className="text-xl font-bold text-yellow-700 dark:text-yellow-400 mb-2">
-                        –û–∂–∏–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
-                      </h3>
-                      <p className="text-gray-600 dark:text-gray-400">
-                        –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫—É. –î–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏—è.
-                      </p>
-                    </div>
-                  )}
-                  {supplierReceiptUrl && (
-                    <motion.div
-                      initial={{ opacity: 0, y: 10 }}
-                      animate={{ opacity: 1, y: 0 }}
-                      transition={{ delay: 0.2 }}
-                      className="mt-8 text-center"
-                    >
-                      <Button
-                        onClick={() => setCurrentStep(7)}
-                        size="lg"
-                        className="px-8 py-6 text-lg gap-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 shadow-lg hover:shadow-xl transition-all duration-300"
-                      >
-                        –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é –ø–æ–ª—É—á–µ–Ω–∏—è
-                        <ArrowRight className="h-5 w-5" />
-                      </Button>
-                    </motion.div>
-                  )}
-                </div>
-              </motion.div>
-            )}
-            {/* –®–∞–≥ 7: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è */}
-            {currentStep === 7 && (
-              <motion.div
-                key="client-confirmation-step"
-                initial={{ opacity: 0, y: 20 }}
-                animate={{ opacity: 1, y: 0 }}
-                exit={{ opacity: 0, y: -20 }}
-                transition={{ duration: 0.3 }}
-                className="max-w-2xl mx-auto mt-24"
-              >
-                <div className="bg-white dark:bg-gray-900 p-8 rounded-xl border border-gray-200 dark:border-gray-800 shadow-xl">
-                  {isProjectCompleted ? (
-                    <div className="text-center">
-                      <motion.div
-                        initial={{ scale: 0 }}
-                        animate={{ scale: 1 }}
-                        transition={{ type: "spring", stiffness: 200, damping: 12 }}
-                        className="w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg"
-                      >
-                        <CheckCircle className="h-12 w-12 text-white" />
-                      </motion.div>
-                      <h2 className="text-3xl font-bold text-gray-900 dark:text-white mb-3">–ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!</h2>
-                      <p className="text-gray-600 dark:text-gray-400 max-w-md mx-auto mb-6">
-                        –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ. –í–∞—à –ø—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω.
-                      </p>
-                      <Button 
-                        onClick={() => router.push('/dashboard/active-projects')}
-                        className="bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-indigo-600 hover:to-blue-500"
-                      >
-                        –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–æ–µ–∫—Ç–∞–º
-                      </Button>
-                    </div>
-                  ) : (
-                    <>
-                      <div className="text-center mb-8">
-                        <motion.div
-                          initial={{ scale: 0 }}
-                          animate={{ scale: 1 }}
-                          transition={{ type: "spring", stiffness: 200, damping: 12, delay: 0.1 }}
-                          className="w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg"
-                        >
-                          <CheckCircle className="h-12 w-12 text-white" />
-                        </motion.div>
-                        <h2 className="text-3xl font-bold text-gray-900 dark:text-white mb-3">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è</h2>
-                        <p className="text-gray-600 dark:text-gray-400 max-w-md mx-auto">
-                          –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç (—á–µ–∫, —Å–∫—Ä–∏–Ω—à–æ—Ç), –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –æ—Ç
-                          –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ø–æ –¥–∞–Ω–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—É.
-                        </p>
-                      </div>
+// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —à–∞–±–ª–æ–Ω–∞ –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
+function TemplateLoader() {
+  const searchParams = useSearchParams();
+  const templateId = searchParams.get("templateId");
+  const { setProjectName, setCompanyFormData } = useCreateProjectContext();
+  const [isTemplateLoading, setIsTemplateLoading] = useState(false);
 
-                      <div className="space-y-6">
-  <Label className="text-sm font-medium text-gray-700 dark:text-gray-300 block mb-3">
-    –§–∞–π–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (PDF, JPG, PNG)
-  </Label>
-  <input
-    id="client-confirmation-upload"
-    type="file"
-    accept=".pdf,.jpg,.jpeg,.png"
-    onChange={handleClientConfirmationUpload}
-    disabled={isClientConfirmationUploading}
-    className="hidden"
-  />
-  <label
-    htmlFor="client-confirmation-upload"
-                          className="flex flex-col items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 cursor-pointer hover:border-blue-500 transition-colors"
-                        >
-                          {isClientConfirmationUploading ? (
-                            <div className="text-blue-500">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...</div>
-                          ) : clientConfirmationUrl ? (
-                            <div className="text-green-600 dark:text-green-400">–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω! <a href={clientConfirmationUrl} target="_blank" rel="noopener noreferrer" className="underline">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a></div>
-                          ) : (
-                            <>
-                              <span className="text-gray-500 dark:text-gray-400">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</span>
-                            </>
-                          )}
-                        </label>
-                        <div className="flex justify-end mt-6">
-                          <Button
-                            onClick={() => router.push('/dashboard/active-projects')}
-                            disabled={!clientConfirmationUrl}
-                            className="gap-2 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700"
-                          >
-                            –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
-                          </Button>
-                        </div>
-                      </div>
-                    </>
-                  )}
-                </div>
-              </motion.div>
-            )}
-          </AnimatePresence>
-        </div>
+  useEffect(() => {
+    async function fetchTemplate() {
+      if (!templateId) return;
+      setIsTemplateLoading(true);
+      const { data, error } = await supabase
+        .from("templates")
+        .select("data")
+        .eq("id", templateId)
+        .single();
+      if (!error && data && data.data) {
+        if (data.data.projectName) setProjectName(data.data.projectName);
+        if (data.data.companyFormData) setCompanyFormData(data.data.companyFormData);
+      }
+      setIsTemplateLoading(false);
+    }
+    fetchTemplate();
+    // eslint-disable-next-line react-hooks/exhaustive-deps
+  }, [templateId]);
+
+  if (isTemplateLoading) {
+    return (
+      <div className="flex flex-col items-center justify-center min-h-screen">
+        <div className="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"></div>
+        <p className="text-gray-600 dark:text-gray-400">–ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞...</p>
       </div>
-
-      {/* --- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ --- */}
-      <Dialog open={isSaveDialogOpen} onOpenChange={setIsSaveDialogOpen}>
-        <DialogContent>
-          <DialogHeader>
-            <DialogTitle>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω</DialogTitle>
-          </DialogHeader>
-          <div className="space-y-4">
-            <Input
-              placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞"
-              value={templateName}
-              onChange={e => setTemplateName(e.target.value)}
-            />
-            <Textarea
-              placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
-              value={templateDescription}
-              onChange={e => setTemplateDescription(e.target.value)}
-            />
-          </div>
-          <DialogFooter>
-            <Button onClick={handleSaveTemplate} disabled={!templateName.trim()}>
-              –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
-            </Button>
-          </DialogFooter>
-        </DialogContent>
-      </Dialog>
-    </div>
-  )
+    );
+  }
+  return null;
 }
